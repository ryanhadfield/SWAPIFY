{"version":3,"sources":["utils/API.js","pages/welcome.js","components/ItemCard/index.js","pages/profile.js","utils/chatContext.js","components/MatchCard/index.js","utils/firebase.js","components/MatchesSideBar/index.js","components/ChatMessage/index.js","components/ChatRoom/index.js","pages/chat.js","pages/createItem.js","components/SwipingCard/index.js","components/DistanceSlider/index.js","pages/swipping.js","components/Navbar/index.js","components/Footer/index.js","App.js","registerServiceWorker.js","index.js"],"names":["id","axios","get","userData","post","itemData","userID","userId","put","itemId","matchInfo","matchData","console","log","localStorage","setItem","JSON","stringify","delete","Welcome","useState","redirect","setRedirect","setUserID","googleSuccess","response","a","userObj","profileObj","googleId","user","email","firstName","givenName","lastName","familyName","image","imageUrl","listedItems","API","then","res","data","length","catch","error","className","motion","h1","animate","y","opacity","initial","transition","delay","duration","type","stiffness","img","rotateZ","scale","whileHover","src","alt","class","push","to","clientId","process","buttonText","onSuccess","onFailure","alert","cookiePolicy","isSignedIn","render","renderProps","large","node","style","marginRight","waves","onClick","h2","div","height","h4","x","ItemCard","props","openDeleteModal","setOpenDeleteModal","imageURL","draggable","lineHeight","paddingLeft","fontFamily","fontWeight","fontStyle","fontSize","color","itemName","href","marginTop","open","actions","options","dismissible","modal","results","loadItems","Profile","usersItemList","setUsersItemList","setMatchList","rating","setUserData","setImageArray","useParams","userRating","setUserRating","matchArray","loadImages","tempArray","forEach","item","i","matchResponse","item1Owner","itemInfo","userItemId","item1Id","userItemPhoto","item1Photo","userItemName","item1Name","otherItemId","item2Id","otherUser","item2Owner","otherItemImage","item2Photo","otherItemName","item2Name","useEffect","newUser","ratingCount","Math","round","width","data-tip","Array","fill","map","el","key","place","effect","m","s","floating","backgroundColor","paddingTop","paddingBottom","arrowLeft","paddingRight","arrowRight","itemStyle","itemClassActive","index","_id","itemDescription","chatContext","React","createContext","matchId","recentText","setChat","setNewText","MatchCard","itemIds","useContext","chatId","currentChatStyle","setCurrentChatStyle","openInfoModal","setOpenInfoModal","activateInfoModal","closeInfoModal","allMatches","yourImageUrl","newText","onCloseStart","firebaseConfig","apiKey","authDomain","REACT_APP_FIREBASE_AUTHDOMAIN","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","initializeApp","storage","firestore","MatchesSideBar","matchList","setAllMatches","noChats","setNoChats","item1NewText","getCollectionsMostRecents","item2NewText","newArray","collection","orderBy","limit","returns","_delegate","_snapshot","docChanges","latestText","doc","partialValue","mapValue","fields","text","stringValue","textTime","createdAt","timestampValue","sortedList","sort","b","dateA","Date","fixed","trigger","match","ChatMessage","message","sentFromid","sentFromPhoto","messageClass","ChatRoom","messagesRef","setMessagesRef","query","useCollectionData","idField","messages","formValue","setFormValue","dummy","useRef","userItem","setUserItem","otherItem","setOtherItem","messagesEndRef","createRef","openRateModal","setOpenRateModal","setRating","reward","setReward","photoURL","setTimeout","current","scrollIntoView","behavior","sendMessage","e","preventDefault","add","FieldValue","serverTimestamp","sentToid","setToPhoto","emptySymbol","fullSymbol","onChange","userResponse","ratingArray","newUserRating","window","location","reload","msg","ref","active","onSubmit","value","required","target","delResponse","deleteItem","updateRes","ChatApp","setChatId","setRecentText","notNewText","setNotNewText","minHeight","Provider","floor","random","marginBottom","Item","descriptionState","setDescriptionState","nameState","setNameState","setImage","setImageURL","setButtonText","userLocation","setUserLocation","wait","setWait","activatePreloader","setActivatePreloader","saveUserLocation","position","coords","latitude","longitude","document","getElementById","addEventListener","event","navigator","geolocation","getCurrentPosition","fileUploadHandler","Compressor","quality","success","result","randomNumber","name","on","snapshot","child","getDownloadURL","url","imageName","splitURL","split","newImageName","newURL","replace","newItem","description","itemPrice","itemOwner","likesFromItems","likesItems","seenItems","itemLocation","itemResponse","updatedUser","saveToDatabase","err","label","action","files","placeholder","maxWidth","desc","flashing","size","SwipingCard","DistanceSlider","distance","Handle","Slider","marks","0","50","min","max","defaultValue","distanceBoundary","handle","dragging","restProps","prefixCls","overlay","visible","placement","onAfterChange","setDistanceBoundary","preventFirstRender","Swipping","startingDragPoint","notUserItems","setNotUserItems","currentItem","setCurrentItem","noMoreItems","setNoMoreItems","activateCheckMark","setActivateCheckMark","activateRedXMark","setActivateRedXMark","imageNumber","setImageNumber","itIsAMatch","setItIsAMatch","modalMatchImage1","setModalMatchImage1","modalMatchImage2","setModalMatchImage2","Promise","resolve","reject","pos","getCoords","userItemsResponse","z","newCoords","notUserItemsArray","filter","p","splice","q","includes","unshift","userItemRes","sortedNotUserItems","v","notUserLat","notUserLong","userLat","userLong","getDistanceFromLatLonInKm","distanceResponse","lat1","lon1","lat2","lon2","dLat","deg2rad","dLon","sin","cos","c","atan2","sqrt","d","deg","PI","useMotionValue","background","useTransform","processDragInfo","userItemResponse","updatedItemData","currentItemResponse","updatedItemData1","item2Read","matchRes","l","drag","dragConstraints","left","right","onDragStart","info","point","onDragEnd","xl","rotate","CustomNavbar","centerLogo","setCenterLogo","deleteNavbarLinks","setDeleteNavbarLinks","pathname","useLocation","pathway","checkForNewTexts","trueCount","setInterval","alignLinks","brand","centerChildren","menuIcon","Badge","variant","edge","inDuration","onCloseEnd","onOpenEnd","onOpenStart","outDuration","preventScrolling","tooltip","alt-text","CustomFooter","copyrights","App","openSwapModal","setOpenSwapModal","openMatchModal","setOpenMatchModal","modalImage","setModalImage","modalID","setModalID","deletedItemUserId","setDeletedItemUserId","backgroundClass","setBackgroundClass","matchPutResponse","exact","path","component","createItem","Chat","isLocalhost","Boolean","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","ReactDOM","StrictMode","URL","origin","fetch","status","headers","indexOf","ready","unregister","checkValidServiceWorker","registerServiceWorker"],"mappings":"mjBAEe,EACJ,SAASA,GAChB,OAAOC,IAAMC,IAAI,cAAgBF,IAFtB,EAKH,SAASG,GACjB,OAAOF,IAAMG,KAAK,aAAcD,IANrB,EASH,SAASE,GACjB,OAAOJ,IAAMG,KAAK,aAAcC,IAVrB,EAaC,SAASC,GACrB,OAAOL,IAAMC,IAAI,mBAAqBI,IAd3B,EAiBA,WACX,OAAOL,IAAMC,IAAI,gBAlBN,EAqBD,SAASK,EAAQJ,GAC3B,OAAOF,IAAMO,IAAI,cAAgBD,EAAQJ,IAtB9B,EAyBD,SAASM,EAAQJ,GAC3B,OAAOJ,IAAMO,IAAI,cAAgBC,EAAQJ,IA1B9B,EA6BJ,SAASI,GAChB,OAAOR,IAAMO,IAAI,cAAgBC,IA9BtB,EAqCF,SAASC,GAClB,OAAOT,IAAMG,KAAK,eAAgBM,IAtCvB,EAyCG,SAASV,GACvB,OAAOC,IAAMC,IAAI,qBAAuBF,IA1C7B,EA6CI,SAASA,EAAIW,GAC5B,OAAOV,IAAMO,IAAI,gBAAkBR,EAAIW,IA9C5B,EAiDE,SAASX,GACtBY,QAAQC,IAAIb,GACZc,aAAaC,QAAQ,WAAYC,KAAKC,UAAUjB,KAnDrC,EAsDH,SAASA,GACjB,OAAOC,IAAMC,IAAI,gBAAkBF,IAvDxB,EA0DS,SAASA,GAC7B,OAAOC,IAAMiB,OAAO,oBAAsBlB,IA3D/B,EA8DD,SAASA,GACnB,OAAOC,IAAMiB,OAAO,cAAgBlB,IA/DzB,EAkEA,SAASA,GACpB,OAAOC,IAAMiB,OAAO,gBAAkBlB,I,gDCuL3BmB,MAlPf,WAEA,IACA,EAAgCC,oBAAS,GAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAA4BF,mBAAS,IAArC,mBAAOd,EAAP,KAAeiB,EAAf,KAEMC,EAAa,uCAAG,WAAOC,GAAP,iBAAAC,EAAA,sDACZC,EAAUF,EAASG,WACzBL,EAAUI,EAAQE,UACZC,EAAO,CACTC,MAAOJ,EAAQI,MACfC,UAAWL,EAAQM,UACnBC,SAAUP,EAAQQ,WAClBC,MAAOT,EAAQU,SACfR,SAAUF,EAAQE,SAClBS,YAAa,IAEjBC,EAAYZ,EAAQE,UAAUW,MAAK,SAAAC,GAC3BA,EAAIC,KAAKC,OAAS,GAIlBJ,EAAaT,GAHbR,GAAY,MAMjBsB,OAAM,SAAAC,GAAK,OAAIjC,QAAQC,IAAIgC,MAnBZ,2CAAH,sDA6BnB,OACE,yBAAKC,UAAU,qBACb,yBAAKA,UAAU,cACb,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,eACb,kBAACC,EAAA,EAAOC,GAAR,CACEC,QAAS,CAAEC,EAAG,EAAGC,QAAS,GAC1BC,QAAS,CAAEF,GAAI,IAAKC,QAAS,GAC7BE,WAAY,CACVC,MAAO,GACPC,SAAU,EACVC,KAAM,SACNC,UAAW,MAPf,uBAaF,yBAAKX,UAAU,OACb,kBAACC,EAAA,EAAOW,IAAR,CACET,QAAS,CAAEU,QAAS,KAAMR,QAAS,EAAGS,MAAO,GAC7CR,QAAS,CAAED,QAAS,EAAGS,MAAO,GAC9BP,WAAY,CAAEC,MAAO,GAAKC,SAAU,KACpCM,WAAY,CAAEF,QAAS,KACvBG,IAAI,oCACJC,IAAI,iBACJC,MAAM,oBAYV,yBAAKlB,UAAU,aACZzB,EAAW,kBAAC,IAAD,CAAU4C,MAAI,EAACC,GAAE,mBAAc5D,KAAe,KAC1D,kBAAC,IAAD,CACEwC,UAAU,WACVqB,SA3EWC,2EA4EXC,WAAW,eACXC,UAAW9C,EACX+C,UAnDU,SAAC9C,GACvBb,QAAQC,IAAI,mCACZ2D,MAAM,+BACN5D,QAAQC,IAAIY,IAiDAgD,aAAc,qBACdC,YAAY,EACZC,OAAQ,SAACC,GAAD,OACN,kBAAC7B,EAAA,EAAOrB,EAAR,CACEuB,QAAS,CAAEE,QAAS,GACpBC,QAAS,CAAED,QAAS,EAAGS,MAAO,GAC9BP,WAAY,CAAEC,MAAO,EAAGC,SAAU,IAElC,kBAAC,SAAD,CACEsB,OAAK,EACL/B,UAAU,qBACVgC,KAAK,IACLC,MAAO,CACLC,YAAa,OAEfC,MAAM,QACNC,QAASN,EAAYM,SARvB,wBAsBZ,yBAAKpC,UAAU,qBACb,yBAAKA,UAAU,aACb,kBAACC,EAAA,EAAOoC,GAAR,CACElC,QAAS,CAAEE,QAAS,GACpBC,QAAS,CAAED,QAAS,GACpBE,WAAY,CAAEC,MAAO,IAAKC,SAAU,IAHtC,qBAKqB,MAGvB,kBAACR,EAAA,EAAOqC,IAAR,CACEtC,UAAU,eACVG,QAAS,CAAEE,QAAS,GACpBC,QAAS,CAAED,QAAS,GACpBE,WAAY,CAAEC,MAAO,IAAKC,SAAU,GACpCM,WAAY,IAEZ,kBAACd,EAAA,EAAOqC,IAAR,CACEnC,QAAS,CAAEE,QAAS,GACpBC,QAAS,CAAED,QAAS,GAEpBU,WAAY,CACVD,MAAO,KAETd,UAAU,OAEV,yBAAKA,UAAU,6BACb,kBAACC,EAAA,EAAOW,IAAR,CACEI,IAAI,6BACJC,IAAI,eACJsB,OAAO,WAGX,yBAAKvC,UAAU,qBACb,kBAACC,EAAA,EAAOuC,GAAR,CACErC,QAAS,CAAEE,QAAS,EAAGoC,EAAG,GAC1BnC,QAAS,CAAED,QAAS,EAAGoC,EAAG,KAC1BlC,WAAY,CAAEC,MAAO,EAAGC,SAAU,GAClCT,UAAU,QAJZ,4BAUJ,kBAACC,EAAA,EAAOqC,IAAR,CACEnC,QAAS,CAAEE,QAAS,GACpBC,QAAS,CAAED,QAAS,GAEpBU,WAAY,CACVD,MAAO,KAETd,UAAU,OAEV,yBAAKA,UAAU,6BACb,kBAACC,EAAA,EAAOW,IAAR,CACEI,IAAI,6BACJC,IAAI,eACJsB,OAAO,WAGX,yBAAKvC,UAAU,qBACb,kBAACC,EAAA,EAAOuC,GAAR,CACErC,QAAS,CAAEE,QAAS,EAAGoC,EAAG,GAC1BnC,QAAS,CAAED,QAAS,EAAGoC,EAAG,KAC1BlC,WAAY,CAAEC,MAAO,EAAGC,SAAU,GAClCT,UAAU,QAJZ,4BAUJ,kBAACC,EAAA,EAAOqC,IAAR,CACEnC,QAAS,CAAEE,QAAS,GACpBC,QAAS,CAAED,QAAS,GAEpBU,WAAY,CACVD,MAAO,KAETd,UAAU,OAEV,yBAAKA,UAAU,6BACb,kBAACC,EAAA,EAAOW,IAAR,CACEI,IAAI,2BACJC,IAAI,eACJsB,OAAO,WAGX,yBAAKvC,UAAU,qBACb,kBAACC,EAAA,EAAOuC,GAAR,CACErC,QAAS,CAAEE,QAAS,EAAGoC,EAAG,GAC1BnC,QAAS,CAAED,QAAS,EAAGoC,EAAG,KAC1BlC,WAAY,CAAEC,MAAO,EAAGC,SAAU,GAClCT,UAAU,QAJZ,6BAUJ,kBAACC,EAAA,EAAOqC,IAAR,CACEnC,QAAS,CAAEE,QAAS,GACpBC,QAAS,CAAED,QAAS,GAEpBU,WAAY,CACVD,MAAO,KAETd,UAAU,OAEV,yBAAKA,UAAU,6BACb,kBAACC,EAAA,EAAOW,IAAR,CACEI,IAAI,2BACJC,IAAI,eACJsB,OAAO,WAGX,yBAAKvC,UAAU,qBACb,kBAACC,EAAA,EAAOuC,GAAR,CACErC,QAAS,CAAEE,QAAS,EAAGoC,EAAG,GAC1BnC,QAAS,CAAED,QAAS,EAAGoC,EAAG,KAC1BlC,WAAY,CAAEC,MAAO,EAAGC,SAAU,GAClCT,UAAU,QAJZ,oC,gBC5KG0C,G,OAzDE,SAACC,GAEhB,MAA+CrE,oBAAS,GAAxD,mBAAOsE,EAAP,KAAwBC,EAAxB,KAEA,OACE,6BACA,yBAAK3B,MAAM,iBACP,yBAAKA,MAAM,cACT,yBAAKF,IAAK2B,EAAMG,SAAU9C,UAAU,gBAAgB+C,UAAU,UAC9D,0BAAM7B,MAAM,oCAAqCe,MAAO,CACpDM,OAAQ,OACRS,WAAY,OACZC,YAAa,MACbC,WAAY,2BACZC,WAAY,MACZC,UAAW,SACXC,SAAU,OACVC,MAAO,YACLX,EAAMY,WAEd,yBAAKrC,MAAM,6BACT,uBAAGsC,KAAI,oBAAeb,EAAMzF,GAArB,YAA2ByF,EAAMtF,SAAS0B,WAAY,kBAAC,SAAD,CAAQ7B,GAAG,WAAW8C,UAAU,iBAAiBoC,QAAS,kBAAM3C,EAAkBkD,EAAMzF,MAAK,yBAAK8C,UAAU,YAAf,UAC1J,6BACA,kBAAC,SAAD,CAAQiC,MAAO,CAACwB,UAAW,QAASzD,UAAU,mBAAoBoC,QAAS,kBAAMS,GAAmB,KAAO,uBAAG3B,MAAM,6BAAT,aAGjH,kBAAC,QAAD,CACIwC,KAAMd,EACN5C,UAAU,qBACV2D,QAAS,GACTC,QAAS,CACPC,aAAa,IAGf,iEACA,6BACA,iFACA,6BAAS,6BACT,2BACE,kBAAC,SAAD,CAAQ3G,GAAG,WAAW4G,MAAM,QAAQ1B,QAAS,WACzC3C,EAAekD,EAAMzF,IAAIwC,MAAK,SAACqE,GAC7BpB,EAAMqB,iBAFZ,WAOF,6BAAS,6BACT,2BACE,kBAAC,SAAD,CAAQ9G,GAAG,WAAWkF,QAAS,kBAAMS,GAAmB,IAAQiB,MAAM,SAAtE,WAEF,iC,wBCgNOG,MAvPf,WACE,MAA0C3F,mBAAS,IAAnD,mBAAO4F,EAAP,KAAsBC,EAAtB,KACA,EAAkC7F,mBAAS,IAA3C,mBAAkB8F,GAAlB,WACA,EAAgC9F,mBAAS,CACvCW,MAAO,GACPC,UAAW,GACXH,SAAU,GACVO,MAAO,GACPF,SAAU,GACVI,YAAa,GACb6E,OAAQ,KAPV,mBAAOhH,EAAP,KAAiBiH,EAAjB,KASA,EAAoChG,mBAAS,CAAC,KAA9C,mBAAmBiG,GAAnB,WACQrH,EAAOsH,cAAPtH,GACR,EAAoCoB,mBAAS,GAA7C,mBAAOmG,EAAP,KAAmBC,EAAnB,KAEIC,EAAa,GAiCjB,SAASC,IACP,IAAIC,EAAY,GAChBX,EAAcY,SAAQ,SAACC,EAAMC,GAC3BH,EAAU1D,KAAK4D,EAAKjC,aAEM,GAAxBoB,EAAcrE,SAGlB/B,QAAQC,IAAI8G,GACZN,EAAcM,IAGhB,SAASb,IAIPvE,EAAiBpC,EAAS0B,UAAUW,MAAK,SAACf,GACxCwF,EAAiBxF,EAASiB,SAE5BH,EAAmBpC,EAAS0B,UAAUW,MAAK,SAACuF,GAC1CA,EAAcrF,KAAKkF,SAAQ,SAACC,GAC1B,GAAIA,EAAKG,aAAe7H,EAAS0B,SAAU,CACzC,IAAMoG,EAAW,CACfC,WAAYL,EAAKM,QACjB5H,OAAQsH,EAAKG,WACbI,cAAeP,EAAKQ,WACpBC,aAAcT,EAAKU,UACnBC,YAAaX,EAAKY,QAClBC,UAAWb,EAAKc,WAChBC,eAAgBf,EAAKgB,WACrBC,cAAejB,EAAKkB,WAEtBtB,EAAWxD,KAAKgE,GACZF,EAAcrF,KAAKC,SAAW8E,EAAW9E,QAC3CuE,EAAaO,OAEV,CACL,IAAMQ,EAAW,CACfC,WAAYL,EAAKY,QACjBlI,OAAQsH,EAAKc,WACbP,cAAeP,EAAKgB,WACpBP,aAAcT,EAAKkB,UACnBP,YAAaX,EAAKM,QAClBO,UAAWb,EAAKG,WAChBY,eAAgBf,EAAKQ,WACrBS,cAAejB,EAAKU,WAEtBd,EAAWxD,KAAKgE,GACZF,EAAcrF,KAAKC,SAAW8E,EAAW9E,QAC3CuE,EAAaO,UAcvB,OA9FAuB,qBAAU,WACRlC,IACAY,IACAnF,EAAYvC,GAAIwC,MAAK,SAACC,GACpB,IAAMwG,EAAU,CACdlH,MAAOU,EAAIC,KAAK,GAAGX,MACnBC,UAAWS,EAAIC,KAAK,GAAGV,UACvBH,SAAUY,EAAIC,KAAK,GAAGb,SACtBO,MAAOK,EAAIC,KAAK,GAAGN,MACnBF,SAAUO,EAAIC,KAAK,GAAGR,SACtBI,YAAaG,EAAIC,KAAK,GAAGJ,YACzB6E,OAAQ1E,EAAIC,KAAK,GAAGyE,QAGtB,GADAC,EAAY6B,GACsB,IAA9BxG,EAAIC,KAAK,GAAGyE,OAAOxE,OACrB6E,EAAc,OACT,CAEL,IADA,IAAI0B,EAAc,EACTpB,EAAI,EAAGA,EAAIrF,EAAIC,KAAK,GAAGyE,OAAOxE,OAAQmF,IAC7CoB,GAA4BzG,EAAIC,KAAK,GAAGyE,OAAOW,GAEjDN,EAAc2B,KAAKC,MAAMF,EAAczG,EAAIC,KAAK,GAAGyE,OAAOxE,eAG7D,IAEHqG,qBAAU,WACRlC,IACAY,MACC,CAACvH,IAkEF,6BAGE,yBAAK2C,UAAU,yBAAyBiC,MAAO,CAAEwB,UAAW,SAC1D,yBAAKzD,UAAU,OACb,yBAAKA,UAAU,gBACb,kBAACC,EAAA,EAAOW,IAAR,CACET,QAAS,CAAEC,EAAG,EAAGC,QAAS,GAC1BC,QAAS,CAAEF,GAAI,GAAIC,QAAS,GAC5BE,WAAY,CACVC,MAAO,GACPC,SAAU,IAIZQ,IAAI,GACJjB,UAAU,mBACViC,MAAO,CACLM,OAAQ,QACRgE,MAAO,QACP9C,UAAW,QAEbzC,IAAK3D,EAASiC,UAIpB,yBAAKU,UAAU,OACb,yBAAKA,UAAU,2BAA2BwG,WAAS,uBACjD,kBAACvG,EAAA,EAAOqC,IAAR,CACEnC,QAAS,CAAEE,QAAS,GACpBC,QAAS,CAAED,QAAS,GACpBE,WAAY,CAAEE,SAAU,GAAID,MAAO,IACnCR,UAAU,4BACTyG,MAAMhC,GACJiC,OACAC,KAAI,SAACC,EAAI5B,GAAL,OACH,uBACEhF,UAAU,iBACV6G,IAAK7B,EACL/C,MAAO,CAAEqB,MAAO,YAHlB,WAQHmD,MAAM,EAAIhC,GACRiC,OACAC,KAAI,SAACC,EAAI5B,GAAL,OACH,uBACEhF,UAAU,iBACV6G,IAAK7B,EACL/C,MAAO,CAAEqB,MAAO,YAHlB,mBAUN,kBAAC,IAAD,CAAcwD,MAAM,SAASpG,KAAK,QAAQqG,OAAO,YAMrD,kBAAC,MAAD,CAAK/G,UAAU,mBAEf,kBAAC,MAAD,KACE,yBAAKA,UAAU,gBACb,kBAACC,EAAA,EAAOoC,GAAR,CACElC,QAAS,CAAEE,QAAS,GACpBC,QAAS,CAAED,QAAS,GACpBE,WAAY,CAAEE,SAAU,GACxBwB,MAAO,CAAEqB,MAAO,WAChBtD,UAAU,YAGT3C,EAAS6B,UARZ,IAQwB7B,EAAS+B,YAKvC,kBAAC,MAAD,CAAKY,UAAU,kBACb,kBAAC,MAAD,CAAKgH,EAAG,EAAGC,EAAG,EAAGjH,UAAU,eACzB,wBAAIiC,MAAO,CAAEqB,MAAO,YAApB,aAEF,kBAAC,MAAD,CAAK0D,EAAG,EAAGC,EAAG,EAAGjH,UAAU,cACzB,kBAAC,SAAD,CACEkH,UAAU,EACVnF,OAAO,EACPE,MAAO,CAAEkF,gBAAiB,YAE1B,kBAAC,IAAD,CAAM/F,GAAE,sBAAiB/D,EAAS0B,WAChC,uBAAGiB,UAAU,kBAAb,WAKR,kBAAC,MAAD,CAAKiC,MAAO,CAAEmF,WAAY,SACxB,wBACEnF,MAAO,CACLiB,WAAY,QACZI,MAAO,UACP+D,cAAe,SAJnB,cASC,kBAAC,MAAD,CAAKJ,EAAG,GAAIhF,MAAO,CAACmF,WAAY,SACjC,kBAAC,IAAD,CAEEE,UAAW,yBAAKrF,MAAO,CAAEoB,SAAU,OAAQkE,aAAc,SAAW,OACpEC,WAAY,yBAAKvF,MAAO,CAAEoB,SAAU,OAAQJ,YAAa,SAAW,OACpEwE,UAAW,CAACxE,YAAY,QACxByE,gBAAiB,OACjB9H,KAAMsE,EAAcyC,KAAI,SAAC5B,EAAM4C,GAAP,OACtB,kBAAC,EAAD,CACEd,IAAKc,EACL3D,UAAWA,EACXlB,SAAUiC,EAAKjC,SACfS,SAAUwB,EAAKxB,SACfrG,GAAI6H,EAAK6C,IACTC,gBAAiB9C,EAAK8C,gBACtBxK,SAAUA,WAOlB,kBAAC,MAAD,CAAK4E,MAAO,CAAEM,OAAQ,cC1PbuF,G,OAPKC,IAAMC,cAAc,CACtCC,QAAS,GACTC,WAAY,GACZC,QAAS,aACTC,WAAY,gBCkICC,EAjIG,SAAC1F,GACf,IAAM2F,EAAU,CACZL,QAAStF,EAAM9E,UAAUoK,SAE7B,EAA4BM,qBAAWT,GAA/BK,EAAR,EAAQA,QAASK,EAAjB,EAAiBA,OACjB,EAAkDlK,oBAAS,GAA3D,mBAAQmK,EAAR,KAA0BC,EAA1B,KACA,EAAsCpK,mBAAS,GAA/C,mBAAQmG,EAAR,KAAoBC,EAApB,KACA,EAA4CpG,oBAAS,GAArD,mBAAQqK,EAAR,KAAuBC,EAAvB,KA2BA,SAASC,IACLD,GAAiB,GACjB9K,QAAQC,IAAI4E,EAAM9E,WAGtB,SAASiL,IACLF,GAAiB,GAGrB,OAlCA1C,qBAAU,WACPiC,EAAQ,CAACF,QAAStF,EAAMoG,WAAWnJ,KAAK,GAAGgI,MAC3CnI,EAAYkD,EAAM9E,UAAU+H,WAAWlG,MAAK,SAACC,GACzC,GAAkC,IAA9BA,EAAIC,KAAK,GAAGyE,OAAOxE,OACnB6E,EAAc,OAEb,CAED,IADA,IAAI0B,EAAc,EACTpB,EAAI,EAAGA,EAAIrF,EAAIC,KAAK,GAAGyE,OAAOxE,OAAQmF,IAC3CoB,GAA4BzG,EAAIC,KAAK,GAAGyE,OAAOW,GAEnDN,EAAc2B,KAAKC,MAAMF,EAAczG,EAAIC,KAAK,GAAGyE,OAAOxE,eAGlE,IAEHqG,qBAAU,WACFsC,EAAOP,UAAYtF,EAAM9E,UAAUoK,QACnCS,GAAoB,GAGpBA,GAAoB,KAEzB,CAACF,IAYA,6BAEKC,EACG,kBAAC,iBAAD,CAAgBzI,UAAU,wBAAwBiC,MAAO,CAACkF,gBAAgB,YAC1E,uBAAGnH,UAAU,WAAU,yBACnBiB,IAAI,GACJjB,UAAU,yBACVgB,IAAK2B,EAAMqG,gBAEf,yBAAKhI,IAAI,oCAAoChB,UAAU,uBACvD,uBAAGA,UAAU,WAAU,yBACnBiB,IAAI,GACJjB,UAAU,6BACVgB,IAAK2B,EAAMG,WACb,uBAAG9C,UAAU,qCAAb,QAAyD,uBAAGA,UAAU,wBAAwByE,IAEhG,uBAAGzE,UAAU,qBACT,uBAAGA,UAAU,oCAAoCiC,MAAQ,CAACkF,gBAAgB,WAAY/E,QAAS,WAAOyG,MAAuB,uBAAG7I,UAAU,kBAAb,UAGjI,uBAAGA,UAAU,qBACR2C,EAAM9E,UAAUoL,QAAW,uBAAGjJ,UAAU,0CAA0CiC,MAAQ,CAACkF,gBAAgB,WAAY/E,QAAS,WAAO+F,EAAQG,KAAY,uBAAGtI,UAAU,kBAAb,SAA+C,uBAAGA,UAAU,oCAAoCiC,MAAQ,CAACkF,gBAAgB,WAAY/E,QAAS,WAAO+F,EAAQG,KAAY,uBAAGtI,UAAU,kBAAb,WAKzU,kBAAC,iBAAD,CAAgBA,UAAU,yBAC1B,uBAAGA,UAAU,WAAU,yBACnBiB,IAAI,GACJjB,UAAU,0BACVgB,IAAK2B,EAAMqG,gBAEf,yBAAKhI,IAAI,oCAAoChB,UAAU,uBACvD,uBAAGA,UAAU,WAAU,yBACnBiB,IAAI,GACJjB,UAAU,6BACVgB,IAAK2B,EAAMG,WACb,uBAAG9C,UAAU,qCAAb,QAAyD,uBAAGA,UAAU,gBAAgByE,IAExF,uBAAGzE,UAAU,qBACT,uBAAGA,UAAU,oCAAoCiC,MAAQ,CAACkF,gBAAgB,WAAY/E,QAAS,WAAOyG,MAAuB,uBAAG7I,UAAU,kBAAb,UAEjI,uBAAGA,UAAU,qBACR2C,EAAM9E,UAAUoL,QAAW,uBAAGjJ,UAAU,0CAA0CiC,MAAQ,CAACkF,gBAAgB,WAAY/E,QAAS,WAAO+F,EAAQG,KAAY,uBAAGtI,UAAU,kBAAb,SAA+C,uBAAGA,UAAU,oCAAoCiC,MAAQ,CAACkF,gBAAgB,WAAY/E,QAAS,WAAO+F,EAAQG,KAAY,uBAAGtI,UAAU,kBAAb,WAK7U,kBAAC,QAAD,CACI0D,KAAMiF,EACN3I,UAAU,eACV2D,QAAS,GACTC,QAAS,CACLsF,aAAcJ,IAGlB,kBAAC,MAAD,KACI,kBAAC,MAAD,CAAK7B,EAAG,GAAID,EAAG,GACX,yBAAKhG,IAAK2B,EAAM9E,UAAUyH,cAAetF,UAAU,0BACnD,4BAAK2C,EAAM9E,UAAU2H,eAEzB,kBAAC,MAAD,CAAKyB,EAAG,GAAID,EAAG,GACX,6BAAS,6BACT,yBAAKhG,IAAI,oCAAoChB,UAAU,iBACvD,6BAAS,8BAEb,kBAAC,MAAD,CAAKiH,EAAG,GAAID,EAAG,GACX,yBAAKhG,IAAK2B,EAAM9E,UAAUiI,eAAgB9F,UAAU,0BACpD,4BAAK2C,EAAM9E,UAAUmI,iBAW7B,2BAAG,kBAAC,SAAD,CAAQlC,MAAM,QAAQ9D,UAAU,mBAAmBoC,QAAS0G,GAA5D,a,QC9HbK,G,cAAiB,CACnBC,OAAQ9H,0CACR+H,WAAY/H,wgBAAYgI,8BACxBC,UAAW,gBACXC,cAAe,4BACfC,kBAAmBnI,eACnBoI,MAAOpI,4CACPqI,cAAerI,iBAGnBsI,IAASC,cAAcV,GAEvB,IAAMW,EAAUF,IAASE,UACnBC,EAAYH,IAASG,Y,OCRZ,SAASC,EAAerH,GACnC,MAA0CrE,mBAAS,IAAnD,mBAAsB6F,GAAtB,WACA,EAAkC7F,mBAAS,IAA3C,mBAAO2L,EAAP,KAAkB7F,EAAlB,KACA,EAAoC9F,mBAAS,IAA7C,mBAAOyK,EAAP,KAAmBmB,EAAnB,KACA,EAA8B5L,oBAAS,GAAvC,mBAAO6L,EAAP,KAAgBC,EAAhB,KACM/M,EAAWsF,EAAMtF,SACf6K,EAAeK,qBAAWT,GAA1BI,WACJvD,EAAa,GAEjBuB,qBAAU,WACNzG,EAAiBpC,EAAS0B,UAAUW,MAAK,SAACf,GACtCwF,EAAiBxF,EAASiB,SAE9BH,EAAmBpC,EAAS0B,UAAUW,MAAK,SAACuF,GACN,IAA9BA,EAAcrF,KAAKC,QACnBuK,GAAW,GAEfF,EAAcjF,GACdA,EAAcrF,KAAKkF,SAAQ,SAAAC,GACvB,GAAIA,EAAKG,aAAe7H,EAAS0B,SAAU,CACvC,IAAMoG,EAAW,CACbC,WAAYL,EAAKM,QACjB5H,OAAQsH,EAAKG,WACbI,cAAeP,EAAKQ,WACpBC,aAAcT,EAAKU,UACnBC,YAAaX,EAAKY,QAClBC,UAAWb,EAAKc,WAChBC,eAAgBf,EAAKgB,WACrBC,cAAejB,EAAKkB,UACpBgC,QAASlD,EAAK6C,IACdqB,QAASlE,EAAKsF,cAElB1F,EAAWxD,KAAKgE,GACZF,EAAcrF,KAAKC,SAAW8E,EAAW9E,QACzCyK,EAA0B3F,GAAYjF,MAAK,SAACC,GACxCyE,EAAazE,UAIpB,CACD,IAAMwF,EAAW,CACbC,WAAYL,EAAKY,QACjBlI,OAAQsH,EAAKc,WACbP,cAAeP,EAAKgB,WACpBP,aAAcT,EAAKkB,UACnBP,YAAaX,EAAKM,QAClBO,UAAWb,EAAKG,WAChBY,eAAgBf,EAAKQ,WACrBS,cAAejB,EAAKU,UACpBwC,QAASlD,EAAK6C,IACdqB,QAASlE,EAAKwF,cAElB5F,EAAWxD,KAAKgE,GACZF,EAAcrF,KAAKC,SAAW8E,EAAW9E,QACzCyK,EAA0B3F,GAAYjF,MAAK,SAACC,GACxCyE,EAAazE,eAMlC,CAACuI,EAAYvF,IAIhB,IAAM2H,EAAyB,uCAAG,WAAME,GAAN,mBAAA5L,EAAA,0DAC1B4L,EAD0B,iBAErBxF,EAAI,EAFiB,YAEdA,EAAIwF,EAAS3K,QAFC,iCAGJkK,EAAUU,WAAV,UAAwBD,EAASxF,GAAGiD,UAAWyC,QAAQ,YAAa,QAAQC,MAAM,GAAGvN,MAHjF,QAGpBwN,EAHoB,QAIdC,UAAUC,UAAUC,WAAW,KACvCP,EAASxF,GAAGgG,WAAaJ,EAAQC,UAAUC,UAAUC,WAAW,GAAGE,IAAIrL,KAAKsL,aAAaC,SAASC,OAAOC,KAAKC,YAC9Gd,EAASxF,GAAGuG,SAAWX,EAAQC,UAAUC,UAAUC,WAAW,GAAGE,IAAIrL,KAAKsL,aAAaC,SAASC,OAAOI,UAAUC,gBAN3F,OAEOzG,IAFP,8BAS1B0G,EAAclB,EAASmB,MAAK,SAAiB/M,EAAGgN,GAChD,IAAIC,EAAQ,IAAIC,KAAKlN,EAAE2M,UAEvB,OADY,IAAIO,KAAKF,EAAEL,UACRM,KAZW,kBAcvBH,GAduB,4CAAH,sDA4B/B,OAVAxF,qBAAU,WAENoE,EAA0BL,GAAWvK,MAAK,SAACC,GACvCyE,EAAazE,QAGlB,CAACuI,IAKA,6BACI,kBAAC,UAAD,CACI6D,OAAO,EACPC,QAAS,kBAAC,SAAD,CAAQ9E,UAAU,EAAMnF,OAAO,EAAM/B,UAAU,sBAAqB,uBAAGkB,MAAM,kBAAT,UAC7E,kBAAC,aAAD,CAAYlB,UAAU,kBACjBiK,EAAUtD,KAAI,SAAAsF,GAAK,OAChB,kBAAC,EAAD,CAAWjD,aAAciD,EAAM3G,cAAexC,SAAUmJ,EAAMnG,eAAgBjI,UAAWoO,EAAOlD,WAAYA,SAMxH,kBAAC,QAAD,CACIrF,KAAMyG,EACNnK,UAAU,eACV2D,QAAS,GACTC,QAAS,CACTC,aAAa,IAEb,yCACA,6BACA,0EACA,4DACA,6BACA,uBAAGL,KAAI,mBAAcnG,EAAS0B,WAAY,kBAAC,SAAD,CAAQ7B,GAAG,YAAX,c,oBC5H3C,SAASgP,EAAYvJ,GAChC,IAAMtF,EAAWsF,EAAMtF,SACvB,EAA4CsF,EAAMwJ,QAA1Cd,EAAR,EAAQA,KAAMe,EAAd,EAAcA,WAAYC,EAA1B,EAA0BA,cACpBC,EAAeF,IAAe/O,EAAS0B,SAAW,OAAS,WAGjE,OACI,yBAAKiB,UAAS,kBAAasM,IACvB,yBAAKtM,UAAU,YAAYgB,IAAKqL,EAAepL,IAAI,kBACnD,2BAAIoK,I,sCCDD,SAASkB,EAAS5J,GAC7B,IAAMtF,EAAWsF,EAAMtF,SACvB,EAA+BkL,qBAAWT,GAAlCU,EAAR,EAAQA,OAAQJ,EAAhB,EAAgBA,WAChB,EAAsC9J,mBAASyL,EAAUU,WAAW,UAApE,mBAAO+B,EAAP,KAAoBC,EAApB,KACMC,EAAQF,EAAY9B,QAAQ,aAClC,EAAmBiC,YAAkBD,EAAO,CAACE,QAAS,OAA/CC,EAAP,oBACA,EAAkCvO,mBAAS,IAA3C,mBAAOwO,EAAP,KAAkBC,EAAlB,KACMC,EAAQC,mBACd,EAAgC3O,mBAAS,IAAzC,mBAAO4O,EAAP,KAAiBC,EAAjB,KACA,EAAkC7O,mBAAS,IAA3C,mBAAO8O,EAAP,KAAkBC,EAAlB,KACMC,EAAiBvF,IAAMwF,YAC7B,EAA0CjP,oBAAS,GAAnD,mBAAOkP,EAAP,KAAsBC,EAAtB,KACA,EAA4BnP,mBAAS,GAArC,mBAAO+F,EAAP,KAAeqJ,GAAf,KACA,GAA6BpP,oBAAS,GAAtC,qBAAOqP,GAAP,MAAeC,GAAf,MAEA1H,qBAAU,WACNuG,EAAe1C,EAAUU,WAAWjC,EAAOP,SAAW,UACtDxI,EAAa+I,EAAOP,SAASvI,MAAK,SAACuF,GAC3BA,EAAcrF,KAAKsF,aAAe7H,EAAS0B,UAC3CoO,EAAY,CAACjQ,GAAI+H,EAAcrF,KAAKsF,WAAY2I,SAAU5I,EAAcrF,KAAK2F,aAC7E8H,EAAa,CAACnQ,GAAI+H,EAAcrF,KAAKiG,WAAYgI,SAAU5I,EAAcrF,KAAKmG,eAG9EoH,EAAY,CAACjQ,GAAI+H,EAAcrF,KAAKiG,WAAYgI,SAAU5I,EAAcrF,KAAKmG,aAC7EsH,EAAa,CAACnQ,GAAI+H,EAAcrF,KAAKsF,WAAY2I,SAAU5I,EAAcrF,KAAK2F,iBAGtFuI,YAAW,WACPd,EAAMe,QAAQC,eAAe,CAAEC,SAAU,aACxC,OACN,CAACzF,IAGJ,IAAM0F,GAAW,uCAAG,WAAMC,GAAN,SAAAvP,EAAA,6DAChBuP,EAAEC,iBACF3O,EAAa+I,EAAOP,SAASvI,MAAK,SAACuF,GAC/B,GAAIA,EAAcrF,KAAKsF,aAAe7H,EAAS0B,SAAU,CAKrDU,EAAoB+I,EAAOP,QAJT,CACdsC,cAAc,EACdF,cAAc,QAIjB,CAKD5K,EAAoB+I,EAAOP,QAJT,CACdoC,cAAc,EACdE,cAAc,QAO1BnC,EAAW0E,GApBK,SAqBVN,EAAY6B,IAAI,CAClBhD,KAAMyB,EACNtB,UAAW5B,IAASG,UAAUuE,WAAWC,kBACzCnC,WAAYc,EAAShQ,GACrBsR,SAAUpB,EAAUlQ,GACpBmP,cAAea,EAASW,SACxBY,WAAYrB,EAAUS,WA3BV,OA6BhBd,EAAa,IACbC,EAAMe,QAAQC,eAAe,CAAEC,SAAU,WA9BzB,2CAAH,sDAiFjB,OACI,6BACA,yBAAKjO,UAAU,aAEX,kBAAC,QAAD,CACI0D,KAAM8J,EACNxN,UAAU,eACV2D,QAAS,GACTC,QAAS,CACTC,aAAa,IAEb,8CACA,6BACA,uEACA,6BACA,kBAAC,IAAD,CACI6K,YAAa,uBAAG1O,UAAU,kBAAb,eACb2O,WAAY,uBAAG3O,UAAU,kBAAb,QACZ4O,SAAU,SAACT,GAAD,OAAOT,GAAUS,MAE/B,6BAAS,6BACT,2BAAG,kBAAC,SAAD,CAAQ/L,QAlCvB,WACI3C,EAAY2N,EAAUlQ,IAAIwC,MAAK,SAACmP,GAC5B,IAAMC,EAAcD,EAAajP,KAAK,GAAGyE,OACzCyK,EAAY3N,KAAKkD,GACjB,IAAM0K,EAAgB,CAClB1K,OAAQyK,GAEZrP,EAAe2N,EAAUlQ,GAAI6R,GAAerP,MAAK,SAACC,GAC9CqP,OAAOC,SAASC,gBA0BkBpL,MAAM,SAArC,kBACH,6BAAS,6BACT,2BAAG,kBAAC,SAAD,CAAQ1B,QAxCvB,WACI4M,OAAOC,SAASC,UAuCwBpL,MAAM,SAAnC,eAEP,kBAAC,MAAD,CAAK9D,UAAU,WACV6M,GAAYA,EAASlG,KAAI,SAAAwI,GAAG,OAAI,kBAACjD,EAAD,CAAarF,IAAKsI,EAAIjS,GAAIiP,QAASgD,EAAK9R,SAAUA,OACnF,yBAAK+R,IAAKpC,IACV,yBAAKoC,IAAK9B,IACV,6BAAS,6BAAS,6BAAS,6BAAS,8BAG5C,yBAAKtN,UAAU,gBACf,kBAAC,IAAD,CACoB9C,GAAG,WACHmS,OAAQ1B,GACR3N,UAAU,gBAE1B,kBAAC,MAAD,KACI,kBAAC,MAAD,CAAKiH,EAAG,IACJ,0BAAMqI,SAAUpB,IACZ,kBAAC,MAAD,CAAKjH,EAAG,IACR,2BAAOsI,MAAOzC,EAAW0C,UAAQ,EAACxP,UAAU,WAAW4O,SAAU,SAACT,GAAD,OAAOpB,EAAaoB,EAAEsB,OAAOF,WAE9F,kBAAC,MAAD,CAAKtI,EAAG,GACR,4BAAQvG,KAAK,SAASV,UAAU,8DAA6D,uBAAGA,UAAU,kBAAb,aAKzG,kBAAC,MAAD,KACI,kBAAC,MAAD,CAAKiH,EAAG,EAAGjH,UAAU,gBACjB,kBAAC,QAAD,CACIA,UAAU,eACV9C,GAAG,aACH8O,QAAS,kBAAC,SAAD,CAAQhK,KAAK,SAAShC,UAAU,mBAAhC,eAET,2CACA,6BACA,uIACA,6BAAS,6BACT,2BAAG,kBAAC,SAAD,CAAQoC,QA7G/B,WACIwL,IAAU,GACVnO,EAAa+I,EAAOP,SAASvI,MAAK,SAACuF,GAC/BnH,QAAQC,IAAIkH,GACRA,EAAcrF,KAAKsF,aAAe7H,EAAS0B,SAC3CU,EAAyBwF,EAAcrF,KAAKyF,SAAS3F,MAAK,SAACC,GACvDF,EAAewF,EAAcrF,KAAKyF,SAAS3F,MAAK,SAACgQ,GAC7CjQ,EAAewF,EAAcrF,KAAK+F,QAAS,CAACgK,WAAY1K,EAAcrF,KAAKsF,aAAaxF,MAAK,SAACkQ,GAC1FnC,GAAiB,YAM7BhO,EAAyBwF,EAAcrF,KAAK+F,SAASjG,MAAK,SAACC,GACvDF,EAAewF,EAAcrF,KAAK+F,SAASjG,MAAK,SAACgQ,GAC7CjQ,EAAewF,EAAcrF,KAAKyF,QAAS,CAACsK,WAAY1K,EAAcrF,KAAKiG,aAAanG,MAAK,SAACkQ,GAC1FnC,GAAiB,gBA4FU3J,MAAM,SAAlC,cAGX,kBAAC,MAAD,CAAKmD,EAAG,EAAGjH,UAAU,gBACjB,kBAAC,QAAD,CACIA,UAAU,eACV9C,GAAG,aACH8O,QAAS,kBAAC,SAAD,CAAQhK,KAAK,SAAShC,UAAU,qBAAhC,iBAET,6CACA,6BACA,8FACA,6BAAS,6BACT,2BAAG,kBAAC,SAAD,CAAQoC,QAjG/B,WACI3C,EAAgB+I,EAAOP,SAASvI,MAAK,SAACC,GAClC8N,GAAiB,OA+F4B3J,MAAM,SAApC,kBCvHZ+L,OAvEf,WAEI,MAA4BvR,mBAAS,SAArC,mBAAOkK,EAAP,KAAesH,EAAf,KACA,EAAoCxR,mBAAS,IAA7C,mBAAO4J,EAAP,KAAmB6H,EAAnB,KACA,EAAoCzR,mBAAS,GAA7C,mBAAO0R,EAAP,KAAmBC,EAAnB,KACA,EAAgC3R,mBAAS,CAACW,MAAO,GAC7CC,UAAW,GACXH,SAAU,GACVO,MAAO,GACPF,SAAU,GACVI,YAAa,GACb6E,OAAQ,KANZ,mBAAOhH,EAAP,KAAiBiH,EAAjB,KAQQpH,EAAOsH,cAAPtH,GAyCR,OAvCAgJ,qBAAU,WACNzG,EAAYvC,GAAIwC,MAAK,SAACC,GAClB,IAAMwG,EAAU,CACZlH,MAAOU,EAAIC,KAAK,GAAGX,MACnBC,UAAWS,EAAIC,KAAK,GAAGV,UACvBH,SAAUY,EAAIC,KAAK,GAAGb,SACtBO,MAAOK,EAAIC,KAAK,GAAGN,MACnBF,SAAUO,EAAIC,KAAK,GAAGR,SACtBI,YAAaG,EAAIC,KAAK,GAAGJ,YACzB6E,OAAQ1E,EAAIC,KAAK,GAAGyE,QAExBC,EAAY6B,QAEjB,IA2BC,yBAAKlE,MAAO,CAACiO,UAAW,SACxB,kBAAC,EAAYC,SAAb,CAAsBZ,MAAO,CAAC/G,SAAQN,aAAYC,QA1BtD,SAAiBjL,GACb4S,EAAU5S,GACVuC,EAAavC,EAAG+K,SAASvI,MAAK,SAACC,GAC3B,GAAKtC,EAAS0B,WAAaY,EAAIC,KAAKsF,aAA0C,IAA1BvF,EAAIC,KAAKyK,aAAwB,CAIjF5K,EAAoBvC,EAAG+K,QAHL,CACdoC,cAAc,IAGlB4F,EAAc5J,KAAK+J,MAAsB,IAAhB/J,KAAKgK,gBAE7B,GAAKhT,EAAS0B,WAAaY,EAAIC,KAAKiG,aAA0C,IAA1BlG,EAAIC,KAAK2K,aAAwB,CAItF9K,EAAoBvC,EAAG+K,QAHL,CACdsC,cAAc,IAGlB0F,EAAc5J,KAAK+J,MAAsB,IAAhB/J,KAAKgK,gBAWqBjI,WAN/D,SAAoBiD,GAChB0E,EAAc1E,MAMV,kBAAC,MAAD,CAAKpJ,MAAO,CAACqO,aAAa,QACtB,kBAAC,MAAD,CAAKrJ,EAAG,EAAGD,EAAG,GACV,kBAACgD,EAAD,CAAgBf,QAAS+G,EAAY3S,SAAUA,KAEnD,kBAAC,MAAD,CAAK4J,EAAG,GAAID,EAAG,GACX,kBAACuF,EAAD,CAAUlP,SAAUA,S,wCC2OzBkT,OAtSf,WACE,MAA4BjS,oBAAS,GAArC,mBAAOqP,EAAP,KAAeC,EAAf,KACA,EAAgDtP,mBAAS,IAAzD,mBAAOkS,EAAP,KAAyBC,EAAzB,KACA,EAAkCnS,mBAAS,IAA3C,mBAAOoS,EAAP,KAAkBC,EAAlB,KACA,EAA0BrS,mBAAS,MAAnC,mBAAOgB,EAAP,KAAcsR,EAAd,KACA,EAAgCtS,oBAAS,GAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAgCF,mBAAS,IAAzC,mBAAOwE,EAAP,KAAiB+N,EAAjB,KACA,EAAoCvS,mBAAS,WAA7C,mBAAOiD,EAAP,KAAmBuP,EAAnB,KACA,EAAwCxS,mBAAS,CAAC,KAAlD,mBAAOyS,EAAP,KAAqBC,EAArB,KACA,EAAwB1S,oBAAS,GAAjC,mBAAO2S,EAAP,KAAaC,EAAb,KACA,EAAoD5S,oBAAS,GAA7D,mBAAQ6S,EAAR,KAA2BC,EAA3B,KACQlU,EAAOsH,cAAPtH,GACR,EAAgCoB,mBAAS,CACvCW,MAAO,GACPC,UAAW,GACXH,SAAU,GACVO,MAAO,GACPF,SAAU,GACVI,YAAa,GACb6E,OAAQ,KAPV,mBAAOhH,EAAP,KAAiBiH,GAAjB,KAwCA,SAAS+M,GAAiBC,GACxBN,EAAgB,CAACM,EAASC,OAAOC,SAAUF,EAASC,OAAOE,YA/B7DvL,qBAAU,WACRzG,EAAYvC,GAAIwC,MAAK,SAACC,GACpB,IAAMwG,EAAU,CACdlH,MAAOU,EAAIC,KAAK,GAAGX,MACnBC,UAAWS,EAAIC,KAAK,GAAGV,UACvBH,SAAUY,EAAIC,KAAK,GAAGb,SACtBO,MAAOK,EAAIC,KAAK,GAAGN,MACnBF,SAAUO,EAAIC,KAAK,GAAGR,SACtBI,YAAaG,EAAIC,KAAK,GAAGJ,YACzB6E,OAAQ1E,EAAIC,KAAK,GAAGyE,QAEtBC,GAAY6B,MAEG,OAAb9I,GACFmB,GAAY,GAEKkT,SAASC,eAAe,WAChCC,iBAAiB,SAAS,SAAUC,OAM3CC,UAAUC,YACZD,UAAUC,YAAYC,mBAAmBX,IAEzC3P,MAAQ,kDANT,IAuCH,IAAMuQ,GAAoB,WACxBb,GAAqB,GAErB,IAAIc,KAAW5S,EAAO,CACpB6S,QAAS,GACTC,QAFoB,SAEZC,GAGN,IAAMC,EAAejM,KAAK+J,MAAsB,IAAhB/J,KAAKgK,UAClBvG,EAChBsF,IADgB,iBACFkD,EAAehT,EAAMiT,OACnC7U,IAAI2U,GACIG,GACT,iBACA,SAACC,OACD,SAAC1S,GACCjC,QAAQC,IAAIgC,MAEd,WACE+J,EACGsF,IAAI,UACJsD,MAAMJ,EAAehT,EAAMiT,MAC3BI,iBAEAjT,MAAK,SAAAkT,IAuDlB,SAAwBA,EAAKC,GAC3B,IAAMC,EAAWD,EAAUE,MAAM,KAC3BC,EAAgBF,EAAS,GAAK,YAAcA,EAAS,GACrDG,EAASL,EAAIM,QAAQL,EAAWG,GAChCG,EAAU,CACd5P,SAAUmN,EAAU6B,KACpB1K,gBAAiB2I,EAAiB4C,YAClCC,UAAW,GACXvQ,SAAS,GAAD,OAAKmQ,GACbK,UAAWjW,EAAS0B,SACpBwU,eAAgB,GAChBC,WAAY,GACZC,UAAW,GACXC,aAAc3C,GAEhBtR,EAAa0T,GAASzT,MAAK,SAACiU,GAC1B,IAAMhW,EAASgW,EAAa/T,KAAKgI,IACjCnI,EAAYpC,EAAS0B,UAAUW,MAAK,SAACC,GACnC,IAAMiU,EAAc,CAClBpU,YAAaG,EAAIC,KAAK,GAAGJ,aAE3BoU,EAAYpU,YAAY2B,KAAKxD,GAC7B8B,EAAepC,EAAS0B,SAAU6U,GAClC9V,QAAQC,IAAI,8BA7EJ8V,CAAejB,EAAKtT,EAAMiT,MAC1B1B,EAAY+B,GACZ9U,QAAQC,IAAI,0BAEZ6P,GAAWD,GACXyD,GAAqB,GACrBtD,YAAW,kBAAMoD,GAAQ,KAAO,YAM1CnR,MAlCoB,SAkCd+T,GACJhW,QAAQC,IAAI+V,EAAI3H,aAqEtB,OAEE,yBAAKnM,UAAU,oBAAoBiC,MAAO,CAAEwB,UAAW,SACpDlF,EAAW,kBAAC,IAAD,CAAU4C,MAAI,EAACC,GAAG,MAAS,KACvC,yBAAKpB,UAAU,OACb,yBAAKA,UAAU,uBACb,kBAAC,WAAD,CACE4O,SA/HV,SAA0BiD,GACxB,IAAMU,EAAOV,EAAMpC,OAAOF,MAC1BoB,EAAa,6BAAKD,GAAN,IAAiB6B,KAAMA,MA8H3BA,KAAK,OACLwB,MAAM,gBACN9R,MAAO,CAAEqB,MAAO,WAChBpG,GAAG,iBAIP,yBAAK8C,UAAU,aACb,0BAAMgU,OAAO,KACX,yBAAKhU,UAAU,0BACb,yBAAKA,UAAU,MAAMiC,MAAO,CAAEqB,MAAO,YAEnC,2BACE5C,KAAK,OACLxD,GAAG,UACH0R,SA1JhB,SAA0BT,GACpBA,EAAEsB,OAAOwE,MAAM,IACjBrD,EAASzC,EAAEsB,OAAOwE,MAAM,KAyJZhS,MAAO,CAAEqB,MAAO,aAElB,uBAAGtD,UAAU,kBAAb,eAEF,yBAAKA,UAAU,qBACb,2BACEA,UAAU,qBACVU,KAAK,OACLwT,YAAY,iBACZjS,MAAO,CAAEqB,MAAO,kBAQ5B,yBAAKtD,UAAU,gBAEZ8C,GACC,yBACE9C,UAAU,iBACVgB,IAAK8B,EACLb,MAAO,CAAEkS,SAAU,MAAO5R,OAAQ,WAIxC,yBAAKvC,UAAU,OACb,yBAAKA,UAAU,eACb,kBAAC,WAAD,CACE4O,SAnLV,SAAiCiD,GAC/B,IAAMuC,EAAOvC,EAAMpC,OAAOF,MAC1BkB,EAAoB,6BAAKD,GAAN,IAAwB4C,YAAagB,MAkLhD7B,KAAK,cACLwB,MAAM,oBACN9R,MAAO,CAAEqB,MAAO,aAElB,yBAAKtD,UAAU,yBACb,kBAAC,MAAD,KACE,kBAAC,MAAD,CAAKiH,EAAG,EAAGD,EAAG,IACd,kBAAC,MAAD,CAAKC,EAAG,EAAGD,EAAG,GACZ,kBAAC,IAAD,CACE9J,GAAG,WACHmS,OAAQ1B,EACR3N,UAAU,qBAStB,kBAAC,MAAD,KACE,kBAAC,MAAD,CAAKiH,EAAG,GAAID,EAAG,GAAIhH,UAAU,qBAC7B,kBAAC,YAAD,CACAA,UAAU,oBACVqP,OAAQ8B,EACR7N,MAAM,OACN+Q,UAAU,EACVC,KAAK,QAEL,6BAAS,6BACP,kBAAC,SAAD,CAGEvS,OAAK,EACLC,KAAK,IACL9E,GAAG,cACHkF,QA9MV,WACqB,YAAfb,GAmDJ6P,GAAqB,GAErB,IAAIc,KAAW5S,EAAO,CACpB6S,QAAS,GACTC,QAFoB,SAEZC,GAEN,IAAMC,EAAejM,KAAK+J,MAAsB,IAAhB/J,KAAKgK,UAClBvG,EAChBsF,IADgB,iBACFkD,EAAehT,EAAMiT,OACnC7U,IAAI2U,GACIG,GACT,iBACA,SAACC,OACD,SAAC1S,GACCjC,QAAQC,IAAIgC,MAEd,WACE+J,EACGsF,IAAI,UACJsD,MAAMJ,EAAehT,EAAMiT,MAC3BI,iBACAjT,MAAK,SAACkT,GAELxB,GAAqB,GACrBP,EAAY+B,UAKtB7S,MA3BoB,SA2Bd+T,GACJhW,QAAQC,IAAI+V,EAAI3H,YA/ElB2E,EAAc,WAEdmB,MA0MMhQ,MAAO,CACLC,YAAa,QAGdX,GAGF0P,EAAO,kBAAC,IAAD,CAAU7P,GAAE,mBAAc/D,EAAS0B,YAAiB,O,2BCvSvD,SAASwV,GAAY5R,GAChC,OACI,yBAAKzB,MAAM,8BACP,yBAAKA,MAAM,oCACP,yBAAKlB,UAAU,yBAAyB+C,UAAU,QAAO/B,IAAK2B,EAAMwC,SAASrC,SAAU7B,IAAI,eAE/F,yBAAKC,MAAM,gBACP,0BAAMA,MAAM,cAAcyB,EAAMwC,SAAS5B,UACzC,6BAAMZ,EAAMwC,SAAS0C,mB,oCC0BtB2M,OAhCf,SAAwBC,GACpB,IAAQC,EAAWC,KAAXD,OAEFE,EAAQ,CACVC,EAAG,qCAAU,6BAAV,SACHC,GAAI,6CAkBR,OACA,6BACI,yBAAK9U,UAAU,gBACf,kBAAC,KAAD,CAAQ+U,IAAK,EAAGC,IAAK,GAAIhV,UAAU,iBAAiBiV,aAAcR,EAASS,iBAAkBC,OAlBlF,SAAAxS,GACf,IAAQ4M,EAAyC5M,EAAzC4M,MAAO6F,EAAkCzS,EAAlCyS,SAAUzN,EAAwBhF,EAAxBgF,MAAU0N,EAAnC,aAAiD1S,EAAjD,8BACA,OACI,kBAAC,KAAD,CACA2S,UAAU,oBACVC,QAAO,UAAKhG,EAAL,UACPiG,QAASJ,EACTK,UAAU,MACV5O,IAAKc,GAEL,kBAAC+M,EAAD,eAAQnF,MAAOA,GAAW8F,MAQmFT,MAAOA,EAAOc,cAAe,SAACvH,GAAD,OAAOsG,EAASkB,oBAAoBxH,SCtBlLyH,I,eAAqB,GA6WVC,OA3Wf,WACI,IAAIC,EAAoB,GACxB,EAAgCxX,oBAAS,GAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAwCF,mBAAS,IAAjD,mBAAOyX,EAAP,KAAqBC,EAArB,KACA,EAAsC1X,mBAAS,IAA/C,mBAAO2X,EAAP,KAAoBC,EAApB,KACA,EAAsC5X,oBAAS,GAA/C,mBAAO6X,EAAP,KAAoBC,EAApB,KACA,EAAmD9X,oBAAS,GAA5D,mBAAO+X,EAAP,KAA0BC,EAA1B,KACA,EAAgDhY,oBAAS,GAAzD,mBAAOiY,EAAP,KAAyBC,EAAzB,KACA,EAAsClY,mBAAS,GAA/C,mBAAOmY,EAAP,KAAoBC,EAApB,KACA,EAAoCpY,oBAAS,GAA7C,mBAAOqY,EAAP,KAAmBC,EAAnB,KACA,EAAgDtY,mBAAS,IAAzD,mBAAO4W,EAAP,KAAyBS,EAAzB,KACA,EAAgDrX,mBAAS,IAAzD,mBAAOuY,EAAP,KAAyBC,GAAzB,KACA,GAAgDxY,mBAAS,IAAzD,qBAAOyY,GAAP,MAAyBC,GAAzB,MACA,GAAkD1Y,oBAAS,GAA3D,qBAAO6S,GAAP,MAA0BC,GAA1B,MACA,GAAqB5M,cAAbtH,GAAR,GAAQA,GACFK,GADN,GAAYwH,KAEZ,GAAgCzG,mBAAS,CACrCW,MAAO,GACPC,UAAW,GACXH,SAAU,GACVO,MAAO,GACPF,SAAU,GACVI,YAAa,GACb6E,OAAQ,KAPZ,qBAAOhH,GAAP,MAAiBiH,GAAjB,MAUA4B,qBAAU,WACNzG,EAAYvC,IAAIwC,MAAK,SAACC,GAClB,IAAMwG,EAAU,CACZlH,MAAOU,EAAIC,KAAK,GAAGX,MACnBC,UAAWS,EAAIC,KAAK,GAAGV,UACvBH,SAAUY,EAAIC,KAAK,GAAGb,SACtBO,MAAOK,EAAIC,KAAK,GAAGN,MACnBF,SAAUO,EAAIC,KAAK,GAAGR,SACtBI,YAAaG,EAAIC,KAAK,GAAGJ,YACzB6E,OAAQ1E,EAAIC,KAAK,GAAGyE,QAExBC,GAAY6B,QAEjB,IAGHD,qBAAU,WACNkL,IAAqB,IAEN,uCAAG,4BAAAxS,EAAA,sEACI,IAAIqY,SAAQ,SAACC,EAASC,GACtCrF,UAAUC,YAAYC,mBAAmBkF,EAASC,MAFtC,cACRC,EADQ,yBAIP,CAACA,EAAI7F,OAAOC,SAAU4F,EAAI7F,OAAOE,YAJ1B,2CAAH,qDAMA4F,GAAY3X,MAAK,SAACC,GAC7BF,EAAiBpC,GAAS0B,UAAUW,MAAK,SAAC4X,GACtC,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAkB1X,KAAKC,OAAQ0X,IAAK,CACpD,IAAMC,EAAY,CACd9D,aAAc/T,GAElBF,EAAe6X,EAAkB1X,KAAK2X,GAAG3P,IAAK4P,UAKzC,OAAbna,IACAmB,GAAY,GAEhBiB,IAAkBC,MAAK,SAACC,GAEpB,IAAM8X,EAAoB9X,EAAIC,KAAK8X,QAAO,SAAA3S,GAAI,OACzCA,EAAKuO,YAAcpW,MAGxBuC,EAAYlC,IAAUmC,MAAK,SAACf,GAExB,IADA,IAAM8U,EAAY9U,EAASiB,KAAK6T,UACvBzO,EAAI,EAAGA,EAAIyO,EAAU5T,OAAQmF,IAClC,IAAK,IAAI2S,EAAI,EAAGA,EAAIF,EAAkB5X,OAAQ8X,IACtClE,EAAUzO,KAAOyS,EAAkBE,GAAG/P,MACtC6P,EAAkBG,OAAOD,EAAG,GACK,IAA7BF,EAAkB5X,QAClBuW,GAAe,IAO/B,IAAK,IAAIyB,EAAI,EAAGA,EAAIJ,EAAkB5X,OAAQgY,IACtCJ,EAAkBI,GAAGrE,WAAWsE,SAASva,KACzCka,EAAkBM,QAAQN,EAAkBG,OAAOC,EAAG,GAAG,IAIjEpY,EAAYlC,IAAUmC,MAAK,SAACsY,GAGvB,IAFD,IAAMC,EAAqB,GADa,WAG9BC,GACL,IAAMC,EAAaV,EAAkBS,GAAGxE,aAAa,GAC/C0E,EAAcX,EAAkBS,GAAGxE,aAAa,GAChD2E,EAAUL,EAAYpY,KAAK8T,aAAa,GACxC4E,EAAWN,EAAYpY,KAAK8T,aAAa,GAEhD6E,GAA0BJ,EAAYC,EAAaC,EAASC,GAAU5Y,MAAK,SAAC8Y,GAEpEA,EAAmBtD,IACnBpX,QAAQC,IAAI,QACZka,EAAmB9W,KAAKsW,EAAkBS,KAG9CpK,YAAW,WAC2B,IAA9BmK,EAAmBpY,QACnB/B,QAAQC,IAAIka,GACZ7B,GAAe,KAGfhF,IAAqB,GACrB4E,EAAgBiC,GAChB/B,EAAe+B,EAAmBxB,OAEvC,SAvBDyB,EAAI,EAAGA,EAAIT,EAAkB5X,OAAQqY,IAAM,EAA3CA,cA6BvB,CAAChD,IAGJ,IAAMqD,GAAyB,uCAAG,WAAME,EAAKC,EAAKC,EAAKC,GAArB,QAAAha,EAAA,aAAAA,EAAA,6DACtB,KACJia,EAAOC,GAAQH,EAAKF,GACpBM,EAAOD,GAAQF,EAAKF,GACpB9Z,EACFyH,KAAK2S,IAAIH,EAAK,GAAKxS,KAAK2S,IAAIH,EAAK,GACjCxS,KAAK4S,IAAIH,GAAQL,IAASpS,KAAK4S,IAAIH,GAAQH,IAC3CtS,KAAK2S,IAAID,EAAK,GAAK1S,KAAK2S,IAAID,EAAK,GAE/BG,EAAI,EAAI7S,KAAK8S,MAAM9S,KAAK+S,KAAKxa,GAAIyH,KAAK+S,KAAK,EAAExa,IAC7Cya,EATI,KASIH,EAVkB,kBAWtBG,EAAI,UAXkB,2CAAH,4DAc/B,SAASP,GAAQQ,GACb,OAAOA,GAAOjT,KAAKkT,GAAG,KAI1BrT,qBAAU,YACqB,IAAvB0P,KACIa,IAAgBV,EAAalW,OAC7BuW,GAAe,GAGfF,EAAeH,EAAaU,OAGrC,CAACA,IAiEJ,IAAMhU,GAAI+W,aAAe,GACnBC,GAAaC,aACfjX,GACA,EAAE,IAAK,EAAG,KACV,CAAC,UAAW,UAAW,YAG3B,SAASkX,GAAgBlX,EAAGrC,GACC,IAApB0V,EAA2BrT,GAzDhCmT,IAAqB,EAErBnW,EAAYlC,IAAUmC,MAAK,SAACka,GACxB,IAAMC,EAAkB,CACpBpG,UAAWmG,EAAiBha,KAAK6T,UACjCD,WAAYoG,EAAiBha,KAAK4T,YAEtCqG,EAAgBpG,UAAUtS,KAAK8U,EAAYrO,KAC3CiS,EAAgBrG,WAAWrS,KAAK8U,EAAYrO,KAC5CnI,EAAelC,GAAUsc,GAAiBna,MAAK,SAACC,GAC5CF,EAAYwW,EAAYrO,KAAKlI,MAAK,SAACoa,GAC/Bhc,QAAQC,IAAI+b,GACZ,IAAMC,EAAmB,CACrBxG,eAAgBuG,EAAoBla,KAAK2T,gBAE7CwG,EAAiBxG,eAAepS,KAAK5D,IACrCkC,EAAewW,EAAYrO,IAAKmS,GAAkBra,MAAK,SAACC,GAEpD,IAAK,IAAIqF,EAAI,EAAGA,EAAI4U,EAAiBha,KAAK2T,eAAe1T,OAAQmF,IAC7D,GAAI4U,EAAiBha,KAAK2T,eAAevO,KAAOiR,EAAYrO,IAAK,CAC7DgP,GAAc,GACdE,GAAoB8C,EAAiBha,KAAKkD,UAC1CkU,GAAoBf,EAAYnT,UAChC,IAAMjF,EAAY,CACdwH,QAAS9H,GACT2H,WAAY7H,GAAS0B,SACrBwG,WAAYqU,EAAiBha,KAAKkD,SAClC2C,UAAWmU,EAAiBha,KAAK2D,SACjCoC,QAASsQ,EAAYrO,IACrB/B,WAAYiU,EAAoBla,KAAK0T,UACrCvN,WAAY+T,EAAoBla,KAAKkD,SACrCmD,UAAW6T,EAAoBla,KAAK2D,SACpCyW,WAAW,GAEfva,EAAc5B,GAAW6B,MAAK,SAACua,OAIvCvD,EAAeD,EAAc,eAqBzCH,GAAqB,GACrBxI,YAAW,WACPwI,GAAqB,KACpB,MAGCR,EAAoB,EAAKrT,IA9EnCmT,IAAqB,EACrBnW,EAAYlC,IAAUmC,MAAK,SAACC,GACxB,IAAMka,EAAkB,CACpBpG,UAAW9T,EAAIC,KAAK6T,WAExBoG,EAAgBpG,UAAUtS,KAAK8U,EAAYrO,KAC3CnI,EAAelC,GAAUsc,GAAiBna,MAAK,SAACC,GAC5C+W,EAAeD,EAAc,SAyEjCD,GAAoB,GACpB1I,YAAW,WACP0I,GAAoB,KACnB,MAIb,OACI,yBAAKvU,MAAO,CAACiO,UAAW,SAClB3R,EAAY,kBAAC,IAAD,CAAU4C,MAAI,EAACC,GAAG,MAAU,KAC1C,yBAAKpB,UAAU,yBAAyBiC,MAAO,CAAEwB,UAAW,SACxD,kBAAC,MAAD,KACI,kBAAC,MAAD,CAAKuD,EAAG,EAAGkT,EAAG,IACd,kBAAC,MAAD,CAAKjT,EAAG,GAAID,EAAG,EAAGkT,EAAG,GACjB,kBAACja,EAAA,EAAOqC,IAAR,CAAYL,MAAO,CAAEwX,eAAczZ,UAAU,kBACzC,kBAACC,EAAA,EAAOqC,IAAR,CACA6X,KAAK,IACLC,gBAAiB,CAAEC,KAAM,EAAGC,MAAO,GACnCrY,MAAO,CAAEQ,MACT8X,YACI,SAAC1I,EAAO2I,GAAR,OAAiB1E,EAAqB0E,EAAKC,MAAMhY,GAErDiY,UACI,SAAC7I,EAAO2I,GAAR,OAAiBb,GAAgBa,EAAKC,MAAMhY,EAAG+X,EAAKC,MAAMra,KAG1D,kBAAC,MAAD,KACI,kBAAC,MAAD,CAAK6G,EAAG,IACJ,kBAACsN,GAAD,CAAapP,SAAU8Q,SAO3C,kBAAC,MAAD,CAAKjP,EAAG,EAAGkT,EAAG,KAElB,kBAAC,MAAD,KACI,kBAAC,MAAD,CAAKjT,EAAG,EAAGD,EAAG,EAAGkT,EAAG,MACpB,kBAAC,MAAD,CAAKjT,EAAG,GACR,kBAAC,YAAD,CACIjH,UAAU,oBACVqP,OAAQ8B,GACR7N,MAAM,OACN+Q,UAAU,EACVC,KAAK,SAGT,kBAAC,MAAD,CAAKrN,EAAG,KAEZ,kBAAC,MAAD,KACI,kBAAC,MAAD,CAAKD,EAAG,EAAGkT,EAAG,EAAGS,GAAI,IACrB,kBAAC,MAAD,CAAK1T,EAAG,GAAID,EAAG,EAAGkT,EAAG,EAAGS,GAAI,GACxB,wBAAI1Y,MAAO,CAAEqB,MAAO,YAApB,iBAEJ,kBAAC,MAAD,CAAK0D,EAAG,EAAGkT,EAAG,EAAGS,GAAI,KAEzB,kBAAC,MAAD,KACI,kBAAC,MAAD,CAAK3T,EAAG,EAAGkT,EAAG,IACd,kBAAC,MAAD,CAAKjT,EAAG,GAAID,EAAG,EAAGkT,EAAG,GACjB,kBAAC,GAAD,CAAgBvE,oBAlFpC,SAA8BxH,GAC1BwH,EAAoBxH,IAiFuD+G,iBAAkBA,KAEjF,kBAAC,MAAD,CAAKlO,EAAG,EAAGkT,EAAG,KAElB,kBAAC,MAAD,CAAKjY,MAAO,CAACM,OAAQ,UACjB,kBAAC,MAAD,CAAKyE,EAAG,EAAGkT,EAAG,IACd,kBAAC,MAAD,CAAKjT,EAAG,GAAID,EAAG,EAAGkT,EAAG,GAEhB7D,EAAsB,kBAACpW,EAAA,EAAOW,IAAR,CACnBZ,UAAU,aACVgB,IAAI,+BACJb,QAAS,CAAEya,OAAQ,KACnBra,WAAY,CAAEE,SAAU,MAClB,KACR8V,EAAqB,kBAACtW,EAAA,EAAOW,IAAR,CACnBZ,UAAU,aACVgB,IAAI,yBACJT,WAAY,CAAEE,SAAU,MAClB,MAEd,kBAAC,MAAD,CAAKuG,EAAG,EAAGkT,EAAG,MAMtB,kBAAC,QAAD,CACIxW,KAAMyS,EACNnW,UAAU,qBACV2D,QAAS,GACTC,QAAS,CACLC,aAAa,IAGjB,wDACA,6BACA,8FACA,6BAAS,6BACT,uBAAGL,KAAI,mBAAcnG,GAAS0B,WAAY,kBAAC,SAAD,CAAQ7B,GAAG,YAAX,uBAC1C,8BAIJ,kBAAC,QAAD,CACIwG,KAAMiT,EACN3W,UAAU,eACV2D,QAAS,GACTC,QAAS,CACLC,aAAa,IAGjB,wBAAI7D,UAAU,SAAd,iBACA,yBAAKgB,IAAK6V,EAAkB7W,UAAU,uBAAuBiB,IAAI,cACjE,yBAAKD,IAAK+V,GAAkB/W,UAAU,uBAAuBiB,IAAI,eACjE,6BACA,4EACA,6BAAS,6BACT,uBAAGuC,KAAI,gBAAWnG,GAAS0B,WAAY,kBAAC,SAAD,CAAQ7B,GAAG,YAAX,cACvC,6BAAS,6BACT,2BAAG,kBAAC,SAAD,CAAQA,GAAG,WAAW4G,MAAM,SAA5B,aACH,gC,UC3GD+W,I,OA9PM,SAAClY,GACtB,MAAgCrE,oBAAS,GAAzC,mBAAQ2K,EAAR,KAAiBb,EAAjB,KACA,EAAkC9J,oBAAS,GAA3C,mBAAQC,EAAR,KAAkBC,EAAlB,KACA,EAAgCF,mBAAS,IAAzC,mBAAOjB,EAAP,KAAiBiH,EAAjB,KACA,EAAoChG,oBAAS,GAA7C,mBAAOwc,EAAP,KAAmBC,EAAnB,KACA,EAAoDzc,oBAAS,GAA7D,mBAAQ0c,EAAR,KAA2BC,EAA3B,KACQC,EAAaC,cAAbD,SACFE,EAAUF,EAASnI,MAAM,KACzB7V,EAAKke,EAAQA,EAAQvb,OAAS,GA8CpC,SAASwb,IACL,IAAIC,EAAY,EACZje,GACAoC,EAAmBpC,EAAS0B,UAAUW,MAAK,SAACf,GACxC,IAAK,IAAIqG,EAAI,EAAGA,EAAIrG,EAASiB,KAAKC,OAAQmF,KACjCrG,EAASiB,KAAKoF,GAAGE,aAAe7H,EAAS0B,WAAgD,IAAlCJ,EAASiB,KAAKoF,GAAGqF,cAGnE1L,EAASiB,KAAKoF,GAAGa,aAAexI,EAAS0B,WAAgD,IAAlCJ,EAASiB,KAAKoF,GAAGuF,eAF9E+Q,IAOJlT,EADc,IAAdkT,MAUd,OAlEFpV,qBAAU,WACNmV,IACAE,aAAY,WACRF,MACD,OACJ,CAAChe,IAEJ6I,qBAAU,WACW,SAAfkV,EAAQ,GACVL,GAAc,GAGdA,GAAc,GAGdE,EADe,MAAbC,KAMH,CAACA,IAEJhV,qBAAU,WACJhJ,GACFuC,EAAYvC,GAAIwC,MAAK,SAACC,GACpB,GAAwB,IAApBA,EAAIC,KAAKC,OACXrB,GAAY,OAET,CACH,IAAM2H,EAAU,CACZlH,MAAOU,EAAIC,KAAK,GAAGX,MACnBC,UAAWS,EAAIC,KAAK,GAAGV,UACvBH,SAAUY,EAAIC,KAAK,GAAGb,SACtBO,MAAOK,EAAIC,KAAK,GAAGN,MACnBF,SAAUO,EAAIC,KAAK,GAAGR,SACtBI,YAAaG,EAAIC,KAAK,GAAGJ,YACzB6E,OAAQ1E,EAAIC,KAAK,GAAGyE,QAExBC,EAAY6B,SAIjB,CAAC+U,KAwBwB,IAAtBF,EAEA,6BACGzc,EAAW,kBAAC,IAAD,CAAU4C,MAAI,EAACC,GAAG,MAAS,KACzC,kBAAC,SAAD,CACAoa,WAAW,QACXC,MACE,uBAAGzb,UAAU,aAAawD,KAAK,KAC7B,yBAAKxC,IAAI,yCAAyCuB,OAAO,MAAMtB,IAAI,kBAGvEya,gBAAc,EACd1b,UAAU,+BACV9C,GAAG,aACHye,SACE1S,EACE,kBAAC2S,GAAA,EAAD,CAAOC,QAAQ,MAAMvY,MAAM,YAAYtD,UAAU,aAC/C,kBAAC,OAAD,CAAMA,UAAU,YAAhB,SAGF,kBAAC4b,GAAA,EAAD,CAAOtY,MAAM,YAAYtD,UAAU,aACjC,kBAAC,OAAD,CAAMA,UAAU,YAAhB,SAIN4D,QAAS,CACPb,WAAW,EACX+Y,KAAM,QACNC,WAAY,IACZC,WAAY,KACZ9S,aAAc,KACd+S,UAAW,KACXC,YAAa,KACbC,YAAa,IACbC,kBAAkB,OAQA,IAAftB,EAEL,6BACGvc,EAAW,kBAAC,IAAD,CAAU4C,MAAI,EAACC,GAAG,MAAS,KACzC,kBAAC,SAAD,CACAoa,WAAW,QACXC,MACE,uBAAGzb,UAAU,aAAawD,KAAK,KAC7B,yBAAKxC,IAAI,yCAAyCuB,OAAO,MAAMtB,IAAI,kBAGvE6Z,YAAU,EACVY,gBAAc,EACd1b,UAAU,+BACV9C,GAAG,aACHye,SACE1S,EACE,kBAAC2S,GAAA,EAAD,CAAOC,QAAQ,MAAMvY,MAAM,YAAYtD,UAAU,aAC/C,kBAAC,OAAD,CAAMA,UAAU,YAAhB,SAGF,kBAAC4b,GAAA,EAAD,CAAOtY,MAAM,YAAYtD,UAAU,aACjC,kBAAC,OAAD,CAAMA,UAAU,YAAhB,SAIN4D,QAAS,CACPb,WAAW,EACX+Y,KAAM,QACNC,WAAY,IACZC,WAAY,KACZ9S,aAAc,KACd+S,UAAW,KACXC,YAAa,KACbC,YAAa,IACbC,kBAAkB,IAGpB,kBAAC,UAAD,CACEC,QAAQ,WACR7Y,KAAI,sBAAiBnG,EAAS0B,UAC9BiB,UAAU,UACVsc,WAAS,WACTta,KAAK,UAEL,kBAAC,OAAD,CAAMqa,QAAQ,WAAWra,KAAK,UAA9B,eAIF,kBAAC,UAAD,CAASwB,KAAI,mBAAcnG,EAAS0B,UAAYiB,UAAU,WACxD,kBAAC,OAAD,gBAEF,kBAAC,UAAD,CAASwD,KAAI,gBAAWnG,EAAS0B,UAAYiB,UAAU,mBACpDiJ,EACC,kBAAC2S,GAAA,EAAD,CAAOC,QAAQ,MAAMvY,MAAM,YAAYtD,UAAU,aAC/C,kBAAC,OAAD,CAAMA,UAAU,YAAhB,kBAGF,kBAAC4b,GAAA,EAAD,CAAOtY,MAAM,YAAYtD,UAAU,aACjC,kBAAC,OAAD,CAAMA,UAAU,YAAhB,qBAUN,6BACGzB,EAAW,kBAAC,IAAD,CAAU4C,MAAI,EAACC,GAAG,MAAS,KAC3C,kBAAC,SAAD,CACEoa,WAAW,QACXC,MACE,uBAAGzb,UAAU,aAAawD,KAAK,KAC7B,yBAAKxC,IAAI,0CAA0CuB,OAAO,MAAMtB,IAAI,kBAGxEya,gBAAc,EACd1b,UAAU,+BACV9C,GAAG,aACHye,SACE1S,EACE,kBAAC2S,GAAA,EAAD,CAAOC,QAAQ,MAAMvY,MAAM,YAAYtD,UAAU,aAC/C,kBAAC,OAAD,CAAMA,UAAU,YAAhB,SAGF,kBAAC4b,GAAA,EAAD,CAAOtY,MAAM,YAAYtD,UAAU,aACjC,kBAAC,OAAD,CAAMA,UAAU,YAAhB,SAIN4D,QAAS,CACPb,WAAW,EACX+Y,KAAM,QACNC,WAAY,IACZC,WAAY,KACZ9S,aAAc,KACd+S,UAAW,KACXC,YAAa,KACbC,YAAa,IACbC,kBAAkB,IAGpB,kBAAC,UAAD,CACEC,QAAQ,WACR7Y,KAAI,sBAAiBnG,EAAS0B,UAC9BiB,UAAU,UACVsc,WAAS,WACTta,KAAK,UAEL,kBAAC,OAAD,CAAMqa,QAAQ,WAAWra,KAAK,UAA9B,eAIF,kBAAC,UAAD,CAASwB,KAAI,mBAAcnG,EAAS0B,UAAYiB,UAAU,WACxD,kBAAC,OAAD,gBAEF,kBAAC,UAAD,CAASwD,KAAI,gBAAWnG,EAAS0B,UAAYiB,UAAU,mBACpDiJ,EACC,kBAAC2S,GAAA,EAAD,CAAOC,QAAQ,MAAMvY,MAAM,YAAYtD,UAAU,aAC/C,kBAAC,OAAD,CAAMA,UAAU,YAAhB,kBAGF,kBAAC4b,GAAA,EAAD,CAAOtY,MAAM,YAAYtD,UAAU,aACjC,kBAAC,OAAD,CAAMA,UAAU,YAAhB,uBC5OGuc,I,OAVM,SAAC5Z,GACpB,OACE,yBAAK3C,UAAU,uBACb,kBAAC,SAAD,CACAwc,WAAW,yB,OC+KFC,OAzKf,WACE,IAAQvB,EAAaC,cAAbD,SACFE,EAAUF,EAASnI,MAAM,KACzB7V,EAAKke,EAAQA,EAAQvb,OAAS,GACpC,EAA0CvB,oBAAS,GAAnD,mBAAOoe,EAAP,KAAsBC,EAAtB,KACA,EAA4Cre,oBAAS,GAArD,mBAAOse,EAAP,KAAuBC,EAAvB,KACA,EAAoCve,mBAAS,IAA7C,mBAAOwe,EAAP,KAAmBC,EAAnB,KACA,EAA8Bze,mBAAS,IAAvC,mBAAO0e,EAAP,KAAgBC,EAAhB,KACA,EAAgD3e,mBAAS,IAAzD,mBAAOuY,EAAP,KAAyBC,EAAzB,KACA,EAAgDxY,mBAAS,IAAzD,mBAAOyY,EAAP,KAAyBC,EAAzB,KACA,EAA0C1Y,oBAAS,GAAnD,mBAAOkP,EAAP,KAAsBC,EAAtB,KACA,EAA4BnP,mBAAS,GAArC,mBAAO+F,EAAP,KAAeqJ,EAAf,KACA,EAAkDpP,mBAAS,IAA3D,mBAAO4e,EAAP,KAA0BC,EAA1B,KACA,GAA8C7e,mBAAS,qBAAvD,qBAAO8e,GAAP,MAAwBC,GAAxB,MAsFA,OAnFA9B,aAAY,WACNre,GACFuC,EAAiBvC,GAAIwC,MAAK,SAACf,GACzB,IAAK,IAAIqG,EAAI,EAAGA,EAAIrG,EAASiB,KAAKC,OAAQmF,IACJ,UAAhCrG,EAASiB,KAAKoF,GAAG2K,aACnBwN,EAAqBxe,EAASiB,KAAKoF,GAAG2K,YACtCoN,EAAcpe,EAASiB,KAAKoF,GAAGlC,UAC/Bma,EAAWte,EAASiB,KAAKoF,GAAG4C,KAC5B+U,GAAiB,SAKxB,KAEHpB,aAAY,WACNre,GACFuC,EAAmBvC,GAAIwC,MAAK,SAACf,GAEzB,IAFuC,IAAD,WAE7BqG,GACL,GAAKrG,EAASiB,KAAKoF,GAAGa,YAAc3I,IAAuC,IAA/ByB,EAASiB,KAAKoF,GAAGgV,UAAsB,CAI/Eva,EAAoBd,EAASiB,KAAKoF,GAAG4C,IAHnB,CACdoS,WAAW,IAEsCta,MAAK,SAAC4d,GACvDT,GAAkB,GAClB/F,EAAoBnY,EAASiB,KAAKoF,GAAGO,YACrCyR,EAAoBrY,EAASiB,KAAKoF,GAAGe,iBARxCf,EAAI,EAAGA,EAAIrG,EAASiB,KAAKC,OAAQmF,IAAM,EAAvCA,QAcd,KAgCHkB,qBAAU,WACS,MAAbgV,EACFmC,GAAmB,qBAEG,YAAfjC,EAAQ,GACfiC,GAAmB,qBAEG,SAAfjC,EAAQ,GACfiC,GAAmB,kBAEG,eAAfjC,EAAQ,GACfiC,GAAmB,wBAEG,aAAfjC,EAAQ,IACfiC,GAAmB,uBAEpB,CAACnC,IAGF,yBAAKlb,UAAWod,IACd,kBAAC,GAAD,MACA,kBAAC,IAAD,CAAOG,OAAK,EAACC,KAAK,IAAIC,UAAWpf,IACjC,kBAAC,IAAD,CAAOmf,KAAK,eAAeC,UAAWxZ,IACtC,kBAAC,IAAD,CAAOsZ,OAAK,EAACC,KAAK,kBAAkBC,UAAWC,KAC/C,kBAAC,IAAD,CAAOH,OAAK,EAACC,KAAK,sBAAsBC,UAAW5H,KACnD,kBAAC,IAAD,CAAO0H,OAAK,EAACC,KAAK,YAAYC,UAAWE,KACzC,kBAAC,IAAD,CAAOJ,OAAK,EAACC,KAAK,aAAaC,UAAWpf,IACzC2Q,OAAOC,SAASiM,SAASpD,SAAS,UAAY,KAAO,kBAAC,GAAD,MAEtD,kBAAC,QAAD,CACEpU,KAAMgZ,EACN1c,UAAU,eACV2D,QAAS,GACTC,QAAS,CACPC,aAAa,IAEf,yCACA,yBAAK7C,IAAK8b,EAAY9c,UAAU,yBAChC,6BACA,mGACA,wFACA,uFACA,6BACA,2BAAG,kBAAC,SAAD,CAAQ9C,GAAG,WAAWkF,QAzE/B,WACE3C,EAAeud,GAAStd,MAAK,SAACC,GAC5B8N,GAAiB,OAuE+B3J,MAAM,SAAjD,YACH,6BAAS,6BACT,2BAAG,kBAAC,SAAD,CAAQ5G,GAAG,WAAWkF,QArE/B,WAIE3C,EAAeud,EAHK,CAClBrN,YAAY,IAEuBjQ,MAAK,SAACC,GACzC8N,GAAiB,OAgE6B3J,MAAM,SAA/C,UAGL,kBAAC,QAAD,CACEJ,KAAMkZ,EACN5c,UAAU,gBAEV,yCACA,qDACA,yBAAKgB,IAAK6V,EAAkB7W,UAAU,yBACtC,yBAAKgB,IAAK+V,EAAkB/W,UAAU,yBACtC,6BACA,sEACA,8BAIF,kBAAC,QAAD,CACI0D,KAAM8J,EACNxN,UAAU,eACV2D,QAAS,GACTC,QAAS,CACTC,aAAa,IAEb,sDACA,6BACA,uEACA,6BACA,kBAAC,IAAD,CACI6K,YAAa,uBAAG1O,UAAU,kBAAb,eACb2O,WAAY,uBAAG3O,UAAU,kBAAb,QACZ4O,SAAU,SAACT,GAAD,OAAOT,EAAUS,MAE/B,6BAAS,6BACT,2BAAG,kBAAC,SAAD,CAAQjR,GAAG,WAAWkF,QA9FjC,WACE3C,EAAYyd,GAAmBxd,MAAK,SAACC,GACnC7B,QAAQC,IAAI4B,EAAIC,KAAK,GAAGyE,QACxB,IAAMyK,EAAcnP,EAAIC,KAAK,GAAGyE,OAChCyK,EAAY3N,KAAKkD,GAIjB5E,EAAeyd,EAHO,CAClB7Y,OAAQyK,IAEqCpP,MAAK,SAACC,GACnDqP,OAAOC,SAASC,gBAqFgCpL,MAAM,SAAnD,kBACH,6BAAS,6BACT,2BAAG,kBAAC,SAAD,CAAQ5G,GAAG,WAAW4G,MAAM,SAA5B,iBCvKP8Z,GAAcC,QACW,cAA7B7O,OAAOC,SAAS6O,UAEe,UAA7B9O,OAAOC,SAAS6O,UAEhB9O,OAAOC,SAAS6O,SAAS7R,MACvB,2DA6BN,SAAS8R,GAAgBC,GACvBlM,UAAUmM,cACPC,SAASF,GACTte,MAAK,SAAAye,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACtCD,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBG,QACf1M,UAAUmM,cAAcQ,WAK1B3gB,QAAQC,IAAI,6CAKZD,QAAQC,IAAI,4CAMrB+B,OAAM,SAAAC,GACLjC,QAAQiC,MAAM,4CAA6CA,M,cC7DjE2e,IAAS7c,OAAO,kBAAC,IAAM8c,WAAP,KACZ,kBAAC,IAAD,KACE,kBAAC,GAAD,QAEejN,SAASC,eAAe,SDO9B,WACb,GAA6C,kBAAmBG,UAAW,CAGzE,GADkB,IAAI8M,IAAItd,GAAwB0N,OAAOC,UAC3C4P,SAAW7P,OAAOC,SAAS4P,OAIvC,OAGF7P,OAAO4C,iBAAiB,QAAQ,WAC9B,IAAMoM,EAAK,UAAM1c,GAAN,sBAENsc,GAwCX,SAAiCI,GAE/Bc,MAAMd,GACHte,MAAK,SAAAf,GAGkB,MAApBA,EAASogB,SACuD,IAAhEpgB,EAASqgB,QAAQ5hB,IAAI,gBAAgB6hB,QAAQ,cAG7CnN,UAAUmM,cAAciB,MAAMxf,MAAK,SAAAye,GACjCA,EAAagB,aAAazf,MAAK,WAC7BsP,OAAOC,SAASC,eAKpB6O,GAAgBC,MAGnBle,OAAM,WACLhC,QAAQC,IACN,oEAzDAqhB,CAAwBpB,GAHxBD,GAAgBC,OCtBxBqB,K","file":"static/js/main.988aaf1b.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nexport default {\r\n  getUser: function(id) {\r\n    return axios.get(\"/api/users/\" + id);\r\n  },\r\n\r\n  saveUser: function(userData) {\r\n    return axios.post(\"/api/users\", userData);\r\n  },\r\n\r\n  saveItem: function(itemData) {\r\n    return axios.post(\"/api/items\", itemData)\r\n  },\r\n\r\n  getUserItems: function(userID) {\r\n    return axios.get(\"/api/items/user/\" + userID)\r\n  },\r\n\r\n  getAllItems: function() {\r\n    return axios.get(\"/api/items/\")\r\n  },\r\n\r\n  updateUser: function(userId, userData) {\r\n    return axios.put(\"/api/users/\" + userId, userData)\r\n  },\r\n\r\n  updateItem: function(itemId, itemData) {\r\n    return axios.put(\"/api/items/\" + itemId, itemData)\r\n  },\r\n\r\n  getItem: function(itemId) {\r\n    return axios.put(\"/api/items/\" + itemId)\r\n  },\r\n\r\n  getAllMatches: function() {\r\n    return axios.get(\"/api/matches/\")\r\n  },\r\n\r\n  postMatch: function(matchInfo) {\r\n    return axios.post(\"/api/matches\", matchInfo)\r\n  },\r\n\r\n  getUserMatches: function(id) {\r\n    return axios.get(\"/api/matches/user/\" + id)\r\n  },\r\n\r\n  updateUserMatch: function(id, matchData) {\r\n    return axios.put(\"/api/matches/\" + id, matchData)\r\n  },\r\n\r\n  handleUseItem: function(id) {\r\n    console.log(id)\r\n    localStorage.setItem('itemData', JSON.stringify(id))\r\n  },\r\n\r\n  getMatch: function(id) {\r\n    return axios.get(\"/api/matches/\" + id)\r\n  },\r\n\r\n  deleteMatchesForItem: function(id) {\r\n    return axios.delete(\"/api/matches/all/\" + id)\r\n  },\r\n\r\n  deleteItem: function(id) {\r\n    return axios.delete(\"/api/items/\" + id)\r\n  },\r\n\r\n  deleteMatch: function(id) {\r\n    return axios.delete(\"/api/matches/\" + id)\r\n  }, \r\n\r\n  getAllCloseItems: function(coordinates) {\r\n    return axios.get(\"/api/items/location/\" + coordinates)\r\n  }\r\n  \r\n\r\n};\r\n","import React, { useState } from \"react\";\r\nimport API from \"../utils/API\";\r\nimport GoogleLogin from \"react-google-login\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport \"materialize-css\";\r\n// import \"./style.css\";\r\nimport \"./welcomeStyle.css\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Button } from \"react-materialize\";\r\n\r\nfunction Welcome() {\r\n\r\nconst googleClientId = process.env.REACT_APP_GOOGLE_CLIENT_ID;\r\nconst [redirect, setRedirect] = useState(false);\r\nconst [userID, setUserID] = useState('')\r\n\r\nconst googleSuccess = async (response) => {\r\n    const userObj = response.profileObj\r\n    setUserID(userObj.googleId)\r\n    const user = {\r\n        email: userObj.email,\r\n        firstName: userObj.givenName,\r\n        lastName: userObj.familyName,\r\n        image: userObj.imageUrl,\r\n        googleId: userObj.googleId,\r\n        listedItems: []\r\n    }\r\n    API.getUser(userObj.googleId).then(res => {\r\n        if (res.data.length > 0) {\r\n            setRedirect(true)\r\n        }\r\n        else {\r\n            API.saveUser(user)\r\n            setRedirect(true)\r\n        }\r\n    }).catch(error => console.log(error))\r\n\r\n}\r\n\r\nconst googleFailure = (response) => {\r\nconsole.log(\"Google Sign in was unsuccessful\");\r\nalert(\"please try logging in again\");\r\nconsole.log(response);\r\n};\r\n\r\nreturn (\r\n  <div className=\"welcomeBackground\">\r\n    <div className=\"hero-image\">\r\n      <div className=\"container center\">\r\n        <div className=\"row opening\">\r\n          <motion.h1\r\n            animate={{ y: 0, opacity: 1 }}\r\n            initial={{ y: -250, opacity: 0 }}\r\n            transition={{\r\n              delay: 0.5,\r\n              duration: 1,\r\n              type: \"spring\",\r\n              stiffness: 150,\r\n            }}\r\n          >\r\n            Recycle your life!\r\n          </motion.h1>\r\n        </div>\r\n        <div className=\"row\">\r\n          <motion.img\r\n            animate={{ rotateZ: 1080, opacity: 1, scale: 1 }}\r\n            initial={{ opacity: 0, scale: 0 }}\r\n            transition={{ delay: 0.2, duration: 1.8 }}\r\n            whileHover={{ rotateZ: 180 }}\r\n            src=\"./../img/swapifyLogo-S-vector.png\"\r\n            alt=\"Swapify S Logo\"\r\n            class=\"responsive-img\"\r\n          />\r\n          {/* <motion.img\r\n                      animate={{ x: 0, opacity: 1 }}\r\n                      initial={{ opacity: 0 }}\r\n                      transition={{ delay: 2.5, duration: 0.5 }}\r\n                      src=\"./../img/wapifyLogoCenter-vector.png\"\r\n                      alt=\"Swapify Logo\"\r\n                      class=\"responsive-img\"\r\n                  /> */}\r\n        </div>\r\n\r\n        <div className=\"row login\">\r\n          {redirect ? <Redirect push to={`/profile/${userID}`} /> : null}\r\n          <GoogleLogin\r\n            className=\"loginBtn\"\r\n            clientId={googleClientId}\r\n            buttonText=\"Get Swapp'n!\"\r\n            onSuccess={googleSuccess}\r\n            onFailure={googleFailure}\r\n            cookiePolicy={\"single_host_origin\"}\r\n            isSignedIn={false}\r\n            render={(renderProps) => (\r\n              <motion.a\r\n                animate={{ opacity: 1 }}\r\n                initial={{ opacity: 0, scale: 0 }}\r\n                transition={{ delay: 2, duration: 1 }}\r\n              >\r\n                <Button\r\n                  large\r\n                  className=\"loginBtn z-depth-3\"\r\n                  node=\"a\"\r\n                  style={{\r\n                    marginRight: \"5px\",\r\n                  }}\r\n                  waves=\"light\"\r\n                  onClick={renderProps.onClick}\r\n                >\r\n                  Start Swap'n!\r\n                </Button>\r\n              </motion.a>\r\n            )}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n\r\n\r\n    <div className=\"container center \">\r\n      <div className=\"row howTo\">\r\n        <motion.h2\r\n          animate={{ opacity: 1 }}\r\n          initial={{ opacity: 0 }}\r\n          transition={{ delay: 2.5, duration: 2 }}\r\n        >\r\n          How Swapify works:{\" \"}\r\n        </motion.h2>\r\n      </div>\r\n      <motion.div\r\n        className=\"row howToRow\"\r\n        animate={{ opacity: 1 }}\r\n        initial={{ opacity: 0 }}\r\n        transition={{ delay: 2.5, duration: 2 }}\r\n        whileHover={{}}\r\n      >\r\n        <motion.div\r\n          animate={{ opacity: 1 }}\r\n          initial={{ opacity: 0 }}\r\n          // transition={{ delay: 3, duration: 2 }}\r\n          whileHover={{\r\n            scale: 1.2,\r\n          }}\r\n          className=\"row\"\r\n        >\r\n          <div className=\"col l4 s12 center symbol1\">\r\n            <motion.img\r\n              src=\"./../img/profileSymbol.png\"\r\n              alt=\"Swapify Logo\"\r\n              height=\"100px\"\r\n            />\r\n          </div>\r\n          <div className=\"col l6 s12 center\">\r\n            <motion.h4\r\n              animate={{ opacity: 1, x: 0 }}\r\n              initial={{ opacity: 0, x: 1000 }}\r\n              transition={{ delay: 3, duration: 1 }}\r\n              className=\"how1\"\r\n            >\r\n              Sign into your Profile\r\n            </motion.h4>\r\n          </div>\r\n        </motion.div>\r\n        <motion.div\r\n          animate={{ opacity: 1 }}\r\n          initial={{ opacity: 0 }}\r\n          // transition={{ delay: 3, duration: 2 }}\r\n          whileHover={{\r\n            scale: 1.2,\r\n          }}\r\n          className=\"row\"\r\n        >\r\n          <div className=\"col l4 s12 center symbol2\">\r\n            <motion.img\r\n              src=\"./../img/addItemSymbol.png\"\r\n              alt=\"Swapify Logo\"\r\n              height=\"100px\"\r\n            />\r\n          </div>\r\n          <div className=\"col l6 s12 center\">\r\n            <motion.h4\r\n              animate={{ opacity: 1, x: 1 }}\r\n              initial={{ opacity: 0, x: 1000 }}\r\n              transition={{ delay: 3, duration: 1 }}\r\n              className=\"how2\"\r\n            >\r\n              Add a new item to swap\r\n            </motion.h4>\r\n          </div>\r\n        </motion.div>\r\n        <motion.div\r\n          animate={{ opacity: 1 }}\r\n          initial={{ opacity: 0 }}\r\n          // transition={{ delay: 3, duration: 2 }}\r\n          whileHover={{\r\n            scale: 1.2,\r\n          }}\r\n          className=\"row\"\r\n        >\r\n          <div className=\"col l4 s12 center symbol3\">\r\n            <motion.img\r\n              src=\"./../img/swipeSymbol.png\"\r\n              alt=\"Swapify Logo\"\r\n              height=\"100px\"\r\n            />\r\n          </div>\r\n          <div className=\"col l6 s12 center\">\r\n            <motion.h4\r\n              animate={{ opacity: 1, x: 0 }}\r\n              initial={{ opacity: 0, x: 1000 }}\r\n              transition={{ delay: 3, duration: 1 }}\r\n              className=\"how3\"\r\n            >\r\n              Browse & swipe to match\r\n            </motion.h4>\r\n          </div>\r\n        </motion.div>\r\n        <motion.div\r\n          animate={{ opacity: 1 }}\r\n          initial={{ opacity: 0 }}\r\n          // transition={{ delay: 3, duration: 2 }}\r\n          whileHover={{\r\n            scale: 1.2,\r\n          }}\r\n          className=\"row\"\r\n        >\r\n          <div className=\"col l4 s12 center symbol4\">\r\n            <motion.img\r\n              src=\"./../img/swapSymbol2.png\"\r\n              alt=\"Swapify Logo\"\r\n              height=\"100px\"\r\n            />\r\n          </div>\r\n          <div className=\"col l6 s12 center\">\r\n            <motion.h4\r\n              animate={{ opacity: 1, x: 0 }}\r\n              initial={{ opacity: 0, x: 1000 }}\r\n              transition={{ delay: 3, duration: 1 }}\r\n              className=\"how4\"\r\n            >\r\n              Chat and swap with matches\r\n            </motion.h4>\r\n          </div>\r\n        </motion.div>\r\n      </motion.div>\r\n    </div>\r\n  </div>\r\n);\r\n}\r\n\r\nexport default Welcome;","import React, { useState } from \"react\";\r\nimport { Button, Modal } from \"react-materialize\";\r\nimport API from \"../../utils/API\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport \"./style.css\";\r\n\r\nconst ItemCard = (props) => {\r\n\r\n  const [openDeleteModal, setOpenDeleteModal ] = useState(false)\r\n\r\n  return (\r\n    <div>\r\n    <div class=\"card itemCard\">\r\n        <div class=\"card-image\">\r\n          <img src={props.imageURL} className=\"itemCardImage\" draggable=\"false\" />\r\n          <span class=\"card-title itemCardTitle truncate\"  style={{\r\n              height: \"70px\",\r\n              lineHeight: \"70px\",\r\n              paddingLeft: \"0px\",\r\n              fontFamily: \"proxima-nova, sans-serif\",\r\n              fontWeight: \"700\",\r\n              fontStyle: \"normal\",\r\n              fontSize: \"20px\",\r\n              color: \"#025159\",\r\n            }}>{props.itemName}</span>\r\n        </div>\r\n        <div class=\"card-content center-align\">\r\n          <a href={`/swipping/${props.id}/${props.userData.googleId}`}><Button id=\"modalBtn\" className=\"cardSwapButton\" onClick={() => API.handleUseItem(props.id)}><div className=\"swapText\">Swap</div></Button></a>\r\n          <br></br>\r\n          <Button style={{marginTop: \"10px\"}} className=\"cardDeleteButton\"  onClick={() => setOpenDeleteModal(true)}><i class=\"material-icons deleteIcon\">delete</i></Button>\r\n        </div>\r\n    </div>\r\n    <Modal\r\n        open={openDeleteModal}\r\n        className='center-align modal'\r\n        actions={[]}\r\n        options={{\r\n          dismissible: false\r\n        }}\r\n        >\r\n        <h3>Are you sure you want to do that?</h3>\r\n        <br></br>\r\n        <div>If you delete this item it will be gone forever!</div>\r\n        <br></br><br></br>\r\n        <a>\r\n          <Button id=\"modalBtn\" modal=\"close\" onClick={() => {\r\n              API.deleteItem(props.id).then((results) => {\r\n                props.loadItems();\r\n              });\r\n            }}\r\n          >Delete</Button>\r\n        </a>\r\n        <br></br><br></br>\r\n        <a>\r\n          <Button id=\"modalBtn\" onClick={() => setOpenDeleteModal(false)} modal=\"close\">Cancel</Button>\r\n        </a>\r\n        <br></br>\r\n    </Modal>\r\n    </div>\r\n\r\n            \r\n  );\r\n};\r\nexport default ItemCard;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport API from \"../utils/API\";\r\nimport ItemCard from \"../components/ItemCard\";\r\nimport {\r\n  Button,\r\n  Col,\r\n  Row,\r\n  Collection\r\n} from \"react-materialize\";\r\nimport ReactTooltip from 'react-tooltip';\r\nimport { motion } from \"framer-motion\";\r\nimport ScrollMenu from 'react-horizontal-scrolling-menu';\r\nimport \"./profileStyle.css\"\r\n\r\n\r\n//document.body.style = \"background: -webkit-gradient(linear, top, bottom, from(#003399), to(#6699cc));background: -webkit-linear-gradient(#025159, #03A696);background: linear-gradient(#025159, #03A696);zoom: 1;margin: 0;padding-top: 2%;padding-bottom: 3%;background-attachment: fixed;\"\r\n\r\nfunction Profile() {\r\n  const [usersItemList, setUsersItemList] = useState([]);\r\n  const [matchList, setMatchList] = useState([]);\r\n  const [userData, setUserData] = useState({\r\n    email: \"\",\r\n    firstName: \"\",\r\n    googleId: \"\",\r\n    image: \"\",\r\n    lastName: \"\",\r\n    listedItems: [],\r\n    rating: [],\r\n  });\r\n  const [imageArray, setImageArray] = useState([\"\"]);\r\n  const { id } = useParams();\r\n  const [userRating, setUserRating] = useState(0);\r\n\r\n  let matchArray = [];\r\n\r\n  useEffect(() => {\r\n    loadItems();\r\n    loadImages();\r\n    API.getUser(id).then((res) => {\r\n      const newUser = {\r\n        email: res.data[0].email,\r\n        firstName: res.data[0].firstName,\r\n        googleId: res.data[0].googleId,\r\n        image: res.data[0].image,\r\n        lastName: res.data[0].lastName,\r\n        listedItems: res.data[0].listedItems,\r\n        rating: res.data[0].rating,\r\n      };\r\n      setUserData(newUser);\r\n      if (res.data[0].rating.length === 0) {\r\n        setUserRating(0);\r\n      } else {\r\n        let ratingCount = 0;\r\n        for (let i = 0; i < res.data[0].rating.length; i++) {\r\n          ratingCount = ratingCount + res.data[0].rating[i];\r\n        }\r\n        setUserRating(Math.round(ratingCount / res.data[0].rating.length));\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadItems();\r\n    loadImages();\r\n  }, [userData]);\r\n\r\n  function loadImages() {\r\n    let tempArray = [];\r\n    usersItemList.forEach((item, i) => {\r\n      tempArray.push(item.imageURL);\r\n    });\r\n    if (usersItemList.length == 0) {\r\n      return;\r\n    }\r\n    console.log(tempArray);\r\n    setImageArray(tempArray);\r\n  }\r\n\r\n  function loadItems() {\r\n    if (userData === null) {\r\n      //   setRedirect(true)\r\n    }\r\n    API.getUserItems(userData.googleId).then((response) => {\r\n      setUsersItemList(response.data);\r\n    });\r\n    API.getUserMatches(userData.googleId).then((matchResponse) => {\r\n      matchResponse.data.forEach((item) => {\r\n        if (item.item1Owner === userData.googleId) {\r\n          const itemInfo = {\r\n            userItemId: item.item1Id,\r\n            userId: item.item1Owner,\r\n            userItemPhoto: item.item1Photo,\r\n            userItemName: item.item1Name,\r\n            otherItemId: item.item2Id,\r\n            otherUser: item.item2Owner,\r\n            otherItemImage: item.item2Photo,\r\n            otherItemName: item.item2Name,\r\n          };\r\n          matchArray.push(itemInfo);\r\n          if (matchResponse.data.length === matchArray.length) {\r\n            setMatchList(matchArray);\r\n          }\r\n        } else {\r\n          const itemInfo = {\r\n            userItemId: item.item2Id,\r\n            userId: item.item2Owner,\r\n            userItemPhoto: item.item2Photo,\r\n            userItemName: item.item2Name,\r\n            otherItemId: item.item1Id,\r\n            otherUser: item.item1Owner,\r\n            otherItemImage: item.item1Photo,\r\n            otherItemName: item.item1Name,\r\n          };\r\n          matchArray.push(itemInfo);\r\n          if (matchResponse.data.length === matchArray.length) {\r\n            setMatchList(matchArray);\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  function handleUseItem(id) {\r\n    console.log(id);\r\n    localStorage.setItem(\"itemData\", JSON.stringify(id));\r\n    //  setRedirectToSwipping(true)\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      {/* {redirect ? (<Redirect push to=\"/\" />) : null} */}\r\n\r\n      <div className=\"container center-align\" style={{ marginTop: \"20px\" }}>\r\n        <div className=\"row\">\r\n          <div className=\"col m12 s12 \">\r\n            <motion.img\r\n              animate={{ y: 1, opacity: 1 }}\r\n              initial={{ y: -50, opacity: 0 }}\r\n              transition={{\r\n                delay: 0.5,\r\n                duration: 0.5,\r\n                // type: \"spring\",\r\n                // stiffness: 50,\r\n              }}\r\n              alt=\"\"\r\n              className=\"circle z-depth-3\"\r\n              style={{\r\n                height: \"150px\",\r\n                width: \"150px\",\r\n                marginTop: \"50px\",\r\n              }}\r\n              src={userData.image}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col m12 s12 center-align\" data-tip=\"Your Swapify rating\">\r\n            <motion.div\r\n              animate={{ opacity: 1 }}\r\n              initial={{ opacity: 0 }}\r\n              transition={{ duration: .2, delay: 0.2 }}\r\n              className=\"col m12 s12 center-align\">\r\n              {Array(userRating)\r\n                .fill()\r\n                .map((el, i) => (\r\n                  <i\r\n                    className=\"material-icons\"\r\n                    key={i}\r\n                    style={{ color: \"#F25D27\" }}\r\n                  >\r\n                    star\r\n                </i>\r\n                ))}\r\n              {Array(5 - userRating)\r\n                .fill()\r\n                .map((el, i) => (\r\n                  <i\r\n                    className=\"material-icons\"\r\n                    key={i}\r\n                    style={{ color: \"#F25D27\" }}\r\n                  >\r\n                    star_border\r\n                </i>\r\n                ))}\r\n            </motion.div>\r\n          \r\n            <ReactTooltip place=\"bottom\" type=\"light\" effect=\"float\"/>\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n        <Row className=\"valign-wrapper\">\r\n        </Row>\r\n        <Row>\r\n          <div className=\"col m12 s12 \">\r\n            <motion.h2\r\n              animate={{ opacity: 1 }}\r\n              initial={{ opacity: 0 }}\r\n              transition={{ duration: 1 }}\r\n              style={{ color: \"#03A696\" }}\r\n              className=\"userName\"\r\n            >\r\n\r\n              {userData.firstName} {userData.lastName}\r\n            </motion.h2>\r\n          </div>\r\n        </Row>\r\n      \r\n      <Row className=\"valign-wrapper\">\r\n        <Col m={8} s={8} className=\"right-align\">\r\n          <h4 style={{ color: \"#025159\" }}>Add Item</h4>\r\n        </Col>\r\n        <Col m={6} s={6} className=\"left-align\">\r\n          <Button\r\n            floating={true}\r\n            large={true}\r\n            style={{ backgroundColor: \"#F25D27\" }}\r\n          >\r\n            <Link to={`/createItem/${userData.googleId}`}>\r\n              <i className=\"material-icons\">add</i>\r\n            </Link>\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n      <Row style={{ paddingTop: \"10px\" }}>\r\n        <h3\r\n          style={{\r\n            fontFamily: \"lemon\",\r\n            color: \"#03A696\",\r\n            paddingBottom: \"20px\",\r\n          }}\r\n        >\r\n          Your Items\r\n          </h3>\r\n         <Col s={12} style={{paddingTop: \"50px\"}}>\r\n        <ScrollMenu\r\n          \r\n          arrowLeft={<div style={{ fontSize: \"30px\", paddingRight: \"10px\" }}>{\" < \"}</div>}\r\n          arrowRight={<div style={{ fontSize: \"30px\", paddingLeft: \"10px\" }}>{\" > \"}</div>}\r\n          itemStyle={{paddingLeft:\"15px\"}}\r\n          itemClassActive={'null'}\r\n          data={usersItemList.map((item, index) => (\r\n            <ItemCard\r\n              key={index}\r\n              loadItems={loadItems}\r\n              imageURL={item.imageURL}\r\n              itemName={item.itemName}\r\n              id={item._id}\r\n              itemDescription={item.itemDescription}\r\n              userData={userData}\r\n            />\r\n          ))}\r\n        />\r\n        </Col>\r\n      </Row>\r\n\r\n      <Row style={{ height: \"400px\" }}></Row>\r\n    </div>\r\n    </div >\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n","import React from \"react\";\r\n\r\nconst chatContext = React.createContext({\r\n  matchId: \"\",\r\n  recentText: \"\",\r\n  setChat: () => {},\r\n  setNewText: () => {}\r\n});\r\n\r\nexport default chatContext;\r\n","\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { Button, CollectionItem, Modal, Row, Col } from 'react-materialize';\r\nimport \"./style.css\"\r\nimport chatContext from \"../../utils/chatContext\"\r\nimport API from \"../../utils/API\";\r\n\r\nconst MatchCard = (props) => {\r\n    const itemIds = {\r\n        matchId: props.matchData.matchId\r\n    }\r\n    const { setChat, chatId } = useContext(chatContext)\r\n    const [ currentChatStyle, setCurrentChatStyle ] = useState(false)\r\n    const [ userRating, setUserRating ] = useState(0)\r\n    const [ openInfoModal, setOpenInfoModal ] = useState(false)\r\n\r\n    useEffect(() => {\r\n       setChat({matchId: props.allMatches.data[0]._id})\r\n       API.getUser(props.matchData.otherUser).then((res) => {\r\n           if (res.data[0].rating.length === 0) {\r\n               setUserRating(0)\r\n           }\r\n           else {\r\n               let ratingCount = 0\r\n               for (let i = 0; i < res.data[0].rating.length; i++) {\r\n                   ratingCount = ratingCount + res.data[0].rating[i]\r\n               }\r\n               setUserRating(Math.round(ratingCount / res.data[0].rating.length))\r\n           }\r\n       })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (chatId.matchId === props.matchData.matchId) {\r\n            setCurrentChatStyle(true)\r\n        }\r\n        else {\r\n            setCurrentChatStyle(false)\r\n        }\r\n    }, [chatId])\r\n\r\n    function activateInfoModal() {\r\n        setOpenInfoModal(true)\r\n        console.log(props.matchData)\r\n    }\r\n\r\n    function closeInfoModal() {\r\n        setOpenInfoModal(false)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {/* highlights currently selected chat */}\r\n            {currentChatStyle ? (\r\n                <CollectionItem className=\"avatar valign-wrapper\" style={{backgroundColor:\"#D3EEE3\"}}>\r\n                <a className=\"noHover\"><img\r\n                    alt=\"\"\r\n                    className=\"circle userItemPicture\"\r\n                    src={props.yourImageUrl}\r\n                /></a>\r\n                <img src=\"./../../img/swapO-logo-vector.png\" className=\"swapSymbol noHover\"></img>\r\n                <a className=\"noHover\"><img\r\n                    alt=\"\"\r\n                    className=\"circle itemPicture noHover\"\r\n                    src={props.imageURL}\r\n                /><i className=\"material-icons ratingStar noHover\">star</i><p className=\"ratingNumber noHover\">{userRating}</p></a>\r\n\r\n                <a className=\"secondary-content\">\r\n                    <a className=\"btn-floating btn-large infoButton\" style= {{backgroundColor:\"#F28705\"}} onClick={() => {activateInfoModal()}} ><i className=\"material-icons\">info</i></a>\r\n                </a>\r\n\r\n                <a className=\"secondary-content\">\r\n                    {props.matchData.newText ? (<a className=\"btn-floating btn-large chatButton pulse\" style= {{backgroundColor:\"#F28705\"}} onClick={() => {setChat(itemIds)}} ><i className=\"material-icons\">chat</i></a>) : (<a className=\"btn-floating btn-large chatButton\" style= {{backgroundColor:\"#F28705\"}} onClick={() => {setChat(itemIds)}} ><i className=\"material-icons\">chat</i></a>)}\r\n                    \r\n                </a>\r\n            </CollectionItem>\r\n            ) : (\r\n                <CollectionItem className=\"avatar valign-wrapper\">\r\n                <a className=\"noHover\"><img\r\n                    alt=\"\"\r\n                    className=\"circle userItemPicture \"\r\n                    src={props.yourImageUrl}\r\n                /></a>\r\n                <img src=\"./../../img/swapO-logo-vector.png\" className=\"swapSymbol noHover\"></img>\r\n                <a className=\"noHover\"><img\r\n                    alt=\"\"\r\n                    className=\"circle itemPicture noHover\"\r\n                    src={props.imageURL}\r\n                /><i className=\"material-icons ratingStar noHover\">star</i><p className=\"ratingNumber\">{userRating}</p></a>\r\n\r\n                <a className=\"secondary-content\">\r\n                    <a className=\"btn-floating btn-large infoButton\" style= {{backgroundColor:\"#F28705\"}} onClick={() => {activateInfoModal()}} ><i className=\"material-icons\">info</i></a>\r\n                </a>\r\n                <a className=\"secondary-content\">\r\n                    {props.matchData.newText ? (<a className=\"btn-floating btn-large chatButton pulse\" style= {{backgroundColor:\"#F28705\"}} onClick={() => {setChat(itemIds)}} ><i className=\"material-icons\">chat</i></a>) : (<a className=\"btn-floating btn-large chatButton\" style= {{backgroundColor:\"#F28705\"}} onClick={() => {setChat(itemIds)}} ><i className=\"material-icons\">chat</i></a>)}\r\n                    \r\n                </a>\r\n            </CollectionItem>\r\n            )}\r\n            <Modal\r\n                open={openInfoModal}\r\n                className='center-align'\r\n                actions={[]}\r\n                options={{\r\n                    onCloseStart: closeInfoModal\r\n                }}\r\n                >\r\n                <Row>\r\n                    <Col s={12} m={4}>\r\n                        <img src={props.matchData.userItemPhoto} className=\"circle modalUserImage\"></img>\r\n                        <h5>{props.matchData.userItemName}</h5>\r\n                    </Col>\r\n                    <Col s={12} m={4}>\r\n                        <br></br><br></br>\r\n                        <img src=\"./../../img/swapO-logo-vector.png\" className=\"swapItemIcon\"></img>\r\n                        <br></br><br></br>\r\n                    </Col>\r\n                    <Col s={12} m={4}>\r\n                        <img src={props.matchData.otherItemImage} className=\"circle modalUserImage\"></img>\r\n                        <h5>{props.matchData.otherItemName}</h5>\r\n                    </Col>\r\n                </Row>\r\n                {/* <Row>\r\n                    <Col s={6}>\r\n                    <h5>{props.matchData.userItemName}</h5>\r\n                    </Col>\r\n                    <Col s={6}>\r\n                    <h5>{props.matchData.otherItemName}</h5>\r\n                    </Col>\r\n                </Row> */}\r\n                <a><Button modal=\"close\" className=\"closeModalButton\" onClick={closeInfoModal}>Close</Button></a>\r\n            </Modal>\r\n\r\n        </div>\r\n    )\r\n}\r\nexport default MatchCard;","import firebase from \"firebase/app\"\r\nimport \"firebase/storage\"\r\nimport \"firebase/firestore\"\r\n\r\nconst firebaseConfig = {\r\n    apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n    authDomain: process.env.REACT_APP_FIREBASE_AUTHDOMAIN,\r\n    projectId: \"swapify-85d2c\",\r\n    storageBucket: \"swapify-85d2c.appspot.com\",\r\n    messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n    appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n    measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID\r\n  };\r\n\r\nfirebase.initializeApp(firebaseConfig)\r\n\r\nconst storage = firebase.storage()\r\nconst firestore = firebase.firestore()\r\n\r\nexport { storage, firebase, firestore, firebase as default} ","import React, { useState, useEffect, useContext } from \"react\";\r\nimport API from \"../../utils/API\";\r\nimport { Collection, SideNav, Modal, Button } from 'react-materialize';\r\nimport MatchCard from '../MatchCard'\r\nimport { firestore } from \"../../utils/firebase\"\r\nimport chatContext from \"../../utils/chatContext\"\r\nimport \"./style.css\"\r\n\r\n\r\nexport default function MatchesSideBar(props) {\r\n    const [usersItemList, setUsersItemList] = useState([]);\r\n    const [matchList, setMatchList] = useState([])\r\n    const [allMatches, setAllMatches] = useState([])\r\n    const [noChats, setNoChats] = useState(false)\r\n    const userData = props.userData\r\n    const { recentText } = useContext(chatContext)\r\n    let matchArray = []\r\n\r\n    useEffect(() => {\r\n        API.getUserItems(userData.googleId).then((response) => {\r\n            setUsersItemList(response.data)\r\n        })\r\n        API.getUserMatches(userData.googleId).then((matchResponse) => {\r\n            if (matchResponse.data.length === 0) {\r\n                setNoChats(true)\r\n            }\r\n            setAllMatches(matchResponse)\r\n            matchResponse.data.forEach(item => {\r\n                if (item.item1Owner === userData.googleId) {\r\n                    const itemInfo = {\r\n                        userItemId: item.item1Id,\r\n                        userId: item.item1Owner,\r\n                        userItemPhoto: item.item1Photo,\r\n                        userItemName: item.item1Name,\r\n                        otherItemId: item.item2Id,\r\n                        otherUser: item.item2Owner,\r\n                        otherItemImage: item.item2Photo,\r\n                        otherItemName: item.item2Name,\r\n                        matchId: item._id,\r\n                        newText: item.item1NewText\r\n                    }\r\n                    matchArray.push(itemInfo)\r\n                    if (matchResponse.data.length === matchArray.length) {\r\n                        getCollectionsMostRecents(matchArray).then((res) => {\r\n                            setMatchList(res)\r\n                        })\r\n                    }\r\n                }\r\n                else {\r\n                    const itemInfo = {\r\n                        userItemId: item.item2Id,\r\n                        userId: item.item2Owner,\r\n                        userItemPhoto: item.item2Photo,\r\n                        userItemName: item.item2Name,\r\n                        otherItemId: item.item1Id,\r\n                        otherUser: item.item1Owner,\r\n                        otherItemImage: item.item1Photo,\r\n                        otherItemName: item.item1Name,\r\n                        matchId: item._id,\r\n                        newText: item.item2NewText\r\n                    }\r\n                    matchArray.push(itemInfo)\r\n                    if (matchResponse.data.length === matchArray.length) {\r\n                        getCollectionsMostRecents(matchArray).then((res) => {\r\n                            setMatchList(res)\r\n                        })\r\n                    }\r\n                }\r\n            });\r\n        })\r\n    }, [recentText, props])\r\n\r\n    \r\n\r\n    const getCollectionsMostRecents = async(newArray) => {\r\n        if (newArray) {\r\n        for (let i = 0; i < newArray.length; i++) {\r\n            const returns = await firestore.collection(`${newArray[i].matchId}`).orderBy(\"createdAt\", 'desc').limit(1).get()\r\n            if (returns._delegate._snapshot.docChanges[0]) {\r\n                newArray[i].latestText = returns._delegate._snapshot.docChanges[0].doc.data.partialValue.mapValue.fields.text.stringValue\r\n                newArray[i].textTime = returns._delegate._snapshot.docChanges[0].doc.data.partialValue.mapValue.fields.createdAt.timestampValue\r\n            }\r\n        }\r\n        let sortedList =  newArray.sort(function compare(a, b) {\r\n            var dateA = new Date(a.textTime);\r\n            var dateB = new Date(b.textTime);\r\n            return dateB - dateA;\r\n        });\r\n        return sortedList\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        \r\n        getCollectionsMostRecents(matchList).then((res) => {\r\n            setMatchList(res)\r\n        })\r\n\r\n    }, [recentText])\r\n    \r\n\r\n\r\n    return (\r\n        <div>\r\n            <SideNav\r\n                fixed={true}\r\n                trigger={<Button floating={true} large={true} className=\"chatSideNavTrigger\"><i class=\"material-icons\">chat</i></Button>}>\r\n                <Collection className=\"chatCollection\">\r\n                    {matchList.map(match => (\r\n                        <MatchCard yourImageUrl={match.userItemPhoto} imageURL={match.otherItemImage} matchData={match} allMatches={allMatches}/>\r\n                    ))}\r\n                </Collection>\r\n            </SideNav>\r\n\r\n            {/* No chats Modal */}\r\n            <Modal\r\n                open={noChats}\r\n                className='center-align'\r\n                actions={[]}\r\n                options={{\r\n                dismissible: false\r\n                }}>\r\n                <h3>No Chats!</h3>\r\n                <br></br>\r\n                <div>You don't have any open chats or matches!</div>\r\n                <div>Go make some matches first!</div>\r\n                <br></br>\r\n                <a href={`/profile/${userData.googleId}`}><Button id=\"modalBtn\">Go Back</Button></a>\r\n            </Modal>\r\n        </div>       \r\n    )\r\n}\r\n","import React from 'react'\r\nimport \"./style.css\"\r\n\r\nexport default function ChatMessage(props) {\r\n    const userData = props.userData\r\n    const { text, sentFromid, sentFromPhoto } = props.message;\r\n    const messageClass = sentFromid === userData.googleId ? 'sent' : 'received';\r\n\r\n\r\n    return (\r\n        <div className={`message ${messageClass}`}>\r\n            <img className='itemPhoto' src={sentFromPhoto} alt=\"photo of item\"/>\r\n            <p>{text}</p>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useRef, useEffect, useContext } from 'react'\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore'\r\nimport { Col, Row, Button, Modal } from 'react-materialize';\r\nimport API from '../../utils/API'\r\nimport { firebase, firestore } from \"../../utils/firebase\"\r\nimport ChatMessage from \"../ChatMessage\"\r\nimport chatContext from \"../../utils/chatContext\"\r\nimport Confetti from \"react-dom-confetti\";\r\nimport \"./style.css\"\r\nimport Rating from 'react-rating'\r\n\r\nexport default function ChatRoom(props) {\r\n    const userData = props.userData\r\n    const { chatId, setNewText } = useContext(chatContext)\r\n    const [messagesRef, setMessagesRef] = useState(firestore.collection('empty'))\r\n    const query = messagesRef.orderBy('createdAt')\r\n    const [messages] = useCollectionData(query, {idField: 'id'})\r\n    const [formValue, setFormValue] = useState('')\r\n    const dummy = useRef()\r\n    const [userItem, setUserItem] = useState({})\r\n    const [otherItem, setOtherItem] = useState({})\r\n    const messagesEndRef = React.createRef()\r\n    const [openRateModal, setOpenRateModal] = useState(false)\r\n    const [rating, setRating] = useState(0)\r\n    const [reward, setReward ] = useState(false)\r\n\r\n    useEffect(() => {\r\n        setMessagesRef(firestore.collection(chatId.matchId || 'empty'))\r\n        API.getMatch(chatId.matchId).then((matchResponse) => {\r\n            if (matchResponse.data.item1Owner === userData.googleId) {\r\n                setUserItem({id: matchResponse.data.item1Owner, photoURL: matchResponse.data.item1Photo})\r\n                setOtherItem({id: matchResponse.data.item2Owner, photoURL: matchResponse.data.item2Photo})\r\n            }\r\n            else {\r\n                setUserItem({id: matchResponse.data.item2Owner, photoURL: matchResponse.data.item2Photo})\r\n                setOtherItem({id: matchResponse.data.item1Owner, photoURL: matchResponse.data.item1Photo})\r\n            }\r\n        })\r\n        setTimeout(function () {\r\n            dummy.current.scrollIntoView({ behavior: 'smooth' })\r\n          }, 500)\r\n    }, [chatId])\r\n\r\n\r\n    const sendMessage = async(e) => {\r\n        e.preventDefault();\r\n        API.getMatch(chatId.matchId).then((matchResponse) => {\r\n            if (matchResponse.data.item1Owner === userData.googleId) {\r\n                const matchData = {\r\n                    item2NewText: true,\r\n                    item1NewText: false\r\n                }\r\n                API.updateUserMatch(chatId.matchId, matchData)\r\n            }\r\n            else {\r\n                const matchData = {\r\n                    item1NewText: true,\r\n                    item2NewText: false\r\n                }\r\n                API.updateUserMatch(chatId.matchId, matchData)\r\n            }\r\n        })\r\n\r\n\r\n        setNewText(formValue)\r\n        await messagesRef.add({\r\n            text: formValue,\r\n            createdAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n            sentFromid: userItem.id,\r\n            sentToid: otherItem.id,\r\n            sentFromPhoto: userItem.photoURL,\r\n            setToPhoto: otherItem.photoURL\r\n        })\r\n        setFormValue('')\r\n        dummy.current.scrollIntoView({ behavior: 'smooth' })\r\n    }\r\n\r\n    function swapItems() {\r\n        setReward(true)\r\n        API.getMatch(chatId.matchId).then((matchResponse) => {\r\n            console.log(matchResponse)\r\n            if (matchResponse.data.item1Owner === userData.googleId) {\r\n                API.deleteMatchesForItem(matchResponse.data.item1Id).then((res) => {\r\n                    API.deleteItem(matchResponse.data.item1Id).then((delResponse) => {\r\n                        API.updateItem(matchResponse.data.item2Id, {deleteItem: matchResponse.data.item1Owner}).then((updateRes) => {\r\n                            setOpenRateModal(true)\r\n                        })\r\n                    })\r\n                })\r\n            }\r\n            else {\r\n                API.deleteMatchesForItem(matchResponse.data.item2Id).then((res) => {\r\n                    API.deleteItem(matchResponse.data.item2Id).then((delResponse) => {\r\n                        API.updateItem(matchResponse.data.item1Id, {deleteItem: matchResponse.data.item2Owner}).then((updateRes) => {\r\n                            setOpenRateModal(true)\r\n                        })\r\n                    })\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    function deleteMatch() {\r\n        API.deleteMatch(chatId.matchId).then((res) => {\r\n            setOpenRateModal(true)\r\n        })\r\n    }\r\n\r\n    function reloadPage() {\r\n        window.location.reload();\r\n    }\r\n\r\n    function submitRating() {\r\n        API.getUser(otherItem.id).then((userResponse) => {\r\n            const ratingArray = userResponse.data[0].rating\r\n            ratingArray.push(rating)\r\n            const newUserRating = {\r\n                rating: ratingArray\r\n            }\r\n            API.updateUser(otherItem.id, newUserRating).then((res) => {\r\n                window.location.reload();\r\n            })\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n        <div className=\"container\">\r\n            {/* Rate User */}\r\n            <Modal\r\n                open={openRateModal}\r\n                className='center-align'\r\n                actions={[]}\r\n                options={{\r\n                dismissible: false\r\n                }}>\r\n                <h3>Match Deleted!</h3>\r\n                <br></br>\r\n                <div>Would you like to rate the other user?</div>\r\n                <br></br>\r\n                <Rating\r\n                    emptySymbol={<i className=\"material-icons\">star_border</i>}\r\n                    fullSymbol={<i className=\"material-icons\">star</i>}\r\n                    onChange={(e) => setRating(e)}\r\n                ></Rating>\r\n                <br></br><br></br>\r\n                <a><Button onClick={submitRating} modal=\"close\">Submit Rating</Button></a>\r\n                <br></br><br></br>\r\n                <a><Button onClick={reloadPage} modal=\"close\">No Thanks</Button></a>\r\n            </Modal>\r\n            <Row className=\"wrapper\">\r\n                {messages && messages.map(msg => <ChatMessage key={msg.id} message={msg} userData={userData}/>)}\r\n                <div ref={dummy}></div>\r\n                <div ref={messagesEndRef} />\r\n                <br></br><br></br><br></br><br></br><br></br>\r\n            </Row>\r\n        \r\n        <div className=\"chatControls\">\r\n        <Confetti\r\n                            id=\"confetti\"\r\n                            active={reward}\r\n                            className=\"right-align\"\r\n                        />\r\n            <Row>\r\n                <Col s={12}>\r\n                    <form onSubmit={sendMessage}>   \r\n                        <Col s={10}>\r\n                        <input value={formValue} required className=\"chatForm\" onChange={(e) => setFormValue(e.target.value)}/>\r\n                        </Col>\r\n                        <Col s={2}>\r\n                        <button type=\"submit\" className=\"btn-floating btn-large waves-effect waves-light sendButton\"><i className=\"material-icons\">send</i></button>\r\n                        </Col>\r\n                    </form>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col s={6} className='center-align'>\r\n                    <Modal\r\n                        className=\"center-align\"\r\n                        id=\"Modal-Swap\"\r\n                        trigger={<Button node=\"button\" className=\"swapItemsButton\">SWAP ITEMS</Button>}\r\n                    >\r\n                        <h3>Swap Items?</h3>\r\n                        <br></br>\r\n                        <div>If you press confirm your item will be no longer listed on Swapify. Only do this after swapping items.</div>\r\n                        <br></br><br></br>\r\n                        <a><Button onClick={swapItems} modal=\"close\">Confirm</Button></a>\r\n                    </Modal>\r\n                </Col>\r\n                <Col s={6} className='center-align'>\r\n                    <Modal\r\n                        className=\"center-align\"\r\n                        id=\"Modal-Swap\"\r\n                        trigger={<Button node=\"button\" className=\"deleteMatchButton\">DELETE MATCH</Button>}\r\n                    >\r\n                        <h3>Delete Match?</h3>\r\n                        <br></br>\r\n                        <div>If you press confirm your match will be deleted from Swapify.</div>\r\n                        <br></br><br></br>\r\n                        <a><Button onClick={deleteMatch} modal=\"close\">Confirm</Button></a>\r\n                    </Modal>\r\n                </Col>\r\n            </Row>\r\n        </div>\r\n        </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, {useState, useEffect } from \"react\";\r\nimport { useParams } from 'react-router-dom'\r\nimport { Col, Row} from 'react-materialize';\r\nimport MatchesSideBar from \"../components/MatchesSideBar\"\r\nimport ChatRoom from \"../components/ChatRoom\"\r\nimport API from \"../utils/API\"\r\nimport chatContext from \"../utils/chatContext\";\r\n\r\n\r\nfunction ChatApp() {\r\n\r\n    const [chatId, setChatId] = useState('empty')\r\n    const [recentText, setRecentText] = useState('')\r\n    const [notNewText, setNotNewText] = useState(2)\r\n    const [userData, setUserData] = useState({email: \"\",\r\n        firstName: \"\",\r\n        googleId: \"\",\r\n        image: \"\",\r\n        lastName: \"\",\r\n        listedItems: [],\r\n        rating: []}\r\n    )\r\n    const { id } = useParams()\r\n\r\n    useEffect(() => {\r\n        API.getUser(id).then((res) => {\r\n            const newUser = {\r\n                email: res.data[0].email,\r\n                firstName: res.data[0].firstName,\r\n                googleId: res.data[0].googleId,\r\n                image: res.data[0].image,\r\n                lastName: res.data[0].lastName,\r\n                listedItems: res.data[0].listedItems,\r\n                rating: res.data[0].rating\r\n            }\r\n            setUserData(newUser)\r\n        })\r\n    }, [])\r\n\r\n    function setChat(id) {\r\n        setChatId(id)\r\n        API.getMatch(id.matchId).then((res) => {\r\n            if ((userData.googleId === res.data.item1Owner) && (res.data.item1NewText === true)) {\r\n                const matchData = {\r\n                    item1NewText: false\r\n                }\r\n                API.updateUserMatch(id.matchId, matchData)\r\n                setNotNewText(Math.floor(Math.random() * 100000))\r\n            }\r\n            else if ((userData.googleId === res.data.item2Owner) && (res.data.item2NewText === true)) {\r\n                const matchData = {\r\n                    item2NewText: false\r\n                }\r\n                API.updateUserMatch(id.matchId, matchData)\r\n                setNotNewText(Math.floor(Math.random() * 100000))\r\n            }\r\n        })\r\n    }\r\n\r\n    function setNewText(text) {\r\n        setRecentText(text)\r\n    }\r\n\r\n    return (\r\n        <div style={{minHeight: \"95vh\"}}>\r\n        <chatContext.Provider value={{chatId, recentText, setChat, setNewText }}>\r\n            <Row style={{marginBottom:\"0px\"}}>\r\n                <Col s={0} m={4}>\r\n                    <MatchesSideBar newText={notNewText} userData={userData}/>\r\n                </Col>\r\n                <Col s={12} m={8}>\r\n                    <ChatRoom userData={userData}/>\r\n                </Col>\r\n            </Row>\r\n        </chatContext.Provider>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default ChatApp;","import React, { useState, useEffect } from \"react\";\r\nimport API from \"../utils/API\";\r\nimport { Input, TextArea, FormBtn } from \"../components/Form\";\r\nimport { storage } from \"../utils/firebase\";\r\nimport { Redirect, useParams, BrowserRouter as Router } from \"react-router-dom\";\r\nimport Compressor from \"compressorjs\";\r\nimport Confetti from \"react-dom-confetti\";\r\nimport { Col, Row, Textarea, Button, Preloader } from \"react-materialize\";\r\nimport \"./createItemStyle.css\";\r\n\r\n\r\n\r\nfunction Item() {\r\n  const [reward, setReward] = useState(false);\r\n  const [descriptionState, setDescriptionState] = useState([]);\r\n  const [nameState, setNameState] = useState([]);\r\n  const [image, setImage] = useState(null);\r\n  const [redirect, setRedirect] = useState(false);\r\n  const [imageURL, setImageURL] = useState(\"\");\r\n  const [buttonText, setButtonText] = useState(\"Preview\");\r\n  const [userLocation, setUserLocation] = useState([\"\"]);\r\n  const [wait, setWait] = useState(false);\r\n  const [ activatePreloader, setActivatePreloader ] = useState(false)\r\n  const { id } = useParams();\r\n  const [userData, setUserData] = useState({\r\n    email: \"\",\r\n    firstName: \"\",\r\n    googleId: \"\",\r\n    image: \"\",\r\n    lastName: \"\",\r\n    listedItems: [],\r\n    rating: [],\r\n  });\r\n\r\n  useEffect(() => {\r\n    API.getUser(id).then((res) => {\r\n      const newUser = {\r\n        email: res.data[0].email,\r\n        firstName: res.data[0].firstName,\r\n        googleId: res.data[0].googleId,\r\n        image: res.data[0].image,\r\n        lastName: res.data[0].lastName,\r\n        listedItems: res.data[0].listedItems,\r\n        rating: res.data[0].rating,\r\n      };\r\n      setUserData(newUser);\r\n    });\r\n    if (userData === null) {\r\n      setRedirect(true);\r\n    }\r\n    const fileUpload = document.getElementById(\"fileBox\");\r\n    fileUpload.addEventListener(\"click\", function (event) {});\r\n\r\n    getUserLocation();\r\n  }, []);\r\n\r\n  function getUserLocation() {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(saveUserLocation);\r\n    } else {\r\n      alert = \"Geolocation is not supported by this browser.\";\r\n    }\r\n  }\r\n\r\n  function saveUserLocation(position) {\r\n    setUserLocation([position.coords.latitude, position.coords.longitude]);\r\n  }\r\n\r\n  //sets the selectedFile state when a a user drops in a file.\r\n  function handleFileChange(e) {\r\n    if (e.target.files[0]) {\r\n      setImage(e.target.files[0]);\r\n    }\r\n  }\r\n\r\n  function handleDescriptionChange(event) {\r\n    const desc = event.target.value;\r\n    setDescriptionState({ ...descriptionState, description: desc });\r\n  }\r\n\r\n  function handleNameChange(event) {\r\n    const name = event.target.value;\r\n    setNameState({ ...nameState, name: name });\r\n  }\r\n\r\n  function previewUploadHandler() {\r\n    if (buttonText === \"Preview\") {\r\n      previewHandler();\r\n      setButtonText(\"Upload\");\r\n    } else {\r\n      fileUploadHandler();\r\n    }\r\n  }\r\n  const fileUploadHandler = () => {\r\n    setActivatePreloader(true)\r\n    // Compress image before uploading to firebase\r\n    new Compressor(image, {\r\n      quality: 0.2,\r\n      success(result) {\r\n\r\n        // uploads image to firebase\r\n        const randomNumber = Math.floor(Math.random() * 100000000);\r\n        const uploadTask = storage\r\n          .ref(`images/${randomNumber + image.name}`)\r\n          .put(result);\r\n        uploadTask.on(\r\n          \"state_changed\",\r\n          (snapshot) => {},\r\n          (error) => {\r\n            console.log(error);\r\n          },\r\n          () => {\r\n            storage\r\n              .ref(\"images\")\r\n              .child(randomNumber + image.name)\r\n              .getDownloadURL()\r\n\r\n              .then(url => {\r\n                saveToDatabase(url, image.name);\r\n                setImageURL(url);\r\n                console.log(\"fileupload handler run\");\r\n                //setButtonText(\"Preview\")\r\n                setReward(!reward);\r\n                setActivatePreloader(false)\r\n                setTimeout(() => setWait(true), 3000);\r\n                // window.location.href=\"/profile\"\r\n              });\r\n          }\r\n        );\r\n      },\r\n      error(err) {\r\n        console.log(err.message);\r\n      },\r\n    });\r\n  };\r\n\r\n  function previewHandler() {\r\n    setActivatePreloader(true)\r\n    // Compress image before uploading to firebase\r\n    new Compressor(image, {\r\n      quality: 0.2,\r\n      success(result) {\r\n        // uploads image to firebase\r\n        const randomNumber = Math.floor(Math.random() * 100000000);\r\n        const uploadTask = storage\r\n          .ref(`images/${randomNumber + image.name}`)\r\n          .put(result);\r\n        uploadTask.on(\r\n          \"state_changed\",\r\n          (snapshot) => {},\r\n          (error) => {\r\n            console.log(error);\r\n          },\r\n          () => {\r\n            storage\r\n              .ref(\"images\")\r\n              .child(randomNumber + image.name)\r\n              .getDownloadURL()\r\n              .then((url) => {\r\n                //saveToDatabase(url);\r\n                setActivatePreloader(false)\r\n                setImageURL(url);\r\n              });\r\n          }\r\n        );\r\n      },\r\n      error(err) {\r\n        console.log(err.message);\r\n      },\r\n    });\r\n  }\r\n\r\n  function saveToDatabase(url, imageName) {\r\n    const splitURL = imageName.split(\".\")\r\n    const newImageName = (splitURL[0] + \"_500x500.\" + splitURL[1])\r\n    const newURL = url.replace(imageName, newImageName)\r\n    const newItem = {\r\n      itemName: nameState.name,\r\n      itemDescription: descriptionState.description,\r\n      itemPrice: 45,\r\n      imageURL: `${newURL}`,\r\n      itemOwner: userData.googleId,\r\n      likesFromItems: [],\r\n      likesItems: [],\r\n      seenItems: [],\r\n      itemLocation: userLocation,\r\n    };\r\n    API.saveItem(newItem).then((itemResponse) => {\r\n      const itemId = itemResponse.data._id;\r\n      API.getUser(userData.googleId).then((res) => {\r\n        const updatedUser = {\r\n          listedItems: res.data[0].listedItems,\r\n        };\r\n        updatedUser.listedItems.push(itemId);\r\n        API.updateUser(userData.googleId, updatedUser);\r\n        console.log(\"save to database run\");\r\n      });\r\n    });\r\n  }\r\n\r\n  return (\r\n    // this cant be a form for some reason?\r\n    <div className=\"container addItem\" style={{ marginTop: \"50px\" }}>\r\n      {redirect ? <Redirect push to=\"/\" /> : null}                \r\n      <div className=\"row\">\r\n        <div className=\"col m7 s6 nameInput\">\r\n          <Textarea\r\n            onChange={handleNameChange}\r\n            name=\"name\"\r\n            label=\"Add Item Name\"\r\n            style={{ color: \"#025159\" }}\r\n            id=\"TextInput-5\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"col m5 s6\">\r\n          <form action=\"#\">\r\n            <div className=\"file-field input-field\">\r\n              <div className=\"btn\" style={{ color: \"#D4EEE3\" }}>\r\n                {/* <span>File</span> */}\r\n                <input\r\n                  type=\"file\"\r\n                  id=\"fileBox\"\r\n                  onChange={handleFileChange}\r\n                  style={{ color: \"#03A696\" }}\r\n                />\r\n                <i className=\"material-icons\">camera_alt</i>\r\n              </div>\r\n              <div className=\"file-path-wrapper\">\r\n                <input\r\n                  className=\"file-path validate\"\r\n                  type=\"text\"\r\n                  placeholder=\"Choose a photo\"\r\n                  style={{ color: \"#f25d27\" }}\r\n                />\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"center-align\">\r\n\r\n        {imageURL && (\r\n          <img\r\n            className=\"responsive-img\"\r\n            src={imageURL}\r\n            style={{ maxWidth: \"50%\", height: \"auto\" }}\r\n          />\r\n        )}\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"col m12 s12\">\r\n          <Textarea\r\n            onChange={handleDescriptionChange}\r\n            name=\"description\"\r\n            label=\"Add a description\"\r\n            style={{ color: \"#025159\" }}\r\n          />\r\n          <div className=\"container right-align\">\r\n            <Row>\r\n              <Col s={6} m={6}></Col>\r\n              <Col s={6} m={6}>\r\n                <Confetti\r\n                  id=\"confetti\"\r\n                  active={reward}\r\n                  className=\"right-align\"\r\n                />\r\n              </Col>\r\n            </Row>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <Row>\r\n        <Col s={12} m={12} className=\"center fullHeight\">\r\n        <Preloader\r\n        className=\"preloaderLocation\"\r\n        active={activatePreloader}\r\n        color=\"blue\"\r\n        flashing={false}\r\n        size=\"big\"\r\n        />\r\n        <br></br><br></br>\r\n          <Button\r\n            // disabled={!(formObject.author && formObject.title)}\r\n            //onClick={fileUploadHandler}\r\n            large\r\n            node=\"a\"\r\n            id=\"mainFileBtn\"\r\n            onClick={previewUploadHandler}\r\n            style={{\r\n              marginRight: \"5px\",\r\n            }}\r\n          >\r\n            {buttonText}\r\n          </Button>\r\n\r\n          {wait ? <Redirect to={`/profile/${userData.googleId}`} /> : \"\"}\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Item;\r\n","import React from 'react'\r\nimport \"./style.css\"\r\n\r\n\r\nexport default function SwipingCard(props) {\r\n    return (\r\n        <div class=\"card swipCard center-align\">\r\n            <div class=\"card-image swipCard center-align\">\r\n                <img className=\"cardImage center-align\" draggable=\"false\"src={props.itemInfo.imageURL} alt=\"swip card\" />\r\n            </div>\r\n            <div class=\"card-content\">\r\n                <span class=\"card-title\">{props.itemInfo.itemName}</span>\r\n                <div>{props.itemInfo.itemDescription}</div>\r\n            </div>  \r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport Slider, { SliderTooltip } from 'rc-slider';\r\nimport 'rc-slider/assets/index.css';\r\nimport \"./style.css\"\r\n\r\n\r\nfunction DistanceSlider(distance) {\r\n    const { Handle } = Slider;\r\n\r\n    const marks = {\r\n        0: <strong>0 <br></br>Miles</strong>,\r\n        50: <strong>50 Miles</strong>\r\n    }\r\n\r\n    const handle = props => {\r\n    const { value, dragging, index, ...restProps } = props;\r\n    return (\r\n        <SliderTooltip\r\n        prefixCls=\"rc-slider-tooltip\"\r\n        overlay={`${value} Miles`}\r\n        visible={dragging}\r\n        placement=\"top\"\r\n        key={index}\r\n        >\r\n        <Handle value={value} {...restProps} />\r\n        </SliderTooltip>\r\n    );\r\n    };\r\n\r\n    return (  \r\n    <div>\r\n        <div className=\"center-align\">\r\n        <Slider min={0} max={50} className=\"distanceSlider\" defaultValue={distance.distanceBoundary} handle={handle} marks={marks} onAfterChange={(e) => distance.setDistanceBoundary(e)}/>\r\n        </div>\r\n    </div>\r\n    );\r\n}\r\n\r\nexport default DistanceSlider","import React, { useState, useEffect } from \"react\";\r\nimport { Redirect, useParams } from 'react-router-dom'\r\nimport { Button, Modal, Row, Col, Preloader } from 'react-materialize';\r\nimport  {motion, useMotionValue, useTransform } from \"framer-motion\"\r\nimport SwipingCard from \"../components/SwipingCard\"\r\nimport DistanceSlider from '../components/DistanceSlider'\r\nimport API from \"../utils/API\";\r\nimport \"./style.css\"\r\nimport \"./swipingStyle.css\"\r\n\r\nlet preventFirstRender = false\r\n\r\nfunction Swipping() {\r\n    let startingDragPoint = {}\r\n    const [redirect, setRedirect] = useState(false);\r\n    const [notUserItems, setNotUserItems] = useState([])\r\n    const [currentItem, setCurrentItem] = useState([])\r\n    const [noMoreItems, setNoMoreItems] = useState(false)\r\n    const [activateCheckMark, setActivateCheckMark ] = useState(false)\r\n    const [activateRedXMark, setActivateRedXMark] = useState(false)\r\n    const [imageNumber, setImageNumber] = useState(0)\r\n    const [itIsAMatch, setItIsAMatch] = useState(false)\r\n    const [distanceBoundary, setDistanceBoundary] = useState(50)\r\n    const [modalMatchImage1, setModalMatchImage1] = useState('')\r\n    const [modalMatchImage2, setModalMatchImage2] = useState('')\r\n    const [activatePreloader, setActivatePreloader] = useState(false)\r\n    const { id, item } = useParams()\r\n    const itemData = item\r\n    const [userData, setUserData] = useState({\r\n        email: \"\",\r\n        firstName: \"\",\r\n        googleId: \"\",\r\n        image: \"\",\r\n        lastName: \"\",\r\n        listedItems: [],\r\n        rating: []}\r\n    )\r\n\r\n    useEffect(() => {\r\n        API.getUser(id).then((res) => {\r\n            const newUser = {\r\n                email: res.data[0].email,\r\n                firstName: res.data[0].firstName,\r\n                googleId: res.data[0].googleId,\r\n                image: res.data[0].image,\r\n                lastName: res.data[0].lastName,\r\n                listedItems: res.data[0].listedItems,\r\n                rating: res.data[0].rating\r\n            }\r\n            setUserData(newUser)\r\n        })\r\n    }, [])\r\n    \r\n\r\n    useEffect(() => {\r\n        setActivatePreloader(true)\r\n        // Sets all user's items to user's current location\r\n        const getCoords = async () => {\r\n            const pos = await new Promise((resolve, reject) => {\r\n              navigator.geolocation.getCurrentPosition(resolve, reject);\r\n            });\r\n            return [pos.coords.latitude, pos.coords.longitude]\r\n        };\r\n        const coords = getCoords().then((res) => {\r\n            API.getUserItems(userData.googleId).then((userItemsResponse) => {\r\n                for (let z = 0; z < userItemsResponse.data.length; z++) {\r\n                    const newCoords = {\r\n                        itemLocation: res\r\n                    }\r\n                    API.updateItem(userItemsResponse.data[z]._id, newCoords)\r\n                }\r\n            })\r\n        });\r\n\r\n        if (userData === null) {\r\n            setRedirect(true)\r\n        }\r\n        API.getAllItems().then((res) => {\r\n            // filters out selected item so it cant see itself\r\n            const notUserItemsArray = res.data.filter(item => (\r\n                (item.itemOwner !== id)\r\n            ))\r\n            // filters out already seen items\r\n            API.getItem(itemData).then((response) => {\r\n                const seenItems = response.data.seenItems\r\n                for (let i = 0; i < seenItems.length; i++) {\r\n                    for (let p = 0; p < notUserItemsArray.length; p++) {\r\n                        if (seenItems[i] === notUserItemsArray[p]._id) {\r\n                            notUserItemsArray.splice(p, 1)\r\n                            if (notUserItemsArray.length === 0) {\r\n                                setNoMoreItems(true)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // moves items that like current item to front of list\r\n                for (let q = 0; q < notUserItemsArray.length; q++) {\r\n                    if (notUserItemsArray[q].likesItems.includes(itemData)) {\r\n                        notUserItemsArray.unshift(notUserItemsArray.splice(q, 1)[0])\r\n                    }\r\n                }\r\n\r\n                API.getItem(itemData).then((userItemRes) => {\r\n                    const sortedNotUserItems = []\r\n                     // Sorting by Location\r\n                     for (let v = 0; v < notUserItemsArray.length; v++) {\r\n                         const notUserLat = notUserItemsArray[v].itemLocation[0]\r\n                         const notUserLong = notUserItemsArray[v].itemLocation[1]\r\n                         const userLat = userItemRes.data.itemLocation[0]\r\n                         const userLong = userItemRes.data.itemLocation[1]\r\n\r\n                        getDistanceFromLatLonInKm(notUserLat, notUserLong, userLat, userLong).then((distanceResponse) => {\r\n                            \r\n                            if (distanceResponse < distanceBoundary) {\r\n                                console.log('push')\r\n                                sortedNotUserItems.push(notUserItemsArray[v])\r\n                            }\r\n                            // no more items triggers Modal\r\n                            setTimeout(function () {\r\n                                if (sortedNotUserItems.length === 0) {\r\n                                    console.log(sortedNotUserItems)\r\n                                    setNoMoreItems(true)\r\n                                }\r\n                                else {\r\n                                    setActivatePreloader(false)\r\n                                    setNotUserItems(sortedNotUserItems)\r\n                                    setCurrentItem(sortedNotUserItems[imageNumber])\r\n                                }\r\n                            }, 1000)\r\n                        })\r\n                     }\r\n                })\r\n            })\r\n        })\r\n    }, [distanceBoundary])\r\n\r\n    // Haversine Formula\r\n    const getDistanceFromLatLonInKm = async(lat1,lon1,lat2,lon2) => {\r\n        var R = 6371; // Radius of the earth in km\r\n        var dLat = deg2rad(lat2-lat1);  // deg2rad below\r\n        var dLon = deg2rad(lon2-lon1); \r\n        var a = \r\n          Math.sin(dLat/2) * Math.sin(dLat/2) +\r\n          Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * \r\n          Math.sin(dLon/2) * Math.sin(dLon/2)\r\n          ; \r\n        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \r\n        var d = R * c; // Distance in km\r\n        return (d / 1.609344); // Convert to Miles\r\n    }\r\n      \r\n    function deg2rad(deg) {\r\n        return deg * (Math.PI/180)\r\n    }\r\n\r\n    // runs every time the imageNumber state changes\r\n    useEffect(() => {\r\n        if (preventFirstRender === true) {\r\n            if (imageNumber === notUserItems.length) {\r\n                setNoMoreItems(true)\r\n            }\r\n            else {\r\n                setCurrentItem(notUserItems[imageNumber])\r\n            }\r\n        }\r\n    }, [imageNumber])\r\n\r\n    function handleItemNotLike() {\r\n        preventFirstRender = true\r\n        API.getItem(itemData).then((res) => {\r\n            const updatedItemData = {\r\n                seenItems: res.data.seenItems\r\n            }\r\n            updatedItemData.seenItems.push(currentItem._id)\r\n            API.updateItem(itemData, updatedItemData).then((res) => {\r\n                setImageNumber(imageNumber + 1)\r\n            })\r\n        })\r\n    }\r\n\r\n    function handleItemLike() {\r\n        preventFirstRender = true\r\n        // get item data, add to it, then do a put. Then do it for second item\r\n        API.getItem(itemData).then((userItemResponse) => {\r\n            const updatedItemData = {\r\n                seenItems: userItemResponse.data.seenItems,\r\n                likesItems: userItemResponse.data.likesItems\r\n            }\r\n            updatedItemData.seenItems.push(currentItem._id)\r\n            updatedItemData.likesItems.push(currentItem._id)\r\n            API.updateItem(itemData, updatedItemData).then((res) => {\r\n                API.getItem(currentItem._id).then((currentItemResponse) => {\r\n                    console.log(currentItemResponse)\r\n                    const updatedItemData1 = {\r\n                        likesFromItems: currentItemResponse.data.likesFromItems\r\n                    }\r\n                    updatedItemData1.likesFromItems.push(itemData)\r\n                    API.updateItem(currentItem._id, updatedItemData1).then((res) => {\r\n                        // once updated, check if there is a match\r\n                        for (let i = 0; i < userItemResponse.data.likesFromItems.length; i++) {\r\n                            if (userItemResponse.data.likesFromItems[i] === currentItem._id) {\r\n                                setItIsAMatch(true)\r\n                                setModalMatchImage1(userItemResponse.data.imageURL)\r\n                                setModalMatchImage2(currentItem.imageURL)\r\n                                const matchData = {\r\n                                    item1Id: itemData,\r\n                                    item1Owner: userData.googleId,\r\n                                    item1Photo: userItemResponse.data.imageURL,\r\n                                    item1Name: userItemResponse.data.itemName,\r\n                                    item2Id: currentItem._id,\r\n                                    item2Owner: currentItemResponse.data.itemOwner,\r\n                                    item2Photo: currentItemResponse.data.imageURL,\r\n                                    item2Name: currentItemResponse.data.itemName,\r\n                                    item2Read: false\r\n                                }\r\n                                API.postMatch(matchData).then((matchRes) => {\r\n                                })\r\n                            }\r\n                        }\r\n                        setImageNumber(imageNumber + 1)\r\n                    })\r\n                })\r\n            })\r\n        })\r\n    }\r\n\r\n    function handleDistanceChange(e) {\r\n        setDistanceBoundary(e)\r\n    }\r\n\r\n    const x = useMotionValue(0)\r\n    const background = useTransform(\r\n        x,\r\n        [-100, 0, 100],\r\n        [\"#FF0000\", \"#FFFFFF\", \"#00FF00\"]\r\n    )\r\n\r\n    function processDragInfo(x, y) {\r\n        if ((startingDragPoint * 1.8) < x) {\r\n            handleItemLike()\r\n            setActivateCheckMark(true)\r\n            setTimeout(function () {\r\n                setActivateCheckMark(false)\r\n              }, 700)\r\n            \r\n        }\r\n        else if ((startingDragPoint / 2) > x) {\r\n            handleItemNotLike()\r\n            setActivateRedXMark(true)\r\n            setTimeout(function () {\r\n                setActivateRedXMark(false)\r\n              }, 700)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div style={{minHeight: \"95vh\"}}>\r\n            { redirect ? (<Redirect push to=\"/\" />) : null}\r\n            <div className=\"container center-align\" style={{ marginTop: \"20px\" }}>\r\n                <Row>\r\n                    <Col m={3} l={3}></Col>\r\n                    <Col s={12} m={6} l={6}>\r\n                        <motion.div style={{ background }} className=\"swipBackground\">\r\n                            <motion.div\r\n                            drag=\"x\"\r\n                            dragConstraints={{ left: 0, right: 0 }}\r\n                            style={{ x }}\r\n                            onDragStart={\r\n                                (event, info) => startingDragPoint = (info.point.x)\r\n                            }\r\n                            onDragEnd={\r\n                                (event, info) => processDragInfo(info.point.x, info.point.y)\r\n                            }\r\n                            >\r\n                                <Row>\r\n                                    <Col s={12}>\r\n                                        <SwipingCard itemInfo={currentItem}/>\r\n                                    </Col>\r\n                                </Row>\r\n                                \r\n                            </motion.div>\r\n                        </motion.div>  \r\n                    </Col>\r\n                    <Col m={3} l={3}></Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col s={4} m={5} l={5.5}></Col>\r\n                    <Col s={1}>\r\n                    <Preloader\r\n                        className=\"preloaderLocation\"\r\n                        active={activatePreloader}\r\n                        color=\"blue\"\r\n                        flashing={false}\r\n                        size=\"big\"\r\n                        />\r\n                    </Col>\r\n                    <Col s={6}></Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col m={3} l={3} xl={1}></Col>\r\n                    <Col s={12} m={6} l={6} xl={9}>\r\n                        <h4 style={{ color: \"#025159\"}}>Set Distance</h4>\r\n                    </Col>\r\n                    <Col m={3} l={3} xl={2}></Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col m={3} l={3}></Col>\r\n                    <Col s={12} m={6} l={6}>\r\n                        <DistanceSlider setDistanceBoundary={handleDistanceChange} distanceBoundary={distanceBoundary}/>\r\n                    </Col>\r\n                    <Col m={3} l={3}></Col>\r\n                </Row>\r\n                <Row style={{height: \"100px\"}}>\r\n                    <Col m={3} l={3}></Col>\r\n                    <Col s={12} m={6} l={6}>\r\n                        {/* check Mark */}\r\n                        {activateCheckMark ? ( <motion.img \r\n                            className=\"greenCheck\"\r\n                            src=\"../../img/greenCheckMark.png\"\r\n                            animate={{ rotate: 360 }}\r\n                            transition={{ duration: .5 }}\r\n                            />) : null}\r\n                         {activateRedXMark ? ( <motion.img \r\n                            className=\"greenCheck\"\r\n                            src=\"../../img/redXMark.png\"\r\n                            transition={{ duration: .5 }}\r\n                            />) : null}\r\n                    </Col>\r\n                    <Col m={3} l={3}></Col>\r\n                    \r\n                </Row>\r\n\r\n            </div>\r\n            {/* No more items to swap modal */}\r\n            <Modal\r\n                open={noMoreItems}\r\n                className='center-align modal'\r\n                actions={[]}\r\n                options={{\r\n                    dismissible: false\r\n                }}\r\n                >\r\n                <h3>No more items available!</h3>\r\n                <br></br>\r\n                <div>Add a new item, switch items to swap with, or try back later!</div>\r\n                <br></br><br></br>\r\n                <a href={`/profile/${userData.googleId}`}><Button id=\"modalBtn\">Back to my Profile</Button></a>\r\n                <br></br>\r\n            </Modal>\r\n            \r\n            {/* It's a match! */}\r\n            <Modal\r\n                open={itIsAMatch}\r\n                className='center-align'\r\n                actions={[]}\r\n                options={{\r\n                    dismissible: false\r\n                }}\r\n                >\r\n                <h3 className=\"match\">It's a match!</h3>\r\n                <img src={modalMatchImage1} className=\"circle swapItemImage\" alt=\"user item\"></img>\r\n                <img src={modalMatchImage2} className=\"circle swapItemImage\" alt=\"other item\"></img>\r\n                <br></br>\r\n                <div>Head to the chat page or continue swipping!</div>\r\n                <br></br><br></br>\r\n                <a href={`/chat/${userData.googleId}`}><Button id=\"modalBtn\">Chat Page</Button></a>\r\n                <br></br><br></br>\r\n                <a><Button id=\"modalBtn\" modal=\"close\">Continue</Button></a>\r\n                <br></br>   \r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Swipping;","import React, { useEffect, useState } from \"react\";\r\nimport 'materialize-css';\r\nimport { useLocation, Redirect } from 'react-router-dom'\r\nimport { Navbar, Icon, NavItem } from \"react-materialize\";\r\nimport Badge from '@material-ui/core/Badge';\r\nimport API from \"../../utils/API\";\r\nimport \"./style.css\";\r\n\r\nconst CustomNavbar = (props) => {\r\nconst [ newText, setNewText ] = useState(false)\r\nconst [ redirect, setRedirect ] = useState(false)\r\nconst [userData, setUserData] = useState({})\r\nconst [centerLogo, setCenterLogo] = useState(false)\r\nconst [ deleteNavbarLinks, setDeleteNavbarLinks ] = useState(false)\r\nconst { pathname } = useLocation();\r\nconst pathway = pathname.split(\"/\")\r\nconst id = pathway[pathway.length - 1]\r\n\r\nuseEffect(() => {\r\n    checkForNewTexts()\r\n    setInterval(function() {\r\n        checkForNewTexts()\r\n    }, 5000)\r\n}, [userData])\r\n\r\nuseEffect(() => {\r\n  if (pathway[1] === 'chat') {\r\n    setCenterLogo(true)\r\n  }\r\n  else {\r\n    setCenterLogo(false)\r\n  }\r\n  if (pathname === '/') {\r\n    setDeleteNavbarLinks(true)\r\n  }\r\n  else {\r\n    setDeleteNavbarLinks(false)\r\n  }\r\n}, [pathname])\r\n\r\nuseEffect(() => {\r\n  if (id) {\r\n    API.getUser(id).then((res) => {\r\n      if (res.data.length === 0) {\r\n        setRedirect(true)\r\n      }\r\n      else {\r\n        const newUser = {\r\n            email: res.data[0].email,\r\n            firstName: res.data[0].firstName,\r\n            googleId: res.data[0].googleId,\r\n            image: res.data[0].image,\r\n            lastName: res.data[0].lastName,\r\n            listedItems: res.data[0].listedItems,\r\n            rating: res.data[0].rating\r\n        }\r\n        setUserData(newUser)\r\n      }\r\n    })\r\n  }\r\n}, [pathname])\r\n\r\nfunction checkForNewTexts() {\r\n    let trueCount = 0;\r\n    if (userData) {\r\n        API.getUserMatches(userData.googleId).then((response) => {\r\n            for (let i = 0; i < response.data.length; i++) {\r\n                if ((response.data[i].item1Owner === userData.googleId) && (response.data[i].item1NewText === true)) {\r\n                    trueCount++\r\n                }\r\n                else if ((response.data[i].item2Owner === userData.googleId) && (response.data[i].item2NewText === true)) {\r\n                    trueCount++\r\n                }\r\n            }\r\n            if (trueCount === 0) {\r\n                setNewText(false)\r\n            }\r\n            else {\r\n                setNewText(true)\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n  if (deleteNavbarLinks === true) {\r\n    return (\r\n      <div>\r\n        {redirect ? <Redirect push to=\"/\" /> : null}\r\n      <Navbar\r\n      alignLinks=\"right\"\r\n      brand={\r\n        <a className=\"brand-logo\" href=\"/\">\r\n          <img src=\"./../img/swapifyLogoTopDark-vector.png\" height=\"125\" alt=\"swapify logo\"/>\r\n        </a>\r\n      }\r\n      centerChildren\r\n      className=\"navbar transparent z-depth-0\"\r\n      id=\"mobile-nav\"\r\n      menuIcon={\r\n        newText ? (\r\n          <Badge variant=\"dot\" color=\"secondary\" className=\"chatBadge\">\r\n            <Icon className=\"swapIcon\">menu</Icon>\r\n          </Badge>\r\n        ) : (\r\n          <Badge color=\"secondary\" className=\"chatBadge\">\r\n            <Icon className=\"swapIcon\">menu</Icon>\r\n          </Badge>\r\n        )\r\n      }\r\n      options={{\r\n        draggable: true,\r\n        edge: \"right\",\r\n        inDuration: 250,\r\n        onCloseEnd: null,\r\n        onCloseStart: null,\r\n        onOpenEnd: null,\r\n        onOpenStart: null,\r\n        outDuration: 200,\r\n        preventScrolling: true,\r\n      }}\r\n    >\r\n      \r\n    </Navbar>\r\n    </div>\r\n    )\r\n  }\r\n  else if (centerLogo === true) {\r\n    return (\r\n      <div>\r\n        {redirect ? <Redirect push to=\"/\" /> : null}\r\n      <Navbar\r\n      alignLinks=\"right\"\r\n      brand={\r\n        <a className=\"brand-logo\" href=\"/\">\r\n          <img src=\"./../img/swapifyLogoTopDark-vector.png\" height=\"125\" alt=\"swapify logo\"/>\r\n        </a>\r\n      }\r\n      centerLogo\r\n      centerChildren\r\n      className=\"navbar transparent z-depth-0\"\r\n      id=\"mobile-nav\"\r\n      menuIcon={\r\n        newText ? (\r\n          <Badge variant=\"dot\" color=\"secondary\" className=\"chatBadge\">\r\n            <Icon className=\"swapIcon\">menu</Icon>\r\n          </Badge>\r\n        ) : (\r\n          <Badge color=\"secondary\" className=\"chatBadge\">\r\n            <Icon className=\"swapIcon\">menu</Icon>\r\n          </Badge>\r\n        )\r\n      }\r\n      options={{\r\n        draggable: true,\r\n        edge: \"right\",\r\n        inDuration: 250,\r\n        onCloseEnd: null,\r\n        onCloseStart: null,\r\n        onOpenEnd: null,\r\n        onOpenStart: null,\r\n        outDuration: 200,\r\n        preventScrolling: true,\r\n      }}\r\n    >\r\n      <NavItem\r\n        tooltip=\"Add Item\"\r\n        href={`/createItem/${userData.googleId}`}\r\n        className=\"addItem\"\r\n        alt-text=\"add item\"\r\n        node=\"button\"\r\n      >\r\n        <Icon tooltip=\"Add Item\" node=\"button\">\r\n          add_circle\r\n        </Icon>\r\n      </NavItem>\r\n      <NavItem href={`/profile/${userData.googleId}`} className=\"profile\">\r\n        <Icon>person</Icon>\r\n      </NavItem>\r\n      <NavItem href={`/chat/${userData.googleId}`} className=\"swapIconWrapper\">\r\n        {newText ? (\r\n          <Badge variant=\"dot\" color=\"secondary\" className=\"chatBadge\">\r\n            <Icon className=\"swapIcon\">all_inclusive</Icon>\r\n          </Badge>\r\n        ) : (\r\n          <Badge color=\"secondary\" className=\"chatBadge\">\r\n            <Icon className=\"swapIcon\">all_inclusive</Icon>\r\n          </Badge>\r\n        )}\r\n      </NavItem>\r\n    </Navbar>\r\n    </div>\r\n    )\r\n  }\r\n  else {\r\n    return (\r\n      <div>\r\n        {redirect ? <Redirect push to=\"/\" /> : null}\r\n    <Navbar\r\n      alignLinks=\"right\"\r\n      brand={\r\n        <a className=\"brand-logo\" href=\"/\">\r\n          <img src=\"../../img/swapifyLogoTopDark-vector.png\" height=\"125\" alt=\"swapify logo\"/>\r\n        </a>\r\n      }\r\n      centerChildren\r\n      className=\"navbar transparent z-depth-0\"\r\n      id=\"mobile-nav\"\r\n      menuIcon={\r\n        newText ? (\r\n          <Badge variant=\"dot\" color=\"secondary\" className=\"chatBadge\">\r\n            <Icon className=\"swapIcon\">menu</Icon>\r\n          </Badge>\r\n        ) : (\r\n          <Badge color=\"secondary\" className=\"chatBadge\">\r\n            <Icon className=\"swapIcon\">menu</Icon>\r\n          </Badge>\r\n        )\r\n      }\r\n      options={{\r\n        draggable: true,\r\n        edge: \"right\",\r\n        inDuration: 250,\r\n        onCloseEnd: null,\r\n        onCloseStart: null,\r\n        onOpenEnd: null,\r\n        onOpenStart: null,\r\n        outDuration: 200,\r\n        preventScrolling: true,\r\n      }}\r\n    >\r\n      <NavItem\r\n        tooltip=\"Add Item\"\r\n        href={`/createItem/${userData.googleId}`}\r\n        className=\"addItem\"\r\n        alt-text=\"add item\"\r\n        node=\"button\"\r\n      >\r\n        <Icon tooltip=\"Add Item\" node=\"button\">\r\n          add_circle\r\n        </Icon>\r\n      </NavItem>\r\n      <NavItem href={`/profile/${userData.googleId}`} className=\"profile\">\r\n        <Icon>person</Icon>\r\n      </NavItem>\r\n      <NavItem href={`/chat/${userData.googleId}`} className=\"swapIconWrapper\">\r\n        {newText ? (\r\n          <Badge variant=\"dot\" color=\"secondary\" className=\"chatBadge\">\r\n            <Icon className=\"swapIcon\">all_inclusive</Icon>\r\n          </Badge>\r\n        ) : (\r\n          <Badge color=\"secondary\" className=\"chatBadge\">\r\n            <Icon className=\"swapIcon\">all_inclusive</Icon>\r\n          </Badge>\r\n        )}\r\n      </NavItem>\r\n    </Navbar>\r\n    </div>\r\n    )\r\n  }\r\n \r\n};\r\n\r\nexport default CustomNavbar;\r\n","import React from \"react\";\r\nimport \"materialize-css\";\r\nimport { Footer } from \"react-materialize\";\r\nimport \"./style.css\";\r\n\r\nconst CustomFooter = (props) => {\r\n  return (\r\n    <div className=\"stickyFooter center\">\r\n      <Footer\r\n      copyrights=\"&copy; 2021 Swapify\">\r\n      </Footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CustomFooter;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\nimport { useLocation } from 'react-router-dom'\r\nimport Welcome from \"./pages/welcome\"\r\nimport Profile from \"./pages/profile\"\r\nimport Chat from \"./pages/chat\"\r\nimport createItem from \"./pages/createItem\"\r\nimport Swipping from \"./pages/swipping\"\r\nimport CustomNavbar from './components/Navbar';\r\nimport CustomFooter from './components/Footer';\r\nimport API from \"./utils/API\"\r\nimport { Button, Modal } from 'react-materialize';\r\nimport Rating from 'react-rating'\r\nimport \"./appStyle.css\"\r\n\r\nfunction App() {\r\n  const { pathname } = useLocation();\r\n  const pathway = pathname.split(\"/\")\r\n  const id = pathway[pathway.length - 1]\r\n  const [openSwapModal, setOpenSwapModal] = useState(false)\r\n  const [openMatchModal, setOpenMatchModal] = useState(false)\r\n  const [modalImage, setModalImage] = useState('');\r\n  const [modalID, setModalID] = useState('')\r\n  const [modalMatchImage1, setModalMatchImage1] = useState('')\r\n  const [modalMatchImage2, setModalMatchImage2] = useState('')\r\n  const [openRateModal, setOpenRateModal] = useState(false)\r\n  const [rating, setRating] = useState(0)\r\n  const [deletedItemUserId, setDeletedItemUserId] = useState('')\r\n  const [backgroundClass, setBackgroundClass] = useState(\"welcomeBackground\")\r\n  \r\n  \r\n  setInterval(function () {\r\n    if (id) {\r\n      API.getUserItems(id).then((response) => {\r\n        for (let i = 0; i < response.data.length; i++) {\r\n          if (response.data[i].deleteItem !== 'false') {\r\n            setDeletedItemUserId(response.data[i].deleteItem)\r\n            setModalImage(response.data[i].imageURL)\r\n            setModalID(response.data[i]._id)\r\n            setOpenSwapModal(true)\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }, 5000)\r\n\r\n  setInterval(function () {\r\n    if (id) {\r\n      API.getUserMatches(id).then((response) => {\r\n          // checks if matches have been read or not by user2 (the user that was not swipping when the match was made)\r\n          for (let i = 0; i < response.data.length; i++) {\r\n              if ((response.data[i].item2Owner == id) && (response.data[i].item2Read === false)) {\r\n                  const matchData = {\r\n                      item2Read: true\r\n                  }\r\n                  API.updateUserMatch(response.data[i]._id, matchData).then((matchPutResponse) => {\r\n                      setOpenMatchModal(true)\r\n                      setModalMatchImage1(response.data[i].item1Photo)\r\n                      setModalMatchImage2(response.data[i].item2Photo)\r\n                  })\r\n              }\r\n          }\r\n      })\r\n    }\r\n  }, 5000)\r\n\r\n  function deleteItem() {\r\n    API.deleteItem(modalID).then((res) => {\r\n      setOpenRateModal(true)\r\n    })\r\n  }\r\n\r\n  function keepItem() {\r\n    const updatedItem = {\r\n      deleteItem: false\r\n    }\r\n    API.updateItem(modalID, updatedItem).then((res) => {\r\n      setOpenRateModal(true)\r\n    })\r\n  }\r\n\r\n  function submitRating() {\r\n    API.getUser(deletedItemUserId).then((res) => {\r\n      console.log(res.data[0].rating)\r\n      const ratingArray = res.data[0].rating\r\n      ratingArray.push(rating)\r\n      const newUserRating = {\r\n          rating: ratingArray\r\n      }\r\n      API.updateUser(deletedItemUserId, newUserRating).then((res) => {\r\n          window.location.reload();\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (pathname === \"/\") {\r\n      setBackgroundClass(\"welcomeBackground\")\r\n    }\r\n    else if (pathway[1] === \"profile\") {\r\n      setBackgroundClass('profileBackground')\r\n    }\r\n    else if (pathway[1] === \"chat\") {\r\n      setBackgroundClass(\"chatBackground\")\r\n    }\r\n    else if (pathway[1] === \"createItem\") {\r\n      setBackgroundClass('createItemBackground')\r\n    }\r\n    else if (pathway[1] === \"swipping\") {\r\n      setBackgroundClass('swipingBackground')\r\n    }\r\n  }, [pathname])\r\n\r\n  return (\r\n    <div className={backgroundClass}>\r\n      <CustomNavbar></CustomNavbar>\r\n      <Route exact path=\"/\" component={Welcome} />\r\n      <Route path=\"/profile/:id\" component={Profile} />\r\n      <Route exact path=\"/createItem/:id\" component={createItem} />\r\n      <Route exact path=\"/swipping/:item/:id\" component={Swipping} />\r\n      <Route exact path=\"/chat/:id\" component={Chat} />\r\n      <Route exact path=\"/:anything\" component={Welcome} />\r\n      {window.location.pathname.includes('/chat/') ? null : <CustomFooter />}  \r\n      {/* Modal for when other user presses 'swap items' button */}\r\n      <Modal\r\n        open={openSwapModal}\r\n        className='center-align'\r\n        actions={[]}\r\n        options={{\r\n          dismissible: false\r\n        }}>\r\n        <h3>Congrats!</h3>\r\n        <img src={modalImage} className=\"circle swapItemImage\"></img>\r\n        <br></br>\r\n        <div>Another user has alerted us that you have swapped items with them.</div>\r\n        <div>If you confirm, your item will be deleted from Swapify.</div>\r\n        <div>If you deny, you can continue swapping with your item.</div>\r\n        <br></br>\r\n        <a><Button id=\"modalBtn\" onClick={deleteItem} modal=\"close\">Confirm</Button></a>\r\n        <br></br><br></br>\r\n        <a><Button id=\"modalBtn\" onClick={keepItem} modal=\"close\">Deny</Button></a>\r\n      </Modal>\r\n      {/* Match Alert Modal */}\r\n      <Modal\r\n        open={openMatchModal}\r\n        className='center-align'\r\n        >\r\n        <h3>Congrats!</h3>\r\n        <h3>You have a new Match!</h3>\r\n        <img src={modalMatchImage1} className=\"circle swapItemImage\"></img>\r\n        <img src={modalMatchImage2} className=\"circle swapItemImage\"></img>\r\n        <br></br>\r\n        <div>Go to the Chat Page to make the swap!</div>\r\n        <br></br>\r\n      </Modal>\r\n\r\n      {/* Rate User */}\r\n      <Modal\r\n          open={openRateModal}\r\n          className='center-align'\r\n          actions={[]}\r\n          options={{\r\n          dismissible: false\r\n          }}>\r\n          <h3>Congrats on your Swap!</h3>\r\n          <br></br>\r\n          <div>Would you like to rate the other user?</div>\r\n          <br></br>\r\n          <Rating\r\n              emptySymbol={<i className=\"material-icons\">star_border</i>}\r\n              fullSymbol={<i className=\"material-icons\">star</i>}\r\n              onChange={(e) => setRating(e)}\r\n          ></Rating>\r\n          <br></br><br></br>\r\n          <a><Button id=\"modalBtn\" onClick={submitRating} modal=\"close\">Submit Rating</Button></a>\r\n          <br></br><br></br>\r\n          <a><Button id=\"modalBtn\" modal=\"close\">No Thanks</Button></a>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (!isLocalhost) {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      } else {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log(\"New content is available; please refresh.\");\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get(\"content-type\").indexOf(\"javascript\") === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport { BrowserRouter as Router } from 'react-router-dom'\r\nimport registerServiceWorker from \"./registerServiceWorker\";\r\nimport 'materialize-css';\r\nimport 'materialize-css/dist/css/materialize.min.css'\r\nimport 'materialize-css/dist/js/materialize.min.js'\r\n\r\nReactDOM.render(<React.StrictMode>\r\n    <Router>\r\n      <App />\r\n    </Router>\r\n</React.StrictMode>, document.getElementById(\"root\"));\r\nregisterServiceWorker();"],"sourceRoot":""}