(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{106:function(e,t,a){e.exports=a(195)},129:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},181:function(e,t,a){},182:function(e,t,a){},183:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},189:function(e,t,a){},190:function(e,t,a){},191:function(e,t,a){},192:function(e,t,a){},195:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(21),r=a.n(c),o=a(5),i=a(12),m=a(22),s=a.n(m),u=a(38),d=a(16),g=a.n(d),E=function(e){return g.a.get("/api/users/"+e)},h=function(e){return g.a.post("/api/users",e)},f=function(e){return g.a.post("/api/items",e)},p=function(e){return g.a.get("/api/items/user/"+e)},b=function(){return g.a.get("/api/items/")},I=function(e,t){return g.a.put("/api/users/"+e,t)},v=function(e,t){return g.a.put("/api/items/"+e,t)},N=function(e){return g.a.put("/api/items/"+e)},w=function(e){return g.a.post("/api/matches",e)},O=function(e){return g.a.get("/api/matches/user/"+e)},y=function(e,t){return g.a.put("/api/matches/"+e,t)},j=function(e){console.log(e),localStorage.setItem("itemData",JSON.stringify(e))},S=function(e){return g.a.get("/api/matches/"+e)},C=function(e){return g.a.delete("/api/matches/all/"+e)},x=function(e){return g.a.delete("/api/items/"+e)},k=function(e){return g.a.delete("/api/matches/"+e)},B=a(97),T=a.n(B),R=(a(55),a(129),a(212)),_=a(3);var D=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),m=Object(o.a)(r,2),d=m[0],g=m[1],f=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.profileObj,g(a.googleId),n={email:a.email,firstName:a.givenName,lastName:a.familyName,image:a.imageUrl,googleId:a.googleId,listedItems:[]},E(a.googleId).then((function(e){e.data.length>0||h(n),c(!0)})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"welcomeBackground"},l.a.createElement("div",{className:"hero-image"},l.a.createElement("div",{className:"container center"},l.a.createElement("div",{className:"row opening"},l.a.createElement(R.a.h1,{animate:{y:0,opacity:1},initial:{y:-250,opacity:0},transition:{delay:.5,duration:1,type:"spring",stiffness:150}},"Recycle your life!")),l.a.createElement("div",{className:"row"},l.a.createElement(R.a.img,{animate:{rotateZ:1080,opacity:1,scale:1},initial:{opacity:0,scale:0},transition:{delay:.2,duration:1.8},whileHover:{rotateZ:180},src:"./../img/swapifyLogo-S-vector.png",alt:"Swapify S Logo",class:"responsive-img"})),l.a.createElement("div",{className:"row login"},a?l.a.createElement(i.a,{push:!0,to:"/profile/".concat(d)}):null,l.a.createElement(T.a,{className:"loginBtn",clientId:"582713087977-59mpjc19jph6a912mbsb4l41ak8msu56.apps.googleusercontent.com",buttonText:"Get Swapp'n!",onSuccess:f,onFailure:function(e){console.log("Google Sign in was unsuccessful"),alert("please try logging in again"),console.log(e)},cookiePolicy:"single_host_origin",isSignedIn:!1,render:function(e){return l.a.createElement(R.a.a,{animate:{opacity:1},initial:{opacity:0,scale:0},transition:{delay:2,duration:1}},l.a.createElement(_.Button,{large:!0,className:"loginBtn z-depth-3",node:"a",style:{marginRight:"5px"},waves:"light",onClick:e.onClick},"Start Swap'n!"))}})))),l.a.createElement("div",{className:"container center "},l.a.createElement("div",{className:"row howTo"},l.a.createElement(R.a.h2,{animate:{opacity:1},initial:{opacity:0},transition:{delay:2.5,duration:2}},"How Swapify works:"," ")),l.a.createElement(R.a.div,{className:"row howToRow",animate:{opacity:1},initial:{opacity:0},transition:{delay:2.5,duration:2},whileHover:{}},l.a.createElement(R.a.div,{animate:{opacity:1},initial:{opacity:0},whileHover:{scale:1.2},className:"row"},l.a.createElement("div",{className:"col l4 s12 center symbol1"},l.a.createElement(R.a.img,{src:"./../img/profileSymbol.png",alt:"Swapify Logo",height:"100px"})),l.a.createElement("div",{className:"col l6 s12 center"},l.a.createElement(R.a.h4,{animate:{opacity:1,x:0},initial:{opacity:0,x:1e3},transition:{delay:3,duration:1},className:"how1"},"Sign into your Profile"))),l.a.createElement(R.a.div,{animate:{opacity:1},initial:{opacity:0},whileHover:{scale:1.2},className:"row"},l.a.createElement("div",{className:"col l4 s12 center symbol2"},l.a.createElement(R.a.img,{src:"./../img/addItemSymbol.png",alt:"Swapify Logo",height:"100px"})),l.a.createElement("div",{className:"col l6 s12 center"},l.a.createElement(R.a.h4,{animate:{opacity:1,x:1},initial:{opacity:0,x:1e3},transition:{delay:3,duration:1},className:"how2"},"Add a new item to swap"))),l.a.createElement(R.a.div,{animate:{opacity:1},initial:{opacity:0},whileHover:{scale:1.2},className:"row"},l.a.createElement("div",{className:"col l4 s12 center symbol3"},l.a.createElement(R.a.img,{src:"./../img/swipeSymbol.png",alt:"Swapify Logo",height:"100px"})),l.a.createElement("div",{className:"col l6 s12 center"},l.a.createElement(R.a.h4,{animate:{opacity:1,x:0},initial:{opacity:0,x:1e3},transition:{delay:3,duration:1},className:"how3"},"Browse & swipe to match"))),l.a.createElement(R.a.div,{animate:{opacity:1},initial:{opacity:0},whileHover:{scale:1.2},className:"row"},l.a.createElement("div",{className:"col l4 s12 center symbol4"},l.a.createElement(R.a.img,{src:"./../img/swapSymbol2.png",alt:"Swapify Logo",height:"100px"})),l.a.createElement("div",{className:"col l6 s12 center"},l.a.createElement(R.a.h4,{animate:{opacity:1,x:0},initial:{opacity:0,x:1e3},transition:{delay:3,duration:1},className:"how4"},"Chat and swap with matches"))))))},P=a(30),A=a(67),M=(a(175),function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],r=a[1];return l.a.createElement("div",null,l.a.createElement("div",{class:"card itemCard"},l.a.createElement("div",{class:"card-image"},l.a.createElement("img",{src:e.imageURL,className:"itemCardImage",draggable:"false"}),l.a.createElement("span",{class:"card-title itemCardTitle truncate",style:{height:"70px",lineHeight:"70px",paddingLeft:"0px",fontFamily:"proxima-nova, sans-serif",fontWeight:"700",fontStyle:"normal",fontSize:"20px",color:"#025159"}},e.itemName)),l.a.createElement("div",{class:"card-content center-align"},l.a.createElement("a",{href:"/swipping/".concat(e.id,"/").concat(e.userData.googleId)},l.a.createElement(_.Button,{id:"modalBtn",className:"cardSwapButton",onClick:function(){return j(e.id)}},l.a.createElement("div",{className:"swapText"},"Swap"))),l.a.createElement("br",null),l.a.createElement(_.Button,{style:{marginTop:"10px"},className:"cardDeleteButton",onClick:function(){return r(!0)}},l.a.createElement("i",{class:"material-icons deleteIcon"},"delete")))),l.a.createElement(_.Modal,{open:c,className:"center-align modal",actions:[],options:{dismissible:!1}},l.a.createElement("h3",null,"Are you sure you want to do that?"),l.a.createElement("br",null),l.a.createElement("div",null,"If you delete this item it will be gone forever!"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(_.Button,{id:"modalBtn",modal:"close",onClick:function(){x(e.id).then((function(t){e.loadItems()}))}},"Delete")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(_.Button,{id:"modalBtn",onClick:function(){return r(!1)},modal:"close"},"Cancel")),l.a.createElement("br",null)))}),L=a(99),F=a.n(L);a(176);var U=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),m=Object(o.a)(r,2),s=(m[0],m[1]),u=Object(n.useState)({email:"",firstName:"",googleId:"",image:"",lastName:"",listedItems:[],rating:[]}),d=Object(o.a)(u,2),g=d[0],h=d[1],f=Object(n.useState)([""]),b=Object(o.a)(f,2),I=(b[0],b[1]),v=Object(i.g)().id,N=Object(n.useState)(0),w=Object(o.a)(N,2),y=w[0],j=w[1],S=[];function C(){var e=[];a.forEach((function(t,a){e.push(t.imageURL)})),0!=a.length&&(console.log(e),I(e))}function x(){p(g.googleId).then((function(e){c(e.data)})),O(g.googleId).then((function(e){e.data.forEach((function(t){if(t.item1Owner===g.googleId){var a={userItemId:t.item1Id,userId:t.item1Owner,userItemPhoto:t.item1Photo,userItemName:t.item1Name,otherItemId:t.item2Id,otherUser:t.item2Owner,otherItemImage:t.item2Photo,otherItemName:t.item2Name};S.push(a),e.data.length===S.length&&s(S)}else{var n={userItemId:t.item2Id,userId:t.item2Owner,userItemPhoto:t.item2Photo,userItemName:t.item2Name,otherItemId:t.item1Id,otherUser:t.item1Owner,otherItemImage:t.item1Photo,otherItemName:t.item1Name};S.push(n),e.data.length===S.length&&s(S)}}))}))}return Object(n.useEffect)((function(){x(),C(),E(v).then((function(e){var t={email:e.data[0].email,firstName:e.data[0].firstName,googleId:e.data[0].googleId,image:e.data[0].image,lastName:e.data[0].lastName,listedItems:e.data[0].listedItems,rating:e.data[0].rating};if(h(t),0===e.data[0].rating.length)j(0);else{for(var a=0,n=0;n<e.data[0].rating.length;n++)a+=e.data[0].rating[n];j(Math.round(a/e.data[0].rating.length))}}))}),[]),Object(n.useEffect)((function(){x(),C()}),[g]),l.a.createElement("div",null,l.a.createElement("div",{className:"container center-align",style:{marginTop:"20px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col m12 s12 "},l.a.createElement(R.a.img,{animate:{y:1,opacity:1},initial:{y:-50,opacity:0},transition:{delay:.5,duration:.5},alt:"",className:"circle z-depth-3",style:{height:"150px",width:"150px",marginTop:"50px"},src:g.image}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col m12 s12 center-align","data-tip":"Your Swapify rating"},l.a.createElement(R.a.div,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},className:"col m12 s12 center-align"},Array(y).fill().map((function(e,t){return l.a.createElement("i",{className:"material-icons",key:t,style:{color:"#F25D27"}},"star")})),Array(5-y).fill().map((function(e,t){return l.a.createElement("i",{className:"material-icons",key:t,style:{color:"#F25D27"}},"star_border")}))),l.a.createElement(A.a,{place:"bottom",type:"light",effect:"float"}))),l.a.createElement(_.Row,{className:"valign-wrapper"}),l.a.createElement(_.Row,null,l.a.createElement("div",{className:"col m12 s12 "},l.a.createElement(R.a.h2,{animate:{opacity:1},initial:{opacity:0},transition:{duration:1},style:{color:"#03A696"},className:"userName"},g.firstName," ",g.lastName))),l.a.createElement(_.Row,{className:"valign-wrapper"},l.a.createElement(_.Col,{m:8,s:8,className:"right-align"},l.a.createElement("h4",{style:{color:"#025159"}},"Add Item")),l.a.createElement(_.Col,{m:6,s:6,className:"left-align"},l.a.createElement(_.Button,{floating:!0,large:!0,style:{backgroundColor:"#F25D27"}},l.a.createElement(P.b,{to:"/createItem/".concat(g.googleId)},l.a.createElement("i",{className:"material-icons"},"add"))))),l.a.createElement(_.Row,{style:{paddingTop:"10px"}},l.a.createElement("h3",{style:{fontFamily:"lemon",color:"#03A696",paddingBottom:"20px"}},"Your Items"),l.a.createElement(_.Col,{s:12,style:{paddingTop:"50px"}},l.a.createElement(F.a,{arrowLeft:l.a.createElement("div",{style:{fontSize:"30px",paddingRight:"10px"}}," < "),arrowRight:l.a.createElement("div",{style:{fontSize:"30px",paddingLeft:"10px"}}," > "),itemStyle:{paddingLeft:"15px"},itemClassActive:"null",data:a.map((function(e,t){return l.a.createElement(M,{key:t,loadItems:x,imageURL:e.imageURL,itemName:e.itemName,id:e._id,itemDescription:e.itemDescription,userData:g})}))}))),l.a.createElement(_.Row,{style:{height:"400px"}})))},H=(a(177),l.a.createContext({matchId:"",recentText:"",setChat:function(){},setNewText:function(){}})),W=function(e){var t={matchId:e.matchData.matchId},a=Object(n.useContext)(H),c=a.setChat,r=a.chatId,i=Object(n.useState)(!1),m=Object(o.a)(i,2),s=m[0],u=m[1],d=Object(n.useState)(0),g=Object(o.a)(d,2),h=g[0],f=g[1],p=Object(n.useState)(!1),b=Object(o.a)(p,2),I=b[0],v=b[1];function N(){v(!0),console.log(e.matchData)}function w(){v(!1)}return Object(n.useEffect)((function(){c({matchId:e.allMatches.data[0]._id}),E(e.matchData.otherUser).then((function(e){if(0===e.data[0].rating.length)f(0);else{for(var t=0,a=0;a<e.data[0].rating.length;a++)t+=e.data[0].rating[a];f(Math.round(t/e.data[0].rating.length))}}))}),[]),Object(n.useEffect)((function(){r.matchId===e.matchData.matchId?u(!0):u(!1)}),[r]),l.a.createElement("div",null,s?l.a.createElement(_.CollectionItem,{className:"avatar valign-wrapper",style:{backgroundColor:"#D3EEE3"}},l.a.createElement("a",{className:"noHover"},l.a.createElement("img",{alt:"",className:"circle userItemPicture",src:e.yourImageUrl})),l.a.createElement("img",{src:"./../../img/swapO-logo-vector.png",className:"swapSymbol noHover"}),l.a.createElement("a",{className:"noHover"},l.a.createElement("img",{alt:"",className:"circle itemPicture noHover",src:e.imageURL}),l.a.createElement("i",{className:"material-icons ratingStar noHover"},"star"),l.a.createElement("p",{className:"ratingNumber noHover"},h)),l.a.createElement("a",{className:"secondary-content"},l.a.createElement("a",{className:"btn-floating btn-large infoButton",style:{backgroundColor:"#F28705"},onClick:function(){N()}},l.a.createElement("i",{className:"material-icons"},"info"))),l.a.createElement("a",{className:"secondary-content"},e.matchData.newText?l.a.createElement("a",{className:"btn-floating btn-large chatButton pulse",style:{backgroundColor:"#F28705"},onClick:function(){c(t)}},l.a.createElement("i",{className:"material-icons"},"chat")):l.a.createElement("a",{className:"btn-floating btn-large chatButton",style:{backgroundColor:"#F28705"},onClick:function(){c(t)}},l.a.createElement("i",{className:"material-icons"},"chat")))):l.a.createElement(_.CollectionItem,{className:"avatar valign-wrapper"},l.a.createElement("a",{className:"noHover"},l.a.createElement("img",{alt:"",className:"circle userItemPicture ",src:e.yourImageUrl})),l.a.createElement("img",{src:"./../../img/swapO-logo-vector.png",className:"swapSymbol noHover"}),l.a.createElement("a",{className:"noHover"},l.a.createElement("img",{alt:"",className:"circle itemPicture noHover",src:e.imageURL}),l.a.createElement("i",{className:"material-icons ratingStar noHover"},"star"),l.a.createElement("p",{className:"ratingNumber"},h)),l.a.createElement("a",{className:"secondary-content"},l.a.createElement("a",{className:"btn-floating btn-large infoButton",style:{backgroundColor:"#F28705"},onClick:function(){N()}},l.a.createElement("i",{className:"material-icons"},"info"))),l.a.createElement("a",{className:"secondary-content"},e.matchData.newText?l.a.createElement("a",{className:"btn-floating btn-large chatButton pulse",style:{backgroundColor:"#F28705"},onClick:function(){c(t)}},l.a.createElement("i",{className:"material-icons"},"chat")):l.a.createElement("a",{className:"btn-floating btn-large chatButton",style:{backgroundColor:"#F28705"},onClick:function(){c(t)}},l.a.createElement("i",{className:"material-icons"},"chat")))),l.a.createElement(_.Modal,{open:I,className:"center-align",actions:[],options:{onCloseStart:w}},l.a.createElement(_.Row,null,l.a.createElement(_.Col,{s:12,m:4},l.a.createElement("img",{src:e.matchData.userItemPhoto,className:"circle modalUserImage"}),l.a.createElement("h5",null,e.matchData.userItemName)),l.a.createElement(_.Col,{s:12,m:4},l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("img",{src:"./../../img/swapO-logo-vector.png",className:"swapItemIcon"}),l.a.createElement("br",null),l.a.createElement("br",null)),l.a.createElement(_.Col,{s:12,m:4},l.a.createElement("img",{src:e.matchData.otherItemImage,className:"circle modalUserImage"}),l.a.createElement("h5",null,e.matchData.otherItemName))),l.a.createElement("a",null,l.a.createElement(_.Button,{modal:"close",className:"closeModalButton",onClick:w},"Close"))))},z=a(47),G=(a(196),a(197),{apiKey:"AIzaSyDhXv_Ip1AQOyJwOp1INy3iocNkp3biMF4",authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDhXv_Ip1AQOyJwOp1INy3iocNkp3biMF4",REACT_APP_FIREBASE_APP_ID:"1:133644331634:web:395ae8cb57e8ba3883b0eb",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-YRN7X1QCM9",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"133644331634",REACT_APP_FIREBASE_STORAGEBUCKET:"swapify-85d2c.appspot.com",REACT_APP_GOOGLE_CLIENT_ID:"582713087977-59mpjc19jph6a912mbsb4l41ak8msu56.apps.googleusercontent.com"}).REACT_APP_FIREBASE_AUTHDOMAIN,projectId:"swapify-85d2c",storageBucket:"swapify-85d2c.appspot.com",messagingSenderId:"133644331634",appId:"1:133644331634:web:395ae8cb57e8ba3883b0eb",measurementId:"G-YRN7X1QCM9"});z.a.initializeApp(G);var V=z.a.storage(),Y=z.a.firestore();a(178);function K(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),c=(a[0],a[1]),r=Object(n.useState)([]),i=Object(o.a)(r,2),m=i[0],d=i[1],g=Object(n.useState)([]),E=Object(o.a)(g,2),h=E[0],f=E[1],b=Object(n.useState)(!1),I=Object(o.a)(b,2),v=I[0],N=I[1],w=e.userData,y=Object(n.useContext)(H).recentText,j=[];Object(n.useEffect)((function(){p(w.googleId).then((function(e){c(e.data)})),O(w.googleId).then((function(e){0===e.data.length&&N(!0),f(e),e.data.forEach((function(t){if(t.item1Owner===w.googleId){var a={userItemId:t.item1Id,userId:t.item1Owner,userItemPhoto:t.item1Photo,userItemName:t.item1Name,otherItemId:t.item2Id,otherUser:t.item2Owner,otherItemImage:t.item2Photo,otherItemName:t.item2Name,matchId:t._id,newText:t.item1NewText};j.push(a),e.data.length===j.length&&S(j).then((function(e){d(e)}))}else{var n={userItemId:t.item2Id,userId:t.item2Owner,userItemPhoto:t.item2Photo,userItemName:t.item2Name,otherItemId:t.item1Id,otherUser:t.item1Owner,otherItemImage:t.item1Photo,otherItemName:t.item1Name,matchId:t._id,newText:t.item2NewText};j.push(n),e.data.length===j.length&&S(j).then((function(e){d(e)}))}}))}))}),[y,e]);var S=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}a=0;case 2:if(!(a<t.length)){e.next=10;break}return e.next=5,Y.collection("".concat(t[a].matchId)).orderBy("createdAt","desc").limit(1).get();case 5:(n=e.sent)._delegate._snapshot.docChanges[0]&&(t[a].latestText=n._delegate._snapshot.docChanges[0].doc.data.partialValue.mapValue.fields.text.stringValue,t[a].textTime=n._delegate._snapshot.docChanges[0].doc.data.partialValue.mapValue.fields.createdAt.timestampValue);case 7:a++,e.next=2;break;case 10:return l=t.sort((function(e,t){var a=new Date(e.textTime);return new Date(t.textTime)-a})),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){S(m).then((function(e){d(e)}))}),[y]),l.a.createElement("div",null,l.a.createElement(_.SideNav,{fixed:!0,trigger:l.a.createElement(_.Button,{floating:!0,large:!0,className:"chatSideNavTrigger"},l.a.createElement("i",{class:"material-icons"},"chat"))},l.a.createElement(_.Collection,{className:"chatCollection"},m.map((function(e){return l.a.createElement(W,{yourImageUrl:e.userItemPhoto,imageURL:e.otherItemImage,matchData:e,allMatches:h})})))),l.a.createElement(_.Modal,{open:v,className:"center-align",actions:[],options:{dismissible:!1}},l.a.createElement("h3",null,"No Chats!"),l.a.createElement("br",null),l.a.createElement("div",null,"You don't have any open chats or matches!"),l.a.createElement("div",null,"Go make some matches first!"),l.a.createElement("br",null),l.a.createElement("a",{href:"/profile/".concat(w.googleId)},l.a.createElement(_.Button,{id:"modalBtn"},"Go Back"))))}var q=a(100);a(179);function J(e){var t=e.userData,a=e.message,n=a.text,c=a.sentFromid,r=a.sentFromPhoto,o=c===t.googleId?"sent":"received";return l.a.createElement("div",{className:"message ".concat(o)},l.a.createElement("img",{className:"itemPhoto",src:r,alt:"photo of item"}),l.a.createElement("p",null,n))}var X=a(61),Q=a.n(X),Z=(a(181),a(62));function $(e){var t=e.userData,a=Object(n.useContext)(H),c=a.chatId,r=a.setNewText,i=Object(n.useState)(Y.collection("empty")),m=Object(o.a)(i,2),d=m[0],g=m[1],h=d.orderBy("createdAt"),f=Object(q.a)(h,{idField:"id"}),p=Object(o.a)(f,1)[0],b=Object(n.useState)(""),N=Object(o.a)(b,2),w=N[0],O=N[1],j=Object(n.useRef)(),B=Object(n.useState)({}),T=Object(o.a)(B,2),R=T[0],D=T[1],P=Object(n.useState)({}),A=Object(o.a)(P,2),M=A[0],L=A[1],F=l.a.createRef(),U=Object(n.useState)(!1),W=Object(o.a)(U,2),G=W[0],V=W[1],K=Object(n.useState)(0),X=Object(o.a)(K,2),$=X[0],ee=X[1],te=Object(n.useState)(!1),ae=Object(o.a)(te,2),ne=ae[0],le=ae[1];Object(n.useEffect)((function(){g(Y.collection(c.matchId||"empty")),S(c.matchId).then((function(e){e.data.item1Owner===t.googleId?(D({id:e.data.item1Owner,photoURL:e.data.item1Photo}),L({id:e.data.item2Owner,photoURL:e.data.item2Photo})):(D({id:e.data.item2Owner,photoURL:e.data.item2Photo}),L({id:e.data.item1Owner,photoURL:e.data.item1Photo}))})),setTimeout((function(){j.current.scrollIntoView({behavior:"smooth"})}),500)}),[c]);var ce=function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),S(c.matchId).then((function(e){if(e.data.item1Owner===t.googleId){y(c.matchId,{item2NewText:!0,item1NewText:!1})}else{y(c.matchId,{item1NewText:!0,item2NewText:!1})}})),r(w),e.next=5,d.add({text:w,createdAt:z.a.firestore.FieldValue.serverTimestamp(),sentFromid:R.id,sentToid:M.id,sentFromPhoto:R.photoURL,setToPhoto:M.photoURL});case 5:O(""),j.current.scrollIntoView({behavior:"smooth"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",null,l.a.createElement("div",{className:"container"},l.a.createElement(_.Modal,{open:G,className:"center-align",actions:[],options:{dismissible:!1}},l.a.createElement("h3",null,"Match Deleted!"),l.a.createElement("br",null),l.a.createElement("div",null,"Would you like to rate the other user?"),l.a.createElement("br",null),l.a.createElement(Z.a,{emptySymbol:l.a.createElement("i",{className:"material-icons"},"star_border"),fullSymbol:l.a.createElement("i",{className:"material-icons"},"star"),onChange:function(e){return ee(e)}}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(_.Button,{onClick:function(){E(M.id).then((function(e){var t=e.data[0].rating;t.push($);var a={rating:t};I(M.id,a).then((function(e){window.location.reload()}))}))},modal:"close"},"Submit Rating")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(_.Button,{onClick:function(){window.location.reload()},modal:"close"},"No Thanks"))),l.a.createElement(_.Row,{className:"wrapper"},p&&p.map((function(e){return l.a.createElement(J,{key:e.id,message:e,userData:t})})),l.a.createElement("div",{ref:j}),l.a.createElement("div",{ref:F}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null)),l.a.createElement("div",{className:"chatControls"},l.a.createElement(Q.a,{id:"confetti",active:ne,className:"right-align"}),l.a.createElement(_.Row,null,l.a.createElement(_.Col,{s:12},l.a.createElement("form",{onSubmit:ce},l.a.createElement(_.Col,{s:10},l.a.createElement("input",{value:w,required:!0,className:"chatForm",onChange:function(e){return O(e.target.value)}})),l.a.createElement(_.Col,{s:2},l.a.createElement("button",{type:"submit",className:"btn-floating btn-large waves-effect waves-light sendButton"},l.a.createElement("i",{className:"material-icons"},"send")))))),l.a.createElement(_.Row,null,l.a.createElement(_.Col,{s:6,className:"center-align"},l.a.createElement(_.Modal,{className:"center-align",id:"Modal-Swap",trigger:l.a.createElement(_.Button,{node:"button",className:"swapItemsButton"},"SWAP ITEMS")},l.a.createElement("h3",null,"Swap Items?"),l.a.createElement("br",null),l.a.createElement("div",null,"If you press confirm your item will be no longer listed on Swapify. Only do this after swapping items."),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(_.Button,{onClick:function(){le(!0),S(c.matchId).then((function(e){console.log(e),e.data.item1Owner===t.googleId?C(e.data.item1Id).then((function(t){x(e.data.item1Id).then((function(t){v(e.data.item2Id,{deleteItem:e.data.item1Owner}).then((function(e){V(!0)}))}))})):C(e.data.item2Id).then((function(t){x(e.data.item2Id).then((function(t){v(e.data.item1Id,{deleteItem:e.data.item2Owner}).then((function(e){V(!0)}))}))}))}))},modal:"close"},"Confirm")))),l.a.createElement(_.Col,{s:6,className:"center-align"},l.a.createElement(_.Modal,{className:"center-align",id:"Modal-Swap",trigger:l.a.createElement(_.Button,{node:"button",className:"deleteMatchButton"},"DELETE MATCH")},l.a.createElement("h3",null,"Delete Match?"),l.a.createElement("br",null),l.a.createElement("div",null,"If you press confirm your match will be deleted from Swapify."),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(_.Button,{onClick:function(){k(c.matchId).then((function(e){V(!0)}))},modal:"close"},"Confirm"))))))))}var ee=function(){var e=Object(n.useState)("empty"),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),m=Object(o.a)(r,2),s=m[0],u=m[1],d=Object(n.useState)(2),g=Object(o.a)(d,2),h=g[0],f=g[1],p=Object(n.useState)({email:"",firstName:"",googleId:"",image:"",lastName:"",listedItems:[],rating:[]}),b=Object(o.a)(p,2),I=b[0],v=b[1],N=Object(i.g)().id;return Object(n.useEffect)((function(){E(N).then((function(e){var t={email:e.data[0].email,firstName:e.data[0].firstName,googleId:e.data[0].googleId,image:e.data[0].image,lastName:e.data[0].lastName,listedItems:e.data[0].listedItems,rating:e.data[0].rating};v(t)}))}),[]),l.a.createElement("div",{style:{minHeight:"95vh"}},l.a.createElement(H.Provider,{value:{chatId:a,recentText:s,setChat:function(e){c(e),S(e.matchId).then((function(t){if(I.googleId===t.data.item1Owner&&!0===t.data.item1NewText){y(e.matchId,{item1NewText:!1}),f(Math.floor(1e5*Math.random()))}else if(I.googleId===t.data.item2Owner&&!0===t.data.item2NewText){y(e.matchId,{item2NewText:!1}),f(Math.floor(1e5*Math.random()))}}))},setNewText:function(e){u(e)}}},l.a.createElement(_.Row,{style:{marginBottom:"0px"}},l.a.createElement(_.Col,{s:0,m:4},l.a.createElement(K,{newText:h,userData:I})),l.a.createElement(_.Col,{s:12,m:8},l.a.createElement($,{userData:I})))))},te=a(54);var ae=a(76),ne=a.n(ae);a(182);var le=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),m=Object(o.a)(r,2),s=m[0],u=m[1],d=Object(n.useState)([]),g=Object(o.a)(d,2),h=g[0],p=g[1],b=Object(n.useState)(null),v=Object(o.a)(b,2),N=v[0],w=v[1],O=Object(n.useState)(!1),y=Object(o.a)(O,2),j=y[0],S=y[1],C=Object(n.useState)(""),x=Object(o.a)(C,2),k=x[0],B=x[1],T=Object(n.useState)("Preview"),R=Object(o.a)(T,2),D=R[0],P=R[1],A=Object(n.useState)([""]),M=Object(o.a)(A,2),L=M[0],F=M[1],U=Object(n.useState)(!1),H=Object(o.a)(U,2),W=H[0],z=H[1],G=Object(n.useState)(!1),Y=Object(o.a)(G,2),K=Y[0],q=Y[1],J=Object(i.g)().id,X=Object(n.useState)({email:"",firstName:"",googleId:"",image:"",lastName:"",listedItems:[],rating:[]}),Z=Object(o.a)(X,2),$=Z[0],ee=Z[1];function ae(e){F([e.coords.latitude,e.coords.longitude])}Object(n.useEffect)((function(){E(J).then((function(e){var t={email:e.data[0].email,firstName:e.data[0].firstName,googleId:e.data[0].googleId,image:e.data[0].image,lastName:e.data[0].lastName,listedItems:e.data[0].listedItems,rating:e.data[0].rating};ee(t)})),null===$&&S(!0),document.getElementById("fileBox").addEventListener("click",(function(e){})),navigator.geolocation?navigator.geolocation.getCurrentPosition(ae):alert="Geolocation is not supported by this browser."}),[]);var le=function(){q(!0),new ne.a(N,{quality:.2,success:function(e){var t=Math.floor(1e8*Math.random());V.ref("images/".concat(t+N.name)).put(e).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){V.ref("images").child(t+N.name).getDownloadURL().then((function(e){!function(e,t){var a=t.split("."),n=a[0]+"_500x500."+a[1],l=e.replace(t,n),c={itemName:h.name,itemDescription:s.description,itemPrice:45,imageURL:"".concat(l),itemOwner:$.googleId,likesFromItems:[],likesItems:[],seenItems:[],itemLocation:L};f(c).then((function(e){var t=e.data._id;E($.googleId).then((function(e){var a={listedItems:e.data[0].listedItems};a.listedItems.push(t),I($.googleId,a),console.log("save to database run")}))}))}(e,N.name),B(e),console.log("fileupload handler run"),c(!a),q(!1),setTimeout((function(){return z(!0)}),3e3)}))}))},error:function(e){console.log(e.message)}})};return l.a.createElement("div",{className:"container addItem",style:{marginTop:"50px"}},j?l.a.createElement(i.a,{push:!0,to:"/"}):null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col m7 s6 nameInput"},l.a.createElement(_.Textarea,{onChange:function(e){var t=e.target.value;p(Object(te.a)(Object(te.a)({},h),{},{name:t}))},name:"name",label:"Add Item Name",style:{color:"#025159"},id:"TextInput-5"})),l.a.createElement("div",{className:"col m5 s6"},l.a.createElement("form",{action:"#"},l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn",style:{color:"#D4EEE3"}},l.a.createElement("input",{type:"file",id:"fileBox",onChange:function(e){e.target.files[0]&&w(e.target.files[0])},style:{color:"#03A696"}}),l.a.createElement("i",{className:"material-icons"},"camera_alt")),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{className:"file-path validate",type:"text",placeholder:"Choose a photo",style:{color:"#f25d27"}})))))),l.a.createElement("div",{className:"center-align"},k&&l.a.createElement("img",{className:"responsive-img",src:k,style:{maxWidth:"50%",height:"auto"}})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col m12 s12"},l.a.createElement(_.Textarea,{onChange:function(e){var t=e.target.value;u(Object(te.a)(Object(te.a)({},s),{},{description:t}))},name:"description",label:"Add a description",style:{color:"#025159"}}),l.a.createElement("div",{className:"container right-align"},l.a.createElement(_.Row,null,l.a.createElement(_.Col,{s:6,m:6}),l.a.createElement(_.Col,{s:6,m:6},l.a.createElement(Q.a,{id:"confetti",active:a,className:"right-align"})))))),l.a.createElement(_.Row,null,l.a.createElement(_.Col,{s:12,m:12,className:"center fullHeight"},l.a.createElement(_.Preloader,{className:"preloaderLocation",active:K,color:"blue",flashing:!1,size:"big"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(_.Button,{large:!0,node:"a",id:"mainFileBtn",onClick:function(){"Preview"===D?(q(!0),new ne.a(N,{quality:.2,success:function(e){var t=Math.floor(1e8*Math.random());V.ref("images/".concat(t+N.name)).put(e).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){V.ref("images").child(t+N.name).getDownloadURL().then((function(e){q(!1),B(e)}))}))},error:function(e){console.log(e.message)}}),P("Upload")):le()},style:{marginRight:"5px"}},D),W?l.a.createElement(i.a,{to:"/profile/".concat($.googleId)}):"")))},ce=a(104),re=a(214);a(183);function oe(e){return l.a.createElement("div",{class:"card swipCard center-align"},l.a.createElement("div",{class:"card-image swipCard center-align"},l.a.createElement("img",{className:"cardImage center-align",draggable:"false",src:e.itemInfo.imageURL,alt:"swip card"})),l.a.createElement("div",{class:"card-content"},l.a.createElement("span",{class:"card-title"},e.itemInfo.itemName),l.a.createElement("div",null,e.itemInfo.itemDescription)))}var ie=a(13),me=a(64);a(186),a(187);var se=function(e){var t=me.b.Handle,a={0:l.a.createElement("strong",null,"0 ",l.a.createElement("br",null),"Miles"),50:l.a.createElement("strong",null,"50 Miles")};return l.a.createElement("div",null,l.a.createElement("div",{className:"center-align"},l.a.createElement(me.b,{min:0,max:50,className:"distanceSlider",defaultValue:e.distanceBoundary,handle:function(e){var a=e.value,n=e.dragging,c=e.index,r=Object(ie.a)(e,["value","dragging","index"]);return l.a.createElement(me.a,{prefixCls:"rc-slider-tooltip",overlay:"".concat(a," Miles"),visible:n,placement:"top",key:c},l.a.createElement(t,Object.assign({value:a},r)))},marks:a,onAfterChange:function(t){return e.setDistanceBoundary(t)}})))},ue=(a(188),a(189),!1);var de=function(){var e={},t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],r=a[1],m=Object(n.useState)([]),d=Object(o.a)(m,2),g=d[0],h=d[1],f=Object(n.useState)([]),I=Object(o.a)(f,2),O=I[0],y=I[1],j=Object(n.useState)(!1),S=Object(o.a)(j,2),C=S[0],x=S[1],k=Object(n.useState)(!1),B=Object(o.a)(k,2),T=B[0],D=B[1],P=Object(n.useState)(!1),A=Object(o.a)(P,2),M=A[0],L=A[1],F=Object(n.useState)(0),U=Object(o.a)(F,2),H=U[0],W=U[1],z=Object(n.useState)(!1),G=Object(o.a)(z,2),V=G[0],Y=G[1],K=Object(n.useState)(50),q=Object(o.a)(K,2),J=q[0],X=q[1],Q=Object(n.useState)(""),Z=Object(o.a)(Q,2),$=Z[0],ee=Z[1],te=Object(n.useState)(""),ae=Object(o.a)(te,2),ne=ae[0],le=ae[1],ie=Object(n.useState)(!1),me=Object(o.a)(ie,2),de=me[0],ge=me[1],Ee=Object(i.g)(),he=Ee.id,fe=Ee.item,pe=Object(n.useState)({email:"",firstName:"",googleId:"",image:"",lastName:"",listedItems:[],rating:[]}),be=Object(o.a)(pe,2),Ie=be[0],ve=be[1];Object(n.useEffect)((function(){E(he).then((function(e){var t={email:e.data[0].email,firstName:e.data[0].firstName,googleId:e.data[0].googleId,image:e.data[0].image,lastName:e.data[0].lastName,listedItems:e.data[0].listedItems,rating:e.data[0].rating};ve(t)}))}),[]),Object(n.useEffect)((function(){ge(!0);(function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){navigator.geolocation.getCurrentPosition(e,t)}));case 2:return t=e.sent,e.abrupt("return",[t.coords.latitude,t.coords.longitude]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){p(Ie.googleId).then((function(t){for(var a=0;a<t.data.length;a++){var n={itemLocation:e};v(t.data[a]._id,n)}}))}));null===Ie&&r(!0),b().then((function(e){var t=e.data.filter((function(e){return e.itemOwner!==he}));N(fe).then((function(e){for(var a=e.data.seenItems,n=0;n<a.length;n++)for(var l=0;l<t.length;l++)a[n]===t[l]._id&&(t.splice(l,1),0===t.length&&x(!0));for(var c=0;c<t.length;c++)t[c].likesItems.includes(fe)&&t.unshift(t.splice(c,1)[0]);N(fe).then((function(e){for(var a=[],n=function(n){var l=t[n].itemLocation[0],c=t[n].itemLocation[1],r=e.data.itemLocation[0],o=e.data.itemLocation[1];Ne(l,c,r,o).then((function(e){e<J&&(console.log("push"),a.push(t[n])),setTimeout((function(){0===a.length?(console.log(a),x(!0)):(ge(!1),h(a),y(a[H]))}),1e3)}))},l=0;l<t.length;l++)n(l)}))}))}))}),[J]);var Ne=function(){var e=Object(u.a)(s.a.mark((function e(t,a,n,l){var c,r,o,i,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 6371,c=we(n-t),r=we(l-a),o=Math.sin(c/2)*Math.sin(c/2)+Math.cos(we(t))*Math.cos(we(n))*Math.sin(r/2)*Math.sin(r/2),i=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),m=6371*i,e.abrupt("return",m/1.609344);case 7:case"end":return e.stop()}}),e)})));return function(t,a,n,l){return e.apply(this,arguments)}}();function we(e){return e*(Math.PI/180)}Object(n.useEffect)((function(){!0===ue&&(H===g.length?x(!0):y(g[H]))}),[H]);var Oe=Object(ce.a)(0),ye=Object(re.a)(Oe,[-100,0,100],["#FF0000","#FFFFFF","#00FF00"]);function je(t,a){1.8*e<t?(ue=!0,N(fe).then((function(e){var t={seenItems:e.data.seenItems,likesItems:e.data.likesItems};t.seenItems.push(O._id),t.likesItems.push(O._id),v(fe,t).then((function(t){N(O._id).then((function(t){console.log(t);var a={likesFromItems:t.data.likesFromItems};a.likesFromItems.push(fe),v(O._id,a).then((function(a){for(var n=0;n<e.data.likesFromItems.length;n++)if(e.data.likesFromItems[n]===O._id){Y(!0),ee(e.data.imageURL),le(O.imageURL);var l={item1Id:fe,item1Owner:Ie.googleId,item1Photo:e.data.imageURL,item1Name:e.data.itemName,item2Id:O._id,item2Owner:t.data.itemOwner,item2Photo:t.data.imageURL,item2Name:t.data.itemName,item2Read:!1};w(l).then((function(e){}))}W(H+1)}))}))}))})),D(!0),setTimeout((function(){D(!1)}),700)):e/2>t&&(ue=!0,N(fe).then((function(e){var t={seenItems:e.data.seenItems};t.seenItems.push(O._id),v(fe,t).then((function(e){W(H+1)}))})),L(!0),setTimeout((function(){L(!1)}),700))}return l.a.createElement("div",{style:{minHeight:"95vh"}},c?l.a.createElement(i.a,{push:!0,to:"/"}):null,l.a.createElement("div",{className:"container center-align",style:{marginTop:"20px"}},l.a.createElement(_.Row,null,l.a.createElement(_.Col,{m:3,l:3}),l.a.createElement(_.Col,{s:12,m:6,l:6},l.a.createElement(R.a.div,{style:{background:ye},className:"swipBackground"},l.a.createElement(R.a.div,{drag:"x",dragConstraints:{left:0,right:0},style:{x:Oe},onDragStart:function(t,a){return e=a.point.x},onDragEnd:function(e,t){return je(t.point.x,t.point.y)}},l.a.createElement(_.Row,null,l.a.createElement(_.Col,{s:12},l.a.createElement(oe,{itemInfo:O})))))),l.a.createElement(_.Col,{m:3,l:3})),l.a.createElement(_.Row,null,l.a.createElement(_.Col,{s:4,m:5,l:5.5}),l.a.createElement(_.Col,{s:1},l.a.createElement(_.Preloader,{className:"preloaderLocation",active:de,color:"blue",flashing:!1,size:"big"})),l.a.createElement(_.Col,{s:6})),l.a.createElement(_.Row,null,l.a.createElement(_.Col,{m:3,l:3,xl:1}),l.a.createElement(_.Col,{s:12,m:6,l:6,xl:9},l.a.createElement("h4",{style:{color:"#025159"}},"Set Distance")),l.a.createElement(_.Col,{m:3,l:3,xl:2})),l.a.createElement(_.Row,null,l.a.createElement(_.Col,{m:3,l:3}),l.a.createElement(_.Col,{s:12,m:6,l:6},l.a.createElement(se,{setDistanceBoundary:function(e){X(e)},distanceBoundary:J})),l.a.createElement(_.Col,{m:3,l:3})),l.a.createElement(_.Row,{style:{height:"100px"}},l.a.createElement(_.Col,{m:3,l:3}),l.a.createElement(_.Col,{s:12,m:6,l:6},T?l.a.createElement(R.a.img,{className:"greenCheck",src:"../../img/greenCheckMark.png",animate:{rotate:360},transition:{duration:.5}}):null,M?l.a.createElement(R.a.img,{className:"greenCheck",src:"../../img/redXMark.png",transition:{duration:.5}}):null),l.a.createElement(_.Col,{m:3,l:3}))),l.a.createElement(_.Modal,{open:C,className:"center-align modal",actions:[],options:{dismissible:!1}},l.a.createElement("h3",null,"No more items available!"),l.a.createElement("br",null),l.a.createElement("div",null,"Add a new item, switch items to swap with, or try back later!"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",{href:"/profile/".concat(Ie.googleId)},l.a.createElement(_.Button,{id:"modalBtn"},"Back to my Profile")),l.a.createElement("br",null)),l.a.createElement(_.Modal,{open:V,className:"center-align",actions:[],options:{dismissible:!1}},l.a.createElement("h3",{className:"match"},"It's a match!"),l.a.createElement("img",{src:$,className:"circle swapItemImage",alt:"user item"}),l.a.createElement("img",{src:ne,className:"circle swapItemImage",alt:"other item"}),l.a.createElement("br",null),l.a.createElement("div",null,"Head to the chat page or continue swipping!"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",{href:"/chat/".concat(Ie.googleId)},l.a.createElement(_.Button,{id:"modalBtn"},"Chat Page")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(_.Button,{id:"modalBtn",modal:"close"},"Continue")),l.a.createElement("br",null)))},ge=a(213),Ee=(a(190),function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],r=a[1],m=Object(n.useState)(!1),s=Object(o.a)(m,2),u=s[0],d=s[1],g=Object(n.useState)({}),h=Object(o.a)(g,2),f=h[0],p=h[1],b=Object(n.useState)(!1),I=Object(o.a)(b,2),v=I[0],N=I[1],w=Object(n.useState)(!1),y=Object(o.a)(w,2),j=y[0],S=y[1],C=Object(i.f)().pathname,x=C.split("/"),k=x[x.length-1];function B(){var e=0;f&&O(f.googleId).then((function(t){for(var a=0;a<t.data.length;a++)(t.data[a].item1Owner===f.googleId&&!0===t.data[a].item1NewText||t.data[a].item2Owner===f.googleId&&!0===t.data[a].item2NewText)&&e++;r(0!==e)}))}return Object(n.useEffect)((function(){B(),setInterval((function(){B()}),5e3)}),[f]),Object(n.useEffect)((function(){"chat"===x[1]?N(!0):N(!1),S("/"===C)}),[C]),Object(n.useEffect)((function(){k&&E(k).then((function(e){if(0===e.data.length)d(!0);else{var t={email:e.data[0].email,firstName:e.data[0].firstName,googleId:e.data[0].googleId,image:e.data[0].image,lastName:e.data[0].lastName,listedItems:e.data[0].listedItems,rating:e.data[0].rating};p(t)}}))}),[C]),!0===j?l.a.createElement("div",null,u?l.a.createElement(i.a,{push:!0,to:"/"}):null,l.a.createElement(_.Navbar,{alignLinks:"right",brand:l.a.createElement("a",{className:"brand-logo",href:"/"},l.a.createElement("img",{src:"./../img/swapifyLogoTopDark-vector.png",height:"125",alt:"swapify logo"})),centerChildren:!0,className:"navbar transparent z-depth-0",id:"mobile-nav",menuIcon:c?l.a.createElement(ge.a,{variant:"dot",color:"secondary",className:"chatBadge"},l.a.createElement(_.Icon,{className:"swapIcon"},"menu")):l.a.createElement(ge.a,{color:"secondary",className:"chatBadge"},l.a.createElement(_.Icon,{className:"swapIcon"},"menu")),options:{draggable:!0,edge:"right",inDuration:250,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,outDuration:200,preventScrolling:!0}})):!0===v?l.a.createElement("div",null,u?l.a.createElement(i.a,{push:!0,to:"/"}):null,l.a.createElement(_.Navbar,{alignLinks:"right",brand:l.a.createElement("a",{className:"brand-logo",href:"/"},l.a.createElement("img",{src:"./../img/swapifyLogoTopDark-vector.png",height:"125",alt:"swapify logo"})),centerLogo:!0,centerChildren:!0,className:"navbar transparent z-depth-0",id:"mobile-nav",menuIcon:c?l.a.createElement(ge.a,{variant:"dot",color:"secondary",className:"chatBadge"},l.a.createElement(_.Icon,{className:"swapIcon"},"menu")):l.a.createElement(ge.a,{color:"secondary",className:"chatBadge"},l.a.createElement(_.Icon,{className:"swapIcon"},"menu")),options:{draggable:!0,edge:"right",inDuration:250,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,outDuration:200,preventScrolling:!0}},l.a.createElement(_.NavItem,{tooltip:"Add Item",href:"/createItem/".concat(f.googleId),className:"addItem","alt-text":"add item",node:"button"},l.a.createElement(_.Icon,{tooltip:"Add Item",node:"button"},"add_circle")),l.a.createElement(_.NavItem,{href:"/profile/".concat(f.googleId),className:"profile"},l.a.createElement(_.Icon,null,"person")),l.a.createElement(_.NavItem,{href:"/chat/".concat(f.googleId),className:"swapIconWrapper"},c?l.a.createElement(ge.a,{variant:"dot",color:"secondary",className:"chatBadge"},l.a.createElement(_.Icon,{className:"swapIcon"},"all_inclusive")):l.a.createElement(ge.a,{color:"secondary",className:"chatBadge"},l.a.createElement(_.Icon,{className:"swapIcon"},"all_inclusive"))))):l.a.createElement("div",null,u?l.a.createElement(i.a,{push:!0,to:"/"}):null,l.a.createElement(_.Navbar,{alignLinks:"right",brand:l.a.createElement("a",{className:"brand-logo",href:"/"},l.a.createElement("img",{src:"../../img/swapifyLogoTopDark-vector.png",height:"125",alt:"swapify logo"})),centerChildren:!0,className:"navbar transparent z-depth-0",id:"mobile-nav",menuIcon:c?l.a.createElement(ge.a,{variant:"dot",color:"secondary",className:"chatBadge"},l.a.createElement(_.Icon,{className:"swapIcon"},"menu")):l.a.createElement(ge.a,{color:"secondary",className:"chatBadge"},l.a.createElement(_.Icon,{className:"swapIcon"},"menu")),options:{draggable:!0,edge:"right",inDuration:250,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,outDuration:200,preventScrolling:!0}},l.a.createElement(_.NavItem,{tooltip:"Add Item",href:"/createItem/".concat(f.googleId),className:"addItem","alt-text":"add item",node:"button"},l.a.createElement(_.Icon,{tooltip:"Add Item",node:"button"},"add_circle")),l.a.createElement(_.NavItem,{href:"/profile/".concat(f.googleId),className:"profile"},l.a.createElement(_.Icon,null,"person")),l.a.createElement(_.NavItem,{href:"/chat/".concat(f.googleId),className:"swapIconWrapper"},c?l.a.createElement(ge.a,{variant:"dot",color:"secondary",className:"chatBadge"},l.a.createElement(_.Icon,{className:"swapIcon"},"all_inclusive")):l.a.createElement(ge.a,{color:"secondary",className:"chatBadge"},l.a.createElement(_.Icon,{className:"swapIcon"},"all_inclusive")))))}),he=(a(191),function(e){return l.a.createElement("div",{className:"stickyFooter center"},l.a.createElement(_.Footer,{copyrights:"\xa9 2021 Swapify"}))});a(192);var fe=function(){var e=Object(i.f)().pathname,t=e.split("/"),a=t[t.length-1],c=Object(n.useState)(!1),r=Object(o.a)(c,2),m=r[0],s=r[1],u=Object(n.useState)(!1),d=Object(o.a)(u,2),g=d[0],h=d[1],f=Object(n.useState)(""),b=Object(o.a)(f,2),N=b[0],w=b[1],j=Object(n.useState)(""),S=Object(o.a)(j,2),C=S[0],k=S[1],B=Object(n.useState)(""),T=Object(o.a)(B,2),R=T[0],P=T[1],A=Object(n.useState)(""),M=Object(o.a)(A,2),L=M[0],F=M[1],H=Object(n.useState)(!1),W=Object(o.a)(H,2),z=W[0],G=W[1],V=Object(n.useState)(0),Y=Object(o.a)(V,2),K=Y[0],q=Y[1],J=Object(n.useState)(""),X=Object(o.a)(J,2),Q=X[0],$=X[1],te=Object(n.useState)("welcomeBackground"),ae=Object(o.a)(te,2),ne=ae[0],ce=ae[1];return setInterval((function(){a&&p(a).then((function(e){for(var t=0;t<e.data.length;t++)"false"!==e.data[t].deleteItem&&($(e.data[t].deleteItem),w(e.data[t].imageURL),k(e.data[t]._id),s(!0))}))}),5e3),setInterval((function(){a&&O(a).then((function(e){for(var t=function(t){if(e.data[t].item2Owner==a&&!1===e.data[t].item2Read){y(e.data[t]._id,{item2Read:!0}).then((function(a){h(!0),P(e.data[t].item1Photo),F(e.data[t].item2Photo)}))}},n=0;n<e.data.length;n++)t(n)}))}),5e3),Object(n.useEffect)((function(){"/"===e?ce("welcomeBackground"):"profile"===t[1]?ce("profileBackground"):"chat"===t[1]?ce("chatBackground"):"createItem"===t[1]?ce("createItemBackground"):"swipping"===t[1]&&ce("swipingBackground")}),[e]),l.a.createElement("div",{className:ne},l.a.createElement(Ee,null),l.a.createElement(i.b,{exact:!0,path:"/",component:D}),l.a.createElement(i.b,{path:"/profile/:id",component:U}),l.a.createElement(i.b,{exact:!0,path:"/createItem/:id",component:le}),l.a.createElement(i.b,{exact:!0,path:"/swipping/:item/:id",component:de}),l.a.createElement(i.b,{exact:!0,path:"/chat/:id",component:ee}),l.a.createElement(i.b,{exact:!0,path:"/:anything",component:D}),window.location.pathname.includes("/chat/")?null:l.a.createElement(he,null),l.a.createElement(_.Modal,{open:m,className:"center-align",actions:[],options:{dismissible:!1}},l.a.createElement("h3",null,"Congrats!"),l.a.createElement("img",{src:N,className:"circle swapItemImage"}),l.a.createElement("br",null),l.a.createElement("div",null,"Another user has alerted us that you have swapped items with them."),l.a.createElement("div",null,"If you confirm, your item will be deleted from Swapify."),l.a.createElement("div",null,"If you deny, you can continue swapping with your item."),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(_.Button,{id:"modalBtn",onClick:function(){x(C).then((function(e){G(!0)}))},modal:"close"},"Confirm")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(_.Button,{id:"modalBtn",onClick:function(){v(C,{deleteItem:!1}).then((function(e){G(!0)}))},modal:"close"},"Deny"))),l.a.createElement(_.Modal,{open:g,className:"center-align"},l.a.createElement("h3",null,"Congrats!"),l.a.createElement("h3",null,"You have a new Match!"),l.a.createElement("img",{src:R,className:"circle swapItemImage"}),l.a.createElement("img",{src:L,className:"circle swapItemImage"}),l.a.createElement("br",null),l.a.createElement("div",null,"Go to the Chat Page to make the swap!"),l.a.createElement("br",null)),l.a.createElement(_.Modal,{open:z,className:"center-align",actions:[],options:{dismissible:!1}},l.a.createElement("h3",null,"Congrats on your Swap!"),l.a.createElement("br",null),l.a.createElement("div",null,"Would you like to rate the other user?"),l.a.createElement("br",null),l.a.createElement(Z.a,{emptySymbol:l.a.createElement("i",{className:"material-icons"},"star_border"),fullSymbol:l.a.createElement("i",{className:"material-icons"},"star"),onChange:function(e){return q(e)}}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(_.Button,{id:"modalBtn",onClick:function(){E(Q).then((function(e){console.log(e.data[0].rating);var t=e.data[0].rating;t.push(K),I(Q,{rating:t}).then((function(e){window.location.reload()}))}))},modal:"close"},"Submit Rating")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(_.Button,{id:"modalBtn",modal:"close"},"No Thanks"))))},pe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function be(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(193),a(194);r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(P.a,null,l.a.createElement(fe,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");pe?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):be(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):be(e)}))}}()}},[[106,1,2]]]);
//# sourceMappingURL=main.988aaf1b.chunk.js.map